<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5047&p=31767 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 08:43:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Delay-Wait-Sleep tricks. - Page 4 - DosTips.com</title>


	<link rel="canonical" href="viewtopic890e.html?t=5047&amp;start=45">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic6146.html?f=3&amp;t=5047&amp;start=45">Delay-Wait-Sleep tricks.</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="postingc1bf.html?mode=reply&amp;f=3&amp;t=5047" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicd05b.html?f=3&amp;t=5047&amp;start=45&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="5047" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			65 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopic4ab1-2.html?f=3&amp;t=5047&amp;start=30" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopic2955.html?f=3&amp;t=5047" role="button">1</a></li>
				<li><a class="button" href="viewtopica5da-2.html?f=3&amp;t=5047&amp;start=15" role="button">2</a></li>
				<li><a class="button" href="viewtopic4ab1-2.html?f=3&amp;t=5047&amp;start=30" role="button">3</a></li>
			<li class="active"><span>4</span></li>
				<li><a class="button" href="viewtopicb300.html?f=3&amp;t=5047&amp;start=60" role="button">5</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopicb300.html?f=3&amp;t=5047&amp;start=60" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p31668" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile31668">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31668">

						<h3 class="first"><a href="#p31668">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting1126.html?mode=quote&amp;f=3&amp;p=31668" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicf9d2.html?p=31668#p31668" onclick="prompt('Message #46',this.href); return false;">#46</a></span> 
									<a class="unread" href="viewtopicf9d2.html?p=31668#p31668" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>11 Jan 2014 17:09
			</p>
			
			
			
			<div class="content">It is probably because of the PCI bus in its specification PCI 2.1:<br />There the specified clock speed is 66,66... MHz, so one cycle is is exact 15 ms.<br />Because of power input variations, and temperature differences, this value is<br />may differ by +-1 ms.<br /><br />penpen<br /><br />Edit: NO i was wrong see posts below.<br />Edit2: Nevertheless the last sentence is true.</div>

			
													<div class="notice">
					Last edited by <a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a> on 13 Jan 2014 13:33, edited 2 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31669" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile31669">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31669">

						<h3 ><a href="#p31669">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting17e4.html?mode=quote&amp;f=3&amp;p=31669" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicec1f-3.html?p=31669#p31669" onclick="prompt('Message #47',this.href); return false;">#47</a></span> 
									<a class="unread" href="viewtopicec1f-3.html?p=31669#p31669" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>11 Jan 2014 17:26
			</p>
			
			
			
			<div class="content">seem 15,625 ms = 64Mhz<br /><br />There is this clock in specific of PC?<br /><br />I used this to discovery/confirm<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal EnableDelayedExpansion<br /><br />cls<br /><br />rem sync to 00 or 01<br /><br />:loopm100<br />if &quot;%time:~-2%&quot; neq &quot;00&quot; if &quot;%time:~-2%&quot; neq &quot;01&quot; goto :loopm100<br />echo %time%<br />echo(<br /><br />set old_last_digit=<br />set my_ms=0<br />for /L %%i in (1,1,10000000) do (<br /><br />&nbsp;set t=!time!<br />&nbsp;set last_digit=!t:~-1!<br /><br />&nbsp;rem check if last digit is changed.<br />&nbsp;if not &quot;!old_last_digit!&quot;==&quot;!last_digit!&quot; (<br />&nbsp; set old_last_digit=!last_digit!<br />&nbsp; <br />&nbsp; rem check and correct<br />&nbsp; set ms=9!t:~-2!0000<br />&nbsp; set /a &quot;diff=ms-(9000000+my_ms)&quot;<br /><br />&nbsp; echo &#91;%%i&#93; !t! !ms! !my_ms! !diff!<br />&nbsp; if !my_ms! gtr 9000000 pause<br /><br />&nbsp; set /a my_ms+=15625<br /><br />&nbsp; if !diff! geq 0 set /a my_ms+=diff<br /><br />&nbsp;)<br /><br />)<br /></code></pre></div><br /><br />on windows 7 32 bit<br /><br />einstein1969</div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 11 Jan 2014 18:10, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31670" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile31670">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31670">

						<h3 ><a href="#p31670">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting86e4.html?mode=quote&amp;f=3&amp;p=31670" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicd690.html?p=31670#p31670" onclick="prompt('Message #48',this.href); return false;">#48</a></span> 
									<a class="unread" href="viewtopicd690.html?p=31670#p31670" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>11 Jan 2014 18:00
			</p>
			
			
			
			<div class="content">With &quot;probably&quot; i didn't mean: It could be that the clock cycle depends on PCI (2.1).<br />It should mean:<br />It has to do with the PCI 2.1 specification.<br />I just don't know if nowadays the clock is located behind a PCI (2.1), or<br />if it is simulated by Windows, using the High Performance Counter of the processor.<br /><br />And if your measure differs, then this could possibly depend on:<br />Wrong voltage inputs from your power supply (for example: +12,1 -11,9 +4.9 ...), or<br />the clock chip doesn't meet the exact temperature of 20°C (for example: 24°C).<br /><br />penpen<br /><br />Edit: NO i was wrong it hasn't todo with the PCI (2.1), but the last block is true.</div>

			
													<div class="notice">
					Last edited by <a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a> on 13 Jan 2014 13:32, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31685" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile31685">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31685">

						<h3 ><a href="#p31685">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting7e2a.html?mode=quote&amp;f=3&amp;p=31685" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopice78d-2.html?p=31685#p31685" onclick="prompt('Message #49',this.href); return false;">#49</a></span> 
									<a class="unread" href="viewtopice78d-2.html?p=31685#p31685" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>12 Jan 2014 11:57
			</p>
			
			
			
			<div class="content">Hi,<br /><br />can sameone test this script?<br /><br />should detect the real interval timer inside of dos. It is not perfect and should be revised and improved. Once detected the interval can be used for a more accurate calculation of the time returned by the variable %TIME%.<br /><br />Run it several times to get a more accurate value and if possible on different machine/SO.<br /><br />thanks.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal EnableDelayedExpansion<br /><br />rem goto :predict<br /><br />for /f %%a in ('copy /Z &quot;%~f0&quot; nul') do set &quot;CR=%%a&quot;<br /><br />rem for discovery internal dos timer interval/resolution:<br /><br />rem sync to 00 or 01<br />cls<br />echo(<br />echo Syncing to 00 or 01 cs ...<br />:loop<br />if &quot;%time:~-2%&quot; neq &quot;00&quot; if &quot;%time:~-2%&quot; neq &quot;01&quot; goto :loop<br />echo(<br />echo Starting at %time%<br />echo(<br /><br />rem using microsecond resolution (0.000001 seconds)<br />set /a err=0, res=10000<br /><br /><br />set ot=!time:~-2!<br />set /a my_t=(1!ot!-100)*10000<br /><br />rem echo !time!0000 !time:~0,-2!!my_t! !ot!<br />rem echo(<br /><br />set /a iter=1000<br /><br />echo(*=centiseconds&nbsp; **=Resolution/Interval in microseconds<br />echo(<br />Echo(Iter&nbsp; &nbsp;%%TIME%%&nbsp; &nbsp;&nbsp; &nbsp;Calculated&nbsp; &nbsp;diff*&nbsp; &nbsp;R/I**&nbsp; &nbsp;errors<br />echo(<br /><br />:next<br />set /a err=0, iter+=1000<br /><br />For /L %%i in (1,1,%iter%) do (<br /><br />&nbsp; &nbsp;rem take new time and check if changed.<br />&nbsp; &nbsp;set t=!time!<br />&nbsp; &nbsp;if not &quot;!t:~-2!&quot; == &quot;!ot!&quot; (<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;rem save new time<br />&nbsp; &nbsp;&nbsp; &nbsp;set ot=!t:~-2!<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;rem check error<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;my_t=(my_t+res) %% 1000000, diff=(1!ot!-100)-(my_t/10000)&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;if !diff! geq 0 (if !diff! gtr 0 set /a res+=err/2) else set /a res-=err/2<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;if !diff! neq 0 set /a err+=1<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;rem adjust offset<br />&nbsp; &nbsp;&nbsp; &nbsp;if !diff! gtr 0 set /a &quot;my_t=my_t+( (1!ot!-100)*10000-my_t )&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;if %iter% gtr 1000 (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&lt;nul set /p &quot;=&#91;%%i&#93;&nbsp; &nbsp;!t!0000 !t:~0,-2!!my_t!&nbsp; &nbsp;!diff!&nbsp; &nbsp;!res!&nbsp; &nbsp;!err!&nbsp; &nbsp;!CR!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;echo &#91;%%i&#93;&nbsp; &nbsp;!t!0000 !t:~0,-2!!my_t!&nbsp; !diff!&nbsp; &nbsp;!res! !err!<br />&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;)<br /><br />)<br /><br />if !err! neq 0 goto :next<br /><br />goto :eof<br /></code></pre></div><br /><br />result:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Syncing to 00 or 01 cs ...<br /><br />Starting at 18:54:15,00<br /><br />*=centiseconds&nbsp; **=Resolution/Interval in microseconds<br /><br />Iter&nbsp; &nbsp; %TIME%&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Calculated&nbsp; &nbsp; &nbsp; diff*&nbsp; &nbsp;R/I**&nbsp; &nbsp;errors<br /><br />&#91;22891&#93; 18:54:53,210000 18:54:53,219933 0&nbsp; &nbsp; &nbsp; &nbsp;15627&nbsp; &nbsp;0<br /></code></pre></div><br /><br />einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31698" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile31698">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchf147.html?author_id=3221&amp;sr=posts">6033</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 10 Feb 2012 02:20</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content31698">

						<h3 ><a href="#p31698">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingec2c.html?mode=quote&amp;f=3&amp;p=31698" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicb596.html?p=31698#p31698" onclick="prompt('Message #50',this.href); return false;">#50</a></span> 
									<a class="unread" href="viewtopicb596.html?p=31698#p31698" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a></strong> &raquo; </span>12 Jan 2014 22:32
			</p>
			
			
			
			<div class="content">It never stops - the iterations figures goes up and then starts again.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31718" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile31718">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31718">

						<h3 ><a href="#p31718">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting23e2.html?mode=quote&amp;f=3&amp;p=31718" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic64a0.html?p=31718#p31718" onclick="prompt('Message #51',this.href); return false;">#51</a></span> 
									<a class="unread" href="viewtopic64a0.html?p=31718#p31718" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>13 Jan 2014 07:10
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>foxidrive wrote:</cite>It never stops - the iterations figures goes up and then starts again.</div></blockquote><br /><br />ok. I need to rewrite the algorithm. It's seem that on load the algorithm is not efficient.<br /><br />I think I have framed the problem, if someone wants to try to give a solution...<br /><br />I assumed that the variable %TIME% is charged by taking the values ​​from a subsystem with millisecond precision or micro. I assumed that there are no rounding.<br /><br />I verified with a jscript through the function &quot;getTime ()&quot; that has millisecond precision and which has the same resolution of 15-16 milliseconds.<br /><br />The problem is to find the frequency or period of the oscillator / clock which is the basis. You may also need to find the phase of the same.<br /><br />It 'a problem in two variables.<br /><br />For the frequency / period we have some values ​​truncated to the hundredth of a second that are in the variable %TIME%<br /><br />If the system is under load these values ​​can jump higher. Then serves interpolation.<br /><br />To find the frequency you could implement an algorithm that exploits the Doppler effect. Is like tuning a musical instrument. (dbenham help!)<br /><br />einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31720" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile31720">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31720">

						<h3 ><a href="#p31720">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingfb15.html?mode=quote&amp;f=3&amp;p=31720" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic440f.html?p=31720#p31720" onclick="prompt('Message #52',this.href); return false;">#52</a></span> 
									<a class="unread" href="viewtopic440f.html?p=31720#p31720" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>13 Jan 2014 07:55
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>penpen wrote:</cite>With &quot;probably&quot; i didn't mean: It could be that the clock cycle depends on PCI (2.1).<br />It should mean:<br />It has to do with the PCI 2.1 specification.<br />I just don't know if nowadays the clock is located behind a PCI (2.1), or<br />if it is simulated by Windows, using the High Performance Counter of the processor.<br /><br />And if your measure differs, then this could possibly depend on:<br />Wrong voltage inputs from your power supply (for example: +12,1 -11,9 +4.9 ...), or<br />the clock chip doesn't meet the exact temperature of 20°C (for example: 24°C).<br /><br />penpen</div></blockquote><br /><br />Thanks for your comments.<br /><br />I have found a document that confirm my guess of 64MHz. This document talk about of 15.6 millisecond (i suppose 15.625). But talk that an application my change this interval. And talk about of AFFINITY for multicore system.<br /><br /><a href="http://download.microsoft.com/download/3/0/2/3027D574-C433-412A-A8B6-5E0A75D5B237/Timer-Resolution.docx" class="postlink">http://download.microsoft.com/download/3/0/2/3027D574-C433-412A-A8B6-5E0A75D5B237/Timer-Resolution.docx</a><br /><br />EDIT: The frequency is 64 Hz and not 64 MHZ. Sorry.<br /><br />einstein1969</div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 13 Jan 2014 08:04, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31722" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile31722">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searcha86d.html?author_id=2258&amp;sr=posts">2152</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 12 Feb 2011 21:02</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> United States (east coast)</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31722">

						<h3 ><a href="#p31722">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting26aa.html?mode=quote&amp;f=3&amp;p=31722" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicda38.html?p=31722#p31722" onclick="prompt('Message #53',this.href); return false;">#53</a></span> 
									<a class="unread" href="viewtopicda38.html?p=31722#p31722" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a></strong> &raquo; </span>13 Jan 2014 07:59
			</p>
			
			
			
			<div class="content">Another article that may prove useful: <!-- m --><a class="postlink" href="http://msdn.microsoft.com/en-us/magazine/cc163996.aspx">http://msdn.microsoft.com/en-us/magazine/cc163996.aspx</a><!-- m --><br /><br /><br />Dave Benham</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31724" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile31724">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31724">

						<h3 ><a href="#p31724">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6b73.html?mode=quote&amp;f=3&amp;p=31724" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic90ac.html?p=31724#p31724" onclick="prompt('Message #54',this.href); return false;">#54</a></span> 
									<a class="unread" href="viewtopic90ac.html?p=31724#p31724" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>13 Jan 2014 08:11
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>dbenham wrote:</cite>Another article that may prove useful: <!-- m --><a class="postlink" href="http://msdn.microsoft.com/en-us/magazine/cc163996.aspx">http://msdn.microsoft.com/en-us/magazine/cc163996.aspx</a><!-- m --><br /><br /><br />Dave Benham</div></blockquote><br /><br />thanks. This article is interesting and it made me discover this tools<br /><br /><a href="http://technet.microsoft.com/en-us/sysinternals/bb897568.aspx" class="postlink">http://technet.microsoft.com/en-us/sysinternals/bb897568.aspx</a><br /><br />can be used for confirm.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\Users\fra\Desktop\tmp&gt;Clockres.exe<br /><br />ClockRes v2.0 - View the system clock resolution<br />Copyright (C) 2009 Mark Russinovich<br />SysInternals - www.sysinternals.com<br /><br />Maximum timer interval: 15.625 ms<br />Minimum timer interval: 0.500 ms<br />Current timer interval: 15.625 ms<br /><br />C:\Users\fra\Desktop\tmp&gt;<br /></code></pre></div><br /><br />but i want implement a batch pure solution !<br /><br />einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31732" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile31732">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31732">

						<h3 ><a href="#p31732">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd722-2.html?mode=quote&amp;f=3&amp;p=31732" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicf4f1.html?p=31732#p31732" onclick="prompt('Message #55',this.href); return false;">#55</a></span> 
									<a class="unread" href="viewtopicf4f1.html?p=31732#p31732" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>13 Jan 2014 13:29
			</p>
			
			
			
			<div class="content">I thought these results are curious, so i've looked up in my (old) papers:<br />First to say: Sorry. (I was so sure that i was right... .)<br /><br />You are right, that i remembered (completely) wrong:<br />The High Performance Counter (processor time measured within the CPU) can be accesses via PCI 2.1,<br />so what i've said above (66,66 MHz) is the maximum timing with that the High Performance Counter could be accessed, but that doesn't mean the measurement is such good (100 ns, or 10 kHz is maximum supported by windows structs).<br /><br />The real cause of this 64 Hz has to do with the real-time clock located in the CMOS chip:<br />The industry standard of accessing the CMOS was 32768 Hz.<br />This was repeatedly halfed to access a time signal of 1 Hz.<br /><br />(Since some unknown time, sry it is not included in my script) this resolution could be changed<br />(by mutiples of two, later other mutliples possible, the interrupted time counter then do mutiple partial ticks before one full tick with setting up a new time).<br /><br />The 64 Hz were used in 386, so for compatability reasons they left the recommended time tick to 15.625.<br /><br />(My script has no list of references, so i could not give them, although i wished i could in this case.)<br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31740" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile31740">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31740">

						<h3 ><a href="#p31740">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting5d4f.html?mode=quote&amp;f=3&amp;p=31740" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicf6d4.html?p=31740#p31740" onclick="prompt('Message #56',this.href); return false;">#56</a></span> 
									<a class="unread" href="viewtopicf6d4.html?p=31740#p31740" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>13 Jan 2014 18:31
			</p>
			
			
			
			<div class="content">is possibile to access the timer resolution without external tools :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>powercfg -energy -xml duration 1<br /></code></pre></div><br /><br />and (i have not created a script at the moment)<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>type energy-report.xml | findstr /N &quot;e5ba7e97-57dd-4378-a022-0b5b3fff3d22&quot;<br />69<br /><br />for /F &quot;skip=69&quot; %%f in (energy-report.xml) do @echo %%f<br />&lt;Name&gt;Risoluzione<br />&lt;Value&gt;156250&lt;/Value&gt;<br /></code></pre></div><br /><br />This work on windows 7 32bit<br /><br />einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p31767" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile31767">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist4de0.html?mode=viewprofile&amp;u=5191" class="username">AiroNG</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchab4d.html?author_id=5191&amp;sr=posts">45</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 17 Nov 2013 15:00</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content31767">

						<h3 ><a href="#p31767">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcdb6.html?mode=quote&amp;f=3&amp;p=31767" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic9879-2.html?p=31767#p31767" onclick="prompt('Message #57',this.href); return false;">#57</a></span> 
									<a class="unread" href="viewtopic9879-2.html?p=31767#p31767" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist4de0.html?mode=viewprofile&amp;u=5191" class="username">AiroNG</a></strong> &raquo; </span>14 Jan 2014 12:09
			</p>
			
			
			
			<div class="content">on topic:<br />I think the idea of carlsomo back on <a href="viewtopic419f.html?p=29574#p29574" class="postlink">the first page of this thread</a> might be a good idea. <br />He said &quot;it uses much cpu&quot; but I'm sure there are some nice tricks<br />to reduce the cpu usage (along the lines of <a href="viewtopicf46d.html?f=3&amp;t=5110" class="postlink">this</a>).<br /><br /><br />off topic:<br /><br />Mod Edit: I removed the off topic posts.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p35376" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile35376">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content35376">

						<h3 ><a href="#p35376">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge73e.html?mode=quote&amp;f=3&amp;p=35376" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic6ac8.html?p=35376#p35376" onclick="prompt('Message #58',this.href); return false;">#58</a></span> 
									<a class="unread" href="viewtopic6ac8.html?p=35376#p35376" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>23 Jun 2014 06:19
			</p>
			
			
			
			<div class="content">Hi, I have probed the pathping command.<br /><br /><strong class="text-strong">This may resolve the ping problem with low time wait/delay/sleep</strong>. On windows 7 this work well<br /><br />Example:<br /><br />delay 50ms:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>pathping 127.0.0.1 -n -q 1 -p 50<br /></code></pre></div><br /><br />einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p35527" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile35527">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content35527">

						<h3 ><a href="#p35527">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6d86.html?mode=quote&amp;f=3&amp;p=35527" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic4491.html?p=35527#p35527" onclick="prompt('Message #59',this.href); return false;">#59</a></span> 
									<a class="unread" href="viewtopic4491.html?p=35527#p35527" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>01 Jul 2014 16:18
			</p>
			
			
			
			<div class="content">Hi, I add a recent discovery for nice <strong class="text-strong">HEARTBEAT</strong> in dos batch<br /><br />This is good for <strong class="text-strong">multithreading batch</strong> and other application and It help to <strong class="text-strong">reduce cpu in polling cicles</strong>.<br /><br />the code for <strong class="text-strong">command line</strong>:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>( for /L %n in (0) do @ping -n 2 127.0.0.1 &gt;nul &amp; start &quot;PING&quot; /B ping 127.0.0.1 -n 25 ) | FIND &quot;128&quot; | cmd /v:on /c&quot; for /l %n in (0) do @(set/p &quot;L=&quot; &amp; if &quot;!L:~-3!&quot;==&quot;128&quot; ( set /a t=1!time:~6,2!!time:~9,2!-10000, dt=t-oldt, dt+=(dt^&gt;^&gt;31^)^&amp;6000 &gt;NUL &amp; if !dt! geq 20 set/p &quot;.=!dt! &quot;&lt;nul &amp; set /a oldt=t &gt;NUL ) ) &quot;<br /></code></pre></div><br />this code output at specified interval the number of centisec from last output. <strong class="text-strong">Wait few seconds for stabilize 30-60 sec </strong><br /><br />You can change the interval in the piece of code that is:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>if !dt! geq 20 <br /></code></pre></div><br />the 20 is 20centiseconds or 200milliseconds. This will output at frequency of 1000/200 = <strong class="text-strong">5 at second.</strong><br /><br />You can change the value. <br /><br />Onother value that is possible change for tuning is the number<strong class="text-strong"> 25 </strong>in the code:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>start &quot;PING&quot; /B ping 127.0.0.1 -n 25<br /></code></pre></div><br /><br />The number is good for the most. But if you have a very faster pc you can increase at 30 or 35 or until the output is more precise. If the output has a delay big you can try to increase for probe to decrease and have the average requested.<br /><br /><strong class="text-strong">What happen if this is too low?</strong><br /><br />Example: Use a delay of 200 ms or 20 cs. And use a value for ping of 15<br />output:<br /><blockquote class="uncited"><div>23 20 <strong class="text-strong">47</strong> 22 22 <strong class="text-strong">59</strong> 20 22 <strong class="text-strong">63</strong> 22 22 <strong class="text-strong">62</strong> 21 22<br /></div></blockquote><br />the delay is not omogeneus.<br /><br />Trying a value for ping -n 20<br />output:<br /><blockquote class="uncited"><div>26 21 <strong class="text-strong">33</strong> 20 20 25 <strong class="text-strong">39</strong> 21 22 21 <strong class="text-strong">45</strong> 21 21 23 <strong class="text-strong">44</strong> 26 21<br /></div></blockquote><br />a little better but not enough<br /><br />Trying a value for ping -n 25<br />output:<br /><blockquote class="uncited"><div> 20 23 21 25 21 21 23 23 23 20 24 21 25 22 20 23 22 20 24 24 22 24 21 21<br /></div></blockquote><br />this is accetable!<br /><br />But <strong class="text-strong">try to keep it as low as possible</strong> because it uses a lot of resources the pc (if exaggerated)<br /><br />einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p35529" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile35529">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1322.html?author_id=2988&amp;sr=posts">3970</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Dec 2011 13:59</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content35529">

						<h3 ><a href="#p35529">Re: Delay-Wait-Sleep tricks.</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6215.html?mode=quote&amp;f=3&amp;p=35529" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic6759.html?p=35529#p35529" onclick="prompt('Message #60',this.href); return false;">#60</a></span> 
									<a class="unread" href="viewtopic6759.html?p=35529#p35529" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a></strong> &raquo; </span>01 Jul 2014 18:54
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>einstein1969 wrote:</cite>But <strong class="text-strong">try to keep it as low as possible</strong> because it uses a lot of resources the pc (if exaggerated)</div></blockquote><br />Wasn't the original purpose of this thread to not use a lot of resources.  I remember getting yelled at for my contribution.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingc1bf.html?mode=reply&amp;f=3&amp;t=5047" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicd05b.html?f=3&amp;t=5047&amp;start=45&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=5047&amp;start=45">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			65 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopic4ab1-2.html?f=3&amp;t=5047&amp;start=30" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopic2955.html?f=3&amp;t=5047" role="button">1</a></li>
				<li><a class="button" href="viewtopica5da-2.html?f=3&amp;t=5047&amp;start=15" role="button">2</a></li>
				<li><a class="button" href="viewtopic4ab1-2.html?f=3&amp;t=5047&amp;start=30" role="button">3</a></li>
			<li class="active"><span>4</span></li>
				<li><a class="button" href="viewtopicb300.html?f=3&amp;t=5047&amp;start=60" role="button">5</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopicb300.html?f=3&amp;t=5047&amp;start=60" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron5089.gif?cron_type=cron.task.text_reparser.post_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5047&p=31767 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 08:43:47 GMT -->
</html>
