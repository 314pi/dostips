<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8778&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:43:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; Batch script if findstr TTL</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>Batch script if findstr TTL</h2>
		<p><a href="viewtopicde6c.html?f=3&amp;t=8778">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=8778</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Batch script if findstr TTL</h3>
				<div class="date">Posted: <strong>11 Aug 2018 06:05</strong></div>
				<div class="author">by <strong>J4ck01</strong></div>
				<div class="content">So im trying to write a little script. It should play a sound if my Phone joins my Network.<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off
:A
ping -n 1 xxx.xxx.xxx.xx | findstr TTL &amp;&amp; start airsiren.wav
goto A
</code></pre></div>

The Problem is now that if the Phone got detected. It will repeatedly start the Sound. But if done correctly it should only play the sound once and then go back to searching for that Phone. Does anyone know a simple fix? Maybe with an IF conditional?<br>
I haven't been doing much with Batch but i think i got some basic knowledge.<br>
Thanks for your help</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch script if findstr TTL</h3>
				<div class="date">Posted: <strong>12 Aug 2018 06:56</strong></div>
				<div class="author">by <strong>penpen</strong></div>
				<div class="content">It should help if you add an "goto :eof" after you have executed playing your sound to avoid the next instruction ("goto A", that results in the endless loop):
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off
:A
echo loop
ping -n 1 xxx.xxx.xxx.xx | findstr TTL &amp;&amp; (
	start airsiren.wav
	goto :eof
)
goto A
</code></pre></div>

Alternatively you could also only jump if needed:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off
:A
echo loop
ping -n 1 xxx.xxx.xxx.xx | findstr TTL &amp;&amp; start airsiren.wav || goto :A
</code></pre></div>

penpen</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8778&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:43:33 GMT -->
</html>
