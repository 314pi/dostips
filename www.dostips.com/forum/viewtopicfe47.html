<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5326&start=75&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:19:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; Create nul and all ascii characters with only batch - Page 6</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>Create nul and all ascii characters with only batch</h2>
		<p><a href="viewtopic91a1.html?f=3&amp;t=5326">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=5326</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>6</strong> of <strong>8</strong></div>
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>11 Feb 2014 07:23</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content"><blockquote><div><cite>carlos wrote:</cite>I wrote many variants today, but this is maybe the better for me:<br /><br />In the macro I copied the if else logic from dbenham:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />:gen255<br />::generates 0-255 .chr files that have 1 byte<br />::Teamwork of carlos, penpen, aGerman, dbenham<br />::Tested under Win8<br /><br />set &quot;genchr=if %%# equ 26 (&quot;<br />set &quot;genchr=%genchr% copy /y nul + nul /a 26.chr /a &gt;nul ) else (&quot;<br />set &quot;genchr=%genchr% if %%# geq 35 if %%# leq 126 if %%# neq 61 (&quot;<br />set &quot;genchr=%genchr% cmd /a /d /q /c exit /b %%# &amp;cmd /a /d /q /c set /p&quot;<br />set &quot;genchr=%genchr% &quot;=%%=exitcodeascii%%&quot; &lt;nul &gt;%%#.chr&quot;<br />set &quot;genchr=%genchr% )) &amp;if not exist %%#.chr (&quot;<br />set &quot;genchr=%genchr% type nul &gt;%%#.tmp&quot;<br />set &quot;genchr=%genchr% &amp;makecab /d compress=off&quot;<br />set &quot;genchr=%genchr% /d reserveperdatablocksize=26&quot;<br />set &quot;genchr=%genchr% /d reserveperfoldersize=%%#&quot;<br />set &quot;genchr=%genchr% %%#.tmp %%#.chr &gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;type %%#.chr&quot;<br />set &quot;genchr=%genchr% |((for /l %%_ in (1 1 38) do pause)&gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;findstr ^^^^ &gt;%%#.tmp)&quot;<br />set &quot;genchr=%genchr% &amp;copy /y %%#.tmp /a %%#.chr /b &gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;del %%#.tmp)&quot;<br /><br />for /l %%# in (0,1,255) do (<br />if exist %%#.chr del /f /q /a %%#.chr &gt;nul<br />if exist %%#.tmp del /f /q /a %%#.tmp &gt;nul<br />)<br /><br />for /l %%# in (0,1,255) do start &quot;&quot; /b /i cmd /a /d /q /c &quot;%genchr%&quot;<br /><br />:gen255chk<br />for /l %%# in (0 1 255) do for %%_ in (<br />%%#.chr) do if not &quot;1&quot;==&quot;%%~z_&quot; goto :gen255chk<br /><br />goto :eof<br /><br /></code></pre></div></div></blockquote><br /><br />Hi Carlos,<br /><br />Your version need use less resource.<br /><br />On my system (win7 32bit) this is the problem:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>...<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Memoria insufficiente per eseguire il comando.<br />Memoria insufficiente per eseguire il comando.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />...<br /></code></pre></div><br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>11 Feb 2014 10:20</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content"><blockquote><div><cite>einstein1969 wrote:</cite>Hi Carlos,<br /><br />Your version need use less resource.<br /><br />On my system (win7 32bit) this is the problem:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>...<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Memoria insufficiente per eseguire il comando.<br />Memoria insufficiente per eseguire il comando.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />Impossibile trovare il file specificato.<br />...<br /></code></pre></div><br />einstein1969</div></blockquote><br /><br />@einstein1969:  <img class="smilies" src="images/smilies/icon_surprised.gif" alt=":o" title="Surprised" />  thanks for report it. I would write a new version (i will look the dbenham method for avoid resources)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>11 Feb 2014 19:11</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content">@einstein1969, please you can test this:<br /><br />replace this:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for /l %%# in (0,1,255) do start &quot;&quot; /b /i cmd /a /d /q /c &quot;%genchr%&quot;</code></pre></div><br /><br />with:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>setlocal enabledelayedexpansion<br />set &quot;n=0&quot;<br />:launch<br />for /l %%# in (%n%,1,255) do (<br />start &quot;&quot; /b /i cmd /a /d /q /c &quot;%genchr%&quot; 2&gt;&gt;log.txt<br />if errorlevel 1 (<br />echo start errorlevel: !errorlevel!&gt;&gt;log.txt<br />set &quot;n=%%#&quot;<br />ping -l 0 -n 1 -w 500 1.0.0.0 &gt;nul<br />goto :launch<br />)<br />)<br /></code></pre></div><br /><br />I want know what errorlevel correspond to each message.<br />Please, you can post the log.txt ?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>12 Feb 2014 08:21</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">hi ,<br /><br />this is the output: (this run in infinite loop, after 3 minute i pressed ctrl-C)<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>E:\x264\provini&gt;genallchr_carlos.cmd<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />.....<br />Impossibile accedere al file. Il file è utilizzato da un altro processo.<br />^CTerminare il processo batch (S/N)? s<br /></code></pre></div><br /><br />and the log.txt: (is empty)<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>E:\x264\provini&gt;type log.txt<br /><br />E:\x264\provini&gt;<br />E:\x264\provini&gt;dir *.chr<br />&nbsp;Il volume nell'unità E è ACERDATA<br />&nbsp;Numero di serie del volume: D4BE-3448<br /><br />&nbsp;Directory di E:\x264\provini<br /><br />12/02/2014&nbsp; 15:15&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 0.chr<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 File&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 byte<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Directory&nbsp; 10.823.716.864 byte disponibili<br /><br />E:\x264\provini&gt;dir *.tmp<br />&nbsp;Il volume nell'unità E è ACERDATA<br />&nbsp;Numero di serie del volume: D4BE-3448<br /><br />&nbsp;Directory di E:\x264\provini<br /><br />File non trovato<br /></code></pre></div><br /><br />the code:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />:gen255<br />::generates 0-255 .chr files that have 1 byte<br />::Teamwork of carlos, penpen, aGerman, dbenham<br />::Tested under Win8<br /><br />set &quot;genchr=if %%# equ 26 (&quot;<br />set &quot;genchr=%genchr% copy /y nul + nul /a 26.chr /a &gt;nul ) else (&quot;<br />set &quot;genchr=%genchr% if %%# geq 35 if %%# leq 126 if %%# neq 61 (&quot;<br />set &quot;genchr=%genchr% cmd /a /d /q /c exit /b %%# &amp;cmd /a /d /q /c set /p&quot;<br />set &quot;genchr=%genchr% &quot;=%%=exitcodeascii%%&quot; &lt;nul &gt;%%#.chr&quot;<br />set &quot;genchr=%genchr% )) &amp;if not exist %%#.chr (&quot;<br />set &quot;genchr=%genchr% type nul &gt;%%#.tmp&quot;<br />set &quot;genchr=%genchr% &amp;makecab /d compress=off&quot;<br />set &quot;genchr=%genchr% /d reserveperdatablocksize=26&quot;<br />set &quot;genchr=%genchr% /d reserveperfoldersize=%%#&quot;<br />set &quot;genchr=%genchr% %%#.tmp %%#.chr &gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;type %%#.chr&quot;<br />set &quot;genchr=%genchr% |((for /l %%_ in (1 1 38) do pause)&gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;findstr ^^^^ &gt;%%#.tmp)&quot;<br />set &quot;genchr=%genchr% &amp;copy /y %%#.tmp /a %%#.chr /b &gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;del %%#.tmp)&quot;<br /><br />for /l %%# in (0,1,255) do (<br />if exist %%#.chr del /f /q /a %%#.chr &gt;nul<br />if exist %%#.tmp del /f /q /a %%#.tmp &gt;nul<br />)<br /><br />rem for /l %%# in (0,1,255) do start &quot;&quot; /b /i cmd /a /d /q /c &quot;%genchr%&quot;<br />setlocal enabledelayedexpansion<br />set &quot;n=0&quot;<br />:launch<br />for /l %%# in (%n%,1,255) do (<br />start &quot;&quot; /b /i cmd /a /d /q /c &quot;%genchr%&quot; 2&gt;&gt;log.txt<br />if errorlevel 1 (<br />echo start errorlevel: !errorlevel!&gt;&gt;log.txt<br />set &quot;n=%%#&quot;<br />ping -l 0 -n 1 -w 500 1.0.0.0 &gt;nul<br />goto :launch<br />)<br />)<br /><br /><br />:gen255chk<br />for /l %%# in (0 1 255) do for %%_ in (<br />%%#.chr) do if not &quot;1&quot;==&quot;%%~z_&quot; goto :gen255chk<br /><br />goto :eof<br /></code></pre></div><br /><br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>12 Feb 2014 16:40</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content">@einstein1969. Thanks for the test. please you can test again but removing this:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>2&gt;&gt;log.txt<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>12 Feb 2014 19:33</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">Hi, seem that there is no errorlevel...<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>....<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Impossibile eseguire il programma specificato.<br />Il processo ha tentato di scrivere in una pipe non esistente.<br />Il processo ha tentato di scrivere in una pipe non esistente.<br />Impossibile trovare il file specificato.<br />^CTerminare il processo batch (S/N)? s<br /><br />E:\x264\provini&gt;type log.txt<br /><br />E:\x264\provini&gt;</code></pre></div><br /><br />the code:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />:gen255<br />::generates 0-255 .chr files that have 1 byte<br />::Teamwork of carlos, penpen, aGerman, dbenham<br />::Tested under Win8<br /><br />set &quot;genchr=if %%# equ 26 (&quot;<br />set &quot;genchr=%genchr% copy /y nul + nul /a 26.chr /a &gt;nul ) else (&quot;<br />set &quot;genchr=%genchr% if %%# geq 35 if %%# leq 126 if %%# neq 61 (&quot;<br />set &quot;genchr=%genchr% cmd /a /d /q /c exit /b %%# &amp;cmd /a /d /q /c set /p&quot;<br />set &quot;genchr=%genchr% &quot;=%%=exitcodeascii%%&quot; &lt;nul &gt;%%#.chr&quot;<br />set &quot;genchr=%genchr% )) &amp;if not exist %%#.chr (&quot;<br />set &quot;genchr=%genchr% type nul &gt;%%#.tmp&quot;<br />set &quot;genchr=%genchr% &amp;makecab /d compress=off&quot;<br />set &quot;genchr=%genchr% /d reserveperdatablocksize=26&quot;<br />set &quot;genchr=%genchr% /d reserveperfoldersize=%%#&quot;<br />set &quot;genchr=%genchr% %%#.tmp %%#.chr &gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;type %%#.chr&quot;<br />set &quot;genchr=%genchr% |((for /l %%_ in (1 1 38) do pause)&gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;findstr ^^^^ &gt;%%#.tmp)&quot;<br />set &quot;genchr=%genchr% &amp;copy /y %%#.tmp /a %%#.chr /b &gt;nul&quot;<br />set &quot;genchr=%genchr% &amp;del %%#.tmp)&quot;<br /><br />for /l %%# in (0,1,255) do (<br />if exist %%#.chr del /f /q /a %%#.chr &gt;nul<br />if exist %%#.tmp del /f /q /a %%#.tmp &gt;nul<br />)<br /><br />setlocal enabledelayedexpansion<br />set &quot;n=0&quot;<br />:launch<br />for /l %%# in (%n%,1,255) do (<br />start &quot;&quot; /b /i cmd /a /d /q /c &quot;%genchr%&quot;<br />if errorlevel 1 (<br />echo start errorlevel: !errorlevel!&gt;&gt;log.txt<br />set &quot;n=%%#&quot;<br />ping -l 0 -n 1 -w 500 1.0.0.0 &gt;nul<br />goto :launch<br />)<br />)<br /><br /><br />:gen255chk<br />for /l %%# in (0 1 255) do for %%_ in (<br />%%#.chr) do if not &quot;1&quot;==&quot;%%~z_&quot; goto :gen255chk<br /><br />goto :eof</code></pre></div><br /><br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>13 Feb 2014 08:16</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content">@einstein1969, thanks for the information. I write a version that use less resources. I tested it successfully on Windows xp with 64 mb. Also I added your idea using a character map.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />:gen255<br />::generates 0-255 .chr files that have 1 byte<br />::Teamwork of carlos, penpen, aGerman, dbenham, einstein1969<br />::Tested under Win8, WinXP(64mb)<br /><br />setlocal disabledelayedexpansion<br /><br />set &quot;map=paddingpaddingpaddingpaddingpadding&quot;<br />set &quot;map=%map%#$%%&amp;'()*+,-./0123456789:;&lt;p&gt;?@&quot;<br />set &quot;map=%map%ABCDEFGHIJKLMNOPQRSTUVWXYZ&#91;\&#93;^_`&quot;<br />set &quot;map=%map%abcdefghijklmnopqrstuvwxyz{|}~&quot;<br /><br />set &quot;genchr=(type nul &gt;%%#.tmp&quot;<br />set &quot;genchr=%genchr% &amp; makecab /d compress=off&quot;<br />set &quot;genchr=%genchr% /d reserveperfoldersize=%%#&quot;<br />set &quot;genchr=%genchr% /d reserveperdatablocksize=26&quot;<br />set &quot;genchr=%genchr% %%#.tmp %%#.chr 1&gt;nul&quot;<br />set &quot;genchr=%genchr% &amp; type %%#.chr&quot;<br />set &quot;genchr=%genchr% |((for /l %%_ in (1 1 38) do pause) 1&gt;nul&quot;<br />set &quot;genchr=%genchr% &amp; findstr ^^^^ 1&gt;%%#.tmp)&quot;<br />set &quot;genchr=%genchr% &amp; copy /y %%#.tmp /a %%#.chr /b 1&gt;nul&quot;<br />set &quot;genchr=%genchr% &amp; del %%#.tmp)&quot;<br /><br />if exist *.chr del /a /f /q *.chr<br /><br />start /i /wait /b cmd /a /q /d /c &quot;for /l %%# in (127 1 169) do %genchr%&quot;<br />start /i /wait /b cmd /a /q /d /c &quot;for /l %%# in (170 1 211) do %genchr%&quot;<br />start /i /wait /b cmd /a /q /d /c &quot;for /l %%# in (212 1 255) do %genchr%&quot;<br /><br />for /l %%# in (0 1 34) do %genchr%<br />cmd /a /v:on /q /d /c &quot;for /l %%# in (35 1 126) do set /p &quot;=!map:~%%#,1!&quot; 0&lt;nul 1&gt;%%#.chr&quot;<br /><br />:gen255wait<br />ping -l 0 -n 1 -w 100 1.0.0.0 &gt;nul<br />for %%# in (169.chr 211.chr 255.chr) do (<br />if not exist %%# goto :gen255wait<br />if not &quot;1&quot;==&quot;%%~z#&quot; goto :gen255wait<br />)<br /><br />for %%# in (61) do %genchr%<br />copy /y nul + nul /a 26.chr /a 1&gt;nul<br /><br />goto :eof<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>13 Feb 2014 09:42</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content">@Carlos - I don't understand why you opted for a fixed number of processes. It really should be tied to the number of available processors (cores). And having each process work on a contiguous range of characters yields uneven distribution of work because of drastic differences between MAKECAB and SET/P. Also, once the work is equally distributed, there is no need for a PING wait while polling for completion because the poll will be so short lived. The poll will not be entered until at least one process has completed, and all processes will finish at nearly the same time because they are doing nearly equal work.<br /><br />I think my last posted code is a better option. Here is a variation of my last code that uses the character map. In my hands it is only 7% to 10% faster than my version without the character map.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br /><br />:genAllChr<br />::This code creates 256 1 byte files, one for each possible byte value.<br />::This is encoded in a macro way to be called asynchronously with start cmd /c<br />::Teamwork of carlos, penpen, aGerman, dbenham, einstein1969<br />::Tested under Win7 and XP<br />set ^&quot;genchr=(^<br />for /l %%N in (%%A !cnt! 255) do (^<br />&nbsp; if %%N equ 26 (^<br />&nbsp; &nbsp; copy /y nul + nul /a 26.chr /a ^&gt;nul^<br />&nbsp; ) else (if %%N geq 35 if %%N leq 126 if %%N neq 61 (^<br />&nbsp; &nbsp; ^&lt;nul set /p &quot;=!ascii:~%%N,1!&quot; ^&gt;%%N.chr^<br />&nbsp; ))^&amp;^<br />&nbsp; if not exist %%N.chr (^<br />&nbsp; &nbsp; makecab /d compress=off /d reserveperdatablocksize=26 /d reserveperfoldersize=%%N %%A.tmp %%N.chr ^&gt;nul^&amp;^<br />&nbsp; &nbsp; type %%N.chr ^| ((for /l %%n in (1 1 38) do pause)^&gt;nul^&amp;findstr &quot;^^&quot; ^&gt;%%N.temp)^&amp;^<br />&nbsp; &nbsp; ^&gt;nul copy /y %%N.temp /a %%N.chr /b^&amp;^<br />&nbsp; &nbsp; del %%N.temp^<br />&nbsp; )^<br />))^&amp;^<br />del %%A.tmp^&quot;<br />del /f /q /a *.chr &gt;nul 2&gt;&amp;1<br />set &quot;ascii=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#$%%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ&#91;\&#93;^_`abcdefghijklmnopqrstuvwxyz{|}~&quot;<br />set /a cnt=number_of_processors<br />if %cnt% lss 1 set cnt=1<br />if %cnt% gtr 256 set cnt=256<br />set /a &quot;end=cnt-1&quot;<br />for /l %%A in (0 1 %end%) do (<br />&nbsp; type nul &gt;%%A.tmp<br />&nbsp; if %%A equ %end% (<br />&nbsp; &nbsp; cmd /q /v:on /c &quot;%genchr%&quot;<br />&nbsp; ) else (<br />&nbsp; &nbsp; start &quot;&quot; /b cmd /q /v:on /c &quot;%genchr%&quot;<br />&nbsp; )<br />)<br />:genAllChr.check<br />for /l %%N in (0 1 %end%) do if exist %%N.tmp goto :genAllChr.check<br />exit /b<br /></code></pre></div><br />I chose to set the number of processes to match the number of available processors. You can squeeze out perhaps a wee bit more performance by deploying one or two processes more than available processors. Any more and you are wasting resources without increasing throughput.<br /><br /><br />Dave Benham</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>13 Feb 2014 12:37</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content"><blockquote><div><cite>dbenham wrote:</cite>@Carlos - I don't understand why you opted for a fixed number of processes. It really should be tied to the number of available processors (cores).</div></blockquote><br /><br />@dbenham: In my last code I choose a fixed number of process, in this case only 4 process (including the main process), because in my tests there are not performance difference impact in milliseconds between use 4 process, 8 or 256 process. Also, if you have only 1 processor, in your code you will use 1 process, that will be more slow tan use 4 process. I choose use 4 process because works fine for a 1 processor, 4 processor (in my machine I have 4 processors) and the code takes round 4 seconds. That for me is faster and I not need gain 2 or 3 seconds launching more process. Using this fixed number of process the code will runs equals in all machines, and also will be speedy in machines with only 1 processor. Also, keeping fixed the number of process allow check for the last file created of the synchronus block (launched in async way), in my code 169.chr 211.chr 255.chr. the ping is added for reduce the cpu usage. I programming it in that way, because the focus was use less resources. Also, your code is a great work.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>13 Feb 2014 14:31</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content">the same code reencoded for use less line width:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />:gen255<br />::generates 0-255 .chr files that have 1 byte<br />::Teamwork of carlos, penpen, aGerman, dbenham, einstein1969<br />::Tested under Win8, WinXP(64mb)<br /><br />setlocal disabledelayedexpansion<br /><br />set &quot;map=paddingpaddingpaddingpaddingpadding&quot;<br />set &quot;map=%map%#$%%&amp;'()*+,-./0123456789:;&lt;p&gt;?@&quot;<br />set &quot;map=%map%ABCDEFGHIJKLMNOPQRSTUVWXYZ&#91;\&#93;^_`&quot;<br />set &quot;map=%map%abcdefghijklmnopqrstuvwxyz{|}~&quot;<br /><br />set &quot;gchr=(type nul &gt;%%#.tmp&quot;<br />set &quot;gchr=%gchr% &amp; makecab /d compress=off&quot;<br />set &quot;gchr=%gchr% /d reserveperfoldersize=%%#&quot;<br />set &quot;gchr=%gchr% /d reserveperdatablocksize=26&quot;<br />set &quot;gchr=%gchr% %%#.tmp %%#.chr 1&gt;nul&quot;<br />set &quot;gchr=%gchr% &amp; type %%#.chr&quot;<br />set &quot;gchr=%gchr% |((for /l %%_ in (1 1 38) do pause) 1&gt;nul&quot;<br />set &quot;gchr=%gchr% &amp; findstr ^^^^ 1&gt;%%#.tmp)&quot;<br />set &quot;gchr=%gchr% &amp; copy /y %%#.tmp /a %%#.chr /b 1&gt;nul&quot;<br />set &quot;gchr=%gchr% &amp; del %%#.tmp)&quot;<br />set &quot;genmap=for /l %%# in (35 1 126) do&quot;<br />set &quot;genmap=%genmap% set /p &quot;=!map:~%%#,1!&quot; 0&lt;nul 1&gt;%%#.chr&quot;<br /><br />if exist *.chr del /a /f /q *.chr<br /><br />start /i /w /b cmd /a /q /d /c &quot;for /l %%# in (127 1 169) do %gchr%&quot;<br />start /i /w /b cmd /a /q /d /c &quot;for /l %%# in (170 1 211) do %gchr%&quot;<br />start /i /w /b cmd /a /q /d /c &quot;for /l %%# in (212 1 255) do %gchr%&quot;<br /><br />for /l %%# in (0 1 34) do %gchr%<br />cmd /a /v:on /q /d /c &quot;%genmap%&quot;<br /><br />:gen255w<br />ping -l 0 -n 1 -w 100 1.0.0.0 &gt;nul<br />for %%# in (169.chr 211.chr 255.chr) do (<br />if not exist %%# goto :gen255w<br />if not &quot;1&quot;==&quot;%%~z#&quot; goto :gen255w<br />)<br /><br />for %%# in (61) do %gchr%<br />copy /y nul + nul /a 26.chr /a 1&gt;nul<br /><br />goto :eof<br /><br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>13 Feb 2014 19:10</strong></div>
				<div class="author">by <strong>foxidrive</strong></div>
				<div class="content"><blockquote><div><cite>carlos wrote:</cite>machines with only 1 processor.</div></blockquote><br /><br />It would seem that even dual core CPUs have been around for 14 years.<br /><br /><!-- m --><a class="postlink" href="http://en.wikipedia.org/wiki/Multi-core_processor">http://en.wikipedia.org/wiki/Multi-core_processor</a><!-- m --></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>14 Feb 2014 04:30</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content"><blockquote><div><cite>foxidrive wrote:</cite><blockquote><div><cite>carlos wrote:</cite>machines with only 1 processor.</div></blockquote><br /><br />It would seem that even dual core CPUs have been around for 14 years.<br /><br /><!-- m --><a class="postlink" href="http://en.wikipedia.org/wiki/Multi-core_processor">http://en.wikipedia.org/wiki/Multi-core_processor</a><!-- m --></div></blockquote><br /><br />foxidrive: I'm referring to NUMBER_OF_PROCESSORS variable.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>14 Feb 2014 04:42</strong></div>
				<div class="author">by <strong>carlos</strong></div>
				<div class="content">I did minor changes to the code:<br /><br />-enable extensions<br />-uses new_thread variable<br />-uses ???.chr instead of *.chr<br />-remove spaces from map variable, actually this variable not have any space, but i remember that some old forums add a space before the @ character. this is a preventive fix.<br /><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />:gen255<br />::generates 0-255 .chr files that have 1 byte<br />::Teamwork of carlos, penpen, aGerman, dbenham, einstein1969<br />::Tested under Win8, WinXP(64mb)<br />setlocal enableextensions disabledelayedexpansion<br />set &quot;map=paddingpaddingpaddingpaddingpadding&quot;<br />set &quot;map=%map%#$%%&amp;'()*+,-./0123456789:;&lt;p&gt;?@&quot;<br />set &quot;map=%map%ABCDEFGHIJKLMNOPQRSTUVWXYZ&#91;\&#93;^_`&quot;<br />set &quot;map=%map%abcdefghijklmnopqrstuvwxyz{|}~&quot;<br />set &quot;map=%map: =%&quot;<br />set &quot;gchr=(type nul &gt;%%#.tmp&quot;<br />set &quot;gchr=%gchr% &amp; makecab /d compress=off&quot;<br />set &quot;gchr=%gchr% /d reserveperfoldersize=%%#&quot;<br />set &quot;gchr=%gchr% /d reserveperdatablocksize=26&quot;<br />set &quot;gchr=%gchr% %%#.tmp %%#.chr 1&gt;nul&quot;<br />set &quot;gchr=%gchr% &amp; type %%#.chr&quot;<br />set &quot;gchr=%gchr% |((for /l %%_ in (1 1 38) do pause) 1&gt;nul&quot;<br />set &quot;gchr=%gchr% &amp; findstr ^^^^ 1&gt;%%#.tmp)&quot;<br />set &quot;gchr=%gchr% &amp; copy /y %%#.tmp /a %%#.chr /b 1&gt;nul&quot;<br />set &quot;gchr=%gchr% &amp; del %%#.tmp)&quot;<br />set &quot;gmap=for /l %%# in (35 1 126) do&quot;<br />set &quot;gmap=%gmap% set /p &quot;=!map:~%%#,1!&quot; 0&lt;nul 1&gt;%%#.chr&quot;<br />set &quot;new_thread=start /i /w /b cmd /a /q /d /c&quot;<br />if exist ???.chr del /a /f /q ???.chr<br />%new_thread% &quot;for /l %%# in (127 1 169) do %gchr%&quot;<br />%new_thread% &quot;for /l %%# in (170 1 211) do %gchr%&quot;<br />%new_thread% &quot;for /l %%# in (212 1 255) do %gchr%&quot;<br />for /l %%# in (0 1 34) do %gchr%<br />cmd /a /v:on /q /d /c &quot;%gmap%&quot;<br />:gen255w<br />ping -l 0 -n 1 -w 100 1.0.0.0 &gt;nul<br />for %%# in (169.chr 211.chr 255.chr) do (<br />if not exist %%# goto :gen255w<br />if not &quot;1&quot;==&quot;%%~z#&quot; goto :gen255w)<br />for %%# in (61) do %gchr%<br />copy /y nul + nul /a 26.chr /a 1&gt;nul<br />goto :eof<br /><br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>14 Feb 2014 06:34</strong></div>
				<div class="author">by <strong>foxidrive</strong></div>
				<div class="content"><blockquote><div><cite>carlos wrote:</cite><blockquote><div><cite>foxidrive wrote:</cite><blockquote><div><cite>carlos wrote:</cite>machines with only 1 processor.</div></blockquote><br /><br />It would seem that even dual core CPUs have been around for 14 years.<br /><br /><!-- m --><a class="postlink" href="http://en.wikipedia.org/wiki/Multi-core_processor">http://en.wikipedia.org/wiki/Multi-core_processor</a><!-- m --></div></blockquote><br /><br />foxidrive: I'm referring to NUMBER_OF_PROCESSORS variable.</div></blockquote><br /><br />I don't understand.  A dual core will return 2 right?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Create nul and all ascii characters with only batch</h3>
				<div class="date">Posted: <strong>14 Feb 2014 07:19</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content"><blockquote><div><cite>foxidrive wrote:</cite>I don't understand.  A dual core will return 2 right?</div></blockquote><br />Yes - %NUMBER-OF-PROCESSORS% returns 4 for my machine that has a single quad core CPU<br /><br /><br />Dave Benham</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>6</strong> of <strong>8</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5326&start=75&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:19:21 GMT -->
</html>
