<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=2261&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:04:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; [How to] dec to hex and hex to dec conversion bat</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>[How to] dec to hex and hex to dec conversion bat</h2>
		<p><a href="viewtopicd023.html?f=3&amp;t=2261">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=2261</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>[How to] dec to hex and hex to dec conversion bat</h3>
				<div class="date">Posted: <strong>25 Sep 2011 18:34</strong></div>
				<div class="author">by <strong>Voodooman</strong></div>
				<div class="content">I spent entire day searching the way how to convert dec value to hex and back, unfortunately there is no documented way to do it, but there are 2 tricks, which i want to share to help other people avoid googling all day long without success (well success was partial, there was a big messy code which i refused to use):<br /><br />Dec to hex<br /><br />the trick is exit code variable, which i found by brute force %=exitcode% in mix with exit command, this is how it works<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>call cmd /c exit /b %dec%<br />set hex=%=exitcode%<br /></code></pre></div><br />Note - %dec%=%errorlevel% in this case!<br />This is it - somehow, when you use dec value to set errorlevel, this %=exitcode% variable mirrors errolevel value in hex. <br />You may use substrings like this  %=exitcode:~-4,-2% (uses 4 last symbols except last 2).<br />call cmd /c used to prevent quiting your current script (try to use just exit and see for yourself).<br />I also tried to call for blank function like this:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>call dectohex %dec%<br />set hex=%=exitcode%<br />exit<br />:dectohex<br />exit /b %1</code></pre></div><br />but for some reason exitcode appears unset when time comes to set hex value.<br /><br />Hex to Dec<br /><br />This trick is simpler and works with set /a like this<br /><br /><blockquote class="uncited"><div>set /a dec=0x%hex%</div></blockquote><br />whole magic is in 0x (zero x) prefix, set /a consider everything behind 0x as hex value.<br />0x5=0x05=0x0005...0x00000005 so you should not really care about leading zeroes. but you can strip them.<br /><br />I personally using these tricks to convert dec variable in hex and then search and replace them in binary with help of this hex editing tool XVI32 <!-- m --><a class="postlink" href="http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm">http://www.chmaas.handshake.de/delphi/f ... /xvi32.htm</a><!-- m --> <br />and this simple script for it, which could be executed from bat with arguments as sets of hex or dec values:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>REPLACE %1 BY %2<br />EXIT</code></pre></div><br /><br />You may also find useful this trick i use to change hex byte order, since most of binary data in Windows written in reversed byte order :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>call cmd /c exit /b %dec%<br />set hex=%=exitcode%<br />SET hexa=!hex:~-2!<br />SET hexb=!hex:~-4,-2!<br />SET hexc=!hex:~-6,-4!<br />set&nbsp; hexd=!hex:~-8,-6!<br />set xeh=!hexa!!hexb!hexc!!hexd!</code></pre></div><br /><br />1A 2B 3C 4D &gt;&gt; 4D 3C 2B 1A</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [How to] dec to hex and hex to dec conversion bat</h3>
				<div class="date">Posted: <strong>26 Sep 2011 00:02</strong></div>
				<div class="author">by <strong>DosItHelp</strong></div>
				<div class="content">Voodooman,<br />Nice trick using %=exitcode% variable.<br /><br />Wanted to mention that dostips also lists two functions for converting hex to dec and dec to hex:<br /><!-- m --><a class="postlink" href="../DtTipsArithmetic.html#Function.toDec">http://www.dostips.com/DtTipsArithmetic ... tion.toDec</a><!-- m --><br /><!-- m --><a class="postlink" href="../DtTipsArithmetic.html#Function.toHex">http://www.dostips.com/DtTipsArithmetic ... tion.toHex</a><!-- m --><br /> <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [How to] dec to hex and hex to dec conversion bat</h3>
				<div class="date">Posted: <strong>26 Sep 2011 06:58</strong></div>
				<div class="author">by <strong>Voodooman</strong></div>
				<div class="content">Yeah that exactly that big function i refused to use, despite big size of code, also it have mistake.<br /><br />This is fixed, cleaned version<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:tohex<br />cls<br />set /a dec=%~1<br />set &quot;hex=&quot;<br />set &quot;map=0123456789ABCDEF&quot;<br />for /L %%N in (1,1,8) do (<br />&nbsp; &nbsp;set /a &quot;d=dec&amp;15,dec&gt;&gt;=4&quot;<br />&nbsp; &nbsp;for /f %%D in (&quot;!d!&quot;) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;hex=!map:~%%D,1!!hex!&quot;<br />&nbsp; &nbsp;)<br />)<br />rem for /f &quot;tokens=* delims=0&quot; %%A in (&quot;!hex!&quot;) do (<br />rem&nbsp; &nbsp;set &quot;hex=%%A&quot;<br />rem&nbsp; &nbsp;if not defined hex (set &quot;hex=0&quot;)<br />rem )<br />if &quot;%~2&quot; neq &quot;&quot; (set %~2=!hex!) else (echo.!hex!)<br />exit /b 0</code></pre></div><br />!id! in original missed quotation symbols &quot;&quot; and was considered as filename to read strings of instead of string itself, also i removed unnecessary &amp; and endlocal plus replaced all variables % by !, but this function is slower and not so compact anyway)<br /><br />Btw, i still dont know the how to convert ASCII characters to hex in bat, any tips?<br /><br />I suppose i can try to use function above and make second map of characters in order as they appear in ASCII table, but how can map specified symbol as hex?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [How to] dec to hex and hex to dec conversion bat</h3>
				<div class="date">Posted: <strong>26 Sep 2011 10:40</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content"><blockquote><div><cite>Voodooman wrote:</cite>Yeah that exactly that big function i refused to use, despite big size of code, also it have mistake.<br />...<br />!id! in original missed quotation symbols &quot;&quot; and was considered as filename to read strings of instead of string itself<br /></div></blockquote>The DosTips function works perfectly as originally written. It uses a simple FOR loop, not a FOR /F. As long as !d! never contains wildcard characters * or ? it will always return the original value. Since !d! should be a decimal number, there should never be any wildcards.<br /><br /><blockquote><div><cite>Voodooman wrote:</cite>also i removed unnecessary &amp; and endlocal plus replaced all variables % by !<br /></div></blockquote>And you succeeded in breaking some of the carefully constructed functionality. The function is designed to keep all the temporary variable assignments local to the function where they are invisible to the calling script. The details you thought were unnecessary are used to return a value accross the ENDLOCAL barrier. Read this <a href="../DtTutoFunctions.html" class="postlink">DosTips Function Tutorial</a> for an excellent explanation of the technique.<br /><br /><blockquote><div><cite>Voodooman wrote:</cite>but this function is slower and not so compact anyway)<br /></div></blockquote>You should do some testing before making such a statement. The %=exitcode% technique is much simpler, but it is not faster. Timings are highly machine dependent, but on every machine I have tested, the function is much faster than the %=exitcode% method. In most situations it doesn't matter, but if you are performing many computations in a loop it could become significant. There is as an even faster macro adaptation of the function on my macro thread: <span style="color: #0000FF">dostips.com/forum/viewtopic.php?f=3&amp;t=1827</span>  (I still wish we could post more than 2 links in one message)<br /><br /><blockquote><div><cite>Voodooman wrote:</cite>Btw, i still dont know the how to convert ASCII characters to hex in bat, any tips?<br /></div></blockquote>There is not a simple method to convert ASCII character to hex, but there is a simple method to go in reverse. <br /><br />This supports non-control ASCII characters only (extended characters above decimal 127 and control characters are not supported)<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set hex=41<br />set /a num=0x%hex%<br />call cmd /c exit /b %num%<br />set char=%=exitCodeASCII%<br />echo %char%<br /></code></pre></div>The returned value will be the capital A as expected.<br /><br />I have written pure batch functions (with much help from jeb) to go in either direction that support all decimal codes from 1-255. But given that you don't like the num2hex function because of its size, you probably will like my character conversion functions even less. You can trace the development here: <a href="viewtopicf6d0-2.html?f=3&amp;t=1733" class="postlink">New functions: :chr, :asc, :asciiMap</a> This is a 3 page thread - on the last page is a link to a Google Sites page with the final code. The code contains control characters like &lt;tab&gt; that do not upload well on this site.<br /><br />Dave Benham</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [How to] dec to hex and hex to dec conversion bat</h3>
				<div class="date">Posted: <strong>26 Sep 2011 12:18</strong></div>
				<div class="author">by <strong>Voodooman</strong></div>
				<div class="content">i know about %=exitCodeASCII% but its not the point of my interest, as i need opposite effect  <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br />Actually your script is exactly what i was thinking about (and just mentioned in some thread nearby without awareness that someone already did this script), but again it seems 2 slow and heavy -<br /><br />255 for cycles with 255 more for cycles??? How many of them do we have in total, 65025??? I suppose coding some little hex\dec\ascii command line converter in C# or asm would be simpler and more effective and faster. Actually i googled for command line tool like this, but i only found hex2dec by Mark Russinovich, so i have no other choice but to do it in pure bat.<br />But i prefer external tools, its not a problem to redistribute such tools with bat script or hide it inside any exe container like bat2exe, but im not sure if tools like this exist.<br />Have your tried to code such tool instead of messing with mapping and 255*255 cycles?<br /><br />As for !id! im not sure what Os you do use, but for me in Windows 7 !id! always returned &quot;file not found&quot; even without /f, by default &quot;for&quot; uses (something) as filename, not as string itself, and its clearly stated in for /? help, i think you messed something or have non default setting in registry or some older Os.<br />Im quite certain that  &quot;!id!&quot; fixed &quot;file not found&quot; problem of original script.<br /><br />As for removal of &amp; and endlocal, im aware of what exactly they did, but i consider this &quot;hiding&quot; of variables from calling script unnecessary, actually i consider quite necessary to have access to any variable anytime from any part of script, so this is just the matter of taste and task, thats why i prefer to not use endlocal at all.<br /><br />Also i think &quot;&amp;&quot; is quite unnecessary too, it have nothing to do with local variables, all it can do is chaining 2 commands in one line, but command1 &amp; command 2 is 100% the same as<br />command 1<br />command 2<br />but second looks more readable and eye friendly)<br /><br /><br />And how come that reading about 10 lines of text and performing 16 &quot;for&quot; loops with math equation could be faster than twoliner exit /b %dec% &amp; %=exitcode% ?<br />What kind of speed testings you did to get such an unexpected results?<br /><br />... wow this marco thread is crazy, i just tried thing like that recently, and come to conclusion that it complicates things to much.<br />escaping special characters needs to be done careful, any minor miscalculation with one more or less ^ symbol and whole macros is screwed, also syntax like this is quite unreadable and with lack of detailed instructions and explanations many people would not even get the idea how it works, also debuging such type of syntax also extra pain in arse and consuming more time, so i dont think its practical enough, it looks more like a challenge... unfortunately i have too little time to mess with challenges like this, and im more interested getting effective result faster.<br /><br />Do you know about &quot;lex parsimoniae&quot; principle aka &quot;law of parsimony&quot; or &quot;occam's razor&quot;?<br /><br />&quot;The simplest solution is usually the best&quot; - thats what lex parsimoniae means, and thats the principle i tend to follow and suggest anyone to follow it too.<br /><br />Using as little for cycles and if else statements and variables as possible is the best solution.<br /><br />Also i have my personal principle which dont have name but means this - light-weight, well structured, standardized and eye-friendly code is programmer's best friend that helps to debug and develop things faster and more efficient  <img class="smilies" src="images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /><br />Anyway, back to original topic - is there any simple dec\hex\bin command line convertor exist, or anyone here willing to code one, please?))</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [How to] dec to hex and hex to dec conversion bat</h3>
				<div class="date">Posted: <strong>26 Sep 2011 17:37</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content"><blockquote><div><cite>voodooman wrote:</cite>As for !id! im not sure what Os you do use, but for me in Windows 7 !id! always returned &quot;file not found&quot; even without /f, by default &quot;for&quot; uses (something) as filename, not as string itself, and its clearly stated in for /? help, i think you messed something or have non default setting in registry or some older Os.<br />Im quite certain that &quot;!id!&quot; fixed &quot;file not found&quot; problem of original script.<br /></div></blockquote>I'm not convinced, I suspect you have fooled yourself. I know the code works on XP and Vista, and I suspect it works on Windows 7. I don't have access to Windows 7 yet so I can't test. But I find it hard to believe that a) such a fundamental change has been made to the FOR command and b) no one has reported the change on this forum before.<br /><br />If what you are saying is true, then this statement should give an error if executed from the command line:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for %s in (DoesNotExist) do @echo %s<br /></code></pre></div>On my machines the above simply echoes DoesNotExist. I believe this should work on Windows 7 as well.<br /><br />Assuming FOR behavior has not changed since Vista, this statement should give no output and no error:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for %s in (DoesNotExist*) do @echo %s<br /></code></pre></div><br />Again assuming no change, this statement should generate the error you describe:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for /f %s in (DoesNotExist) do @echo %s<br /></code></pre></div><br />There is nothing wrong with using FOR /F with quotes, but I still belive the current published function is valid.<br /><br /><br /><blockquote><div><cite>voodooman wrote:</cite>And how come that reading about 10 lines of text and performing 16 &quot;for&quot; loops with math equation could be faster than twoliner exit /b %dec% &amp; %=exitcode% ?<br />What kind of speed testings you did to get such an unexpected results?<br /></div></blockquote>Exitcode is certainly much simpler for the developer, but not for the computer at execution time. There is a lot of initialization that takes place when a new copy of CMD is instantiated.<br /><br />You shouldn't need quantitative testing to see the difference - simply run each method 100 times in a FOR /L loop that echoes the result and you will see an obvious difference in the rate at which the numbers flow down the screen.<br /><br />But I do have quantitative timing macros that I use. Normally I would place the following calls at the top of my batch file to conditionally load the necessary macro libraries in case they haven't already been loaded:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>if not defined macro\load.macroLib_Time call macroLib_Time<br />if not defined macro\load.macroLib_Num call macroLib_Num<br /></code></pre></div><br />But here is a self-contained script that times how long it takes to run each method n times. The script takes one argument that specifies the number of times to test each method. Each method will produce an xxxxx.out file in case you want to compare the outputs. (They are all identical)<br /><br />Note - you don't need to CALL CMD.EXE - you can simply execute CMD directly within your script. The CALL statement is surprisingly relatively slow.<br /><br />test.bat<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />::=========================================================================<br />::BEGIN DEFINITION OF MACROS<br />::<br />setlocal disableDelayedExpansion<br />set LF=^<br /><br /><br />::Above 2 blank lines are required - do not remove<br />set ^&quot;\n=^^^%LF%%LF%^%LF%%LF%^^&quot;<br />set &quot;echo=echo(&quot;<br />set macro_Call=for /f &quot;tokens=1-26&quot; %%a in<br /><br />set macro.GetTime=do (%\n%<br />&nbsp; setlocal enableDelayedExpansion%\n%<br />&nbsp; set &quot;t=0&quot;%\n%<br />&nbsp; for /f &quot;tokens=1-4 delims=:.&quot; %%A in (&quot;!time: =0!&quot;) do set /a &quot;t=(((1%%A*60)+1%%B)*60+1%%C)*100+1%%D-36610100&quot;%\n%<br />&nbsp; for %%v in (!t!) do endlocal^&amp;if &quot;%%~a&quot; neq &quot;&quot; (set &quot;%%~a=%%v&quot;) else %echo%%%v%\n%<br />)<br /><br />set macro.DiffTime=do (%\n%<br />&nbsp; setlocal enableDelayedExpansion%\n%<br />&nbsp; set /a &quot;DD=(%%~b)-(%%~a)&quot;%\n%<br />&nbsp; if !DD! lss 0 set /a &quot;DD+=24*60*60*100&quot;%\n%<br />&nbsp; set /a &quot;HH=DD/360000, DD-=HH*360000, MM=DD/6000, DD-=MM*6000, SS=DD/100, DD-=SS*100&quot;%\n%<br />&nbsp; if &quot;!HH:~1!&quot;==&quot;&quot; set &quot;HH=0!HH!&quot;%\n%<br />&nbsp; if &quot;!MM:~1!&quot;==&quot;&quot; set &quot;MM=0!MM!&quot;%\n%<br />&nbsp; if &quot;!SS:~1!&quot;==&quot;&quot; set &quot;SS=0!SS!&quot;%\n%<br />&nbsp; if &quot;!DD:~1!&quot;==&quot;&quot; set &quot;DD=0!DD!&quot;%\n%<br />&nbsp; for %%v in (!HH!:!MM!:!SS!.!DD!) do endlocal^&amp;if &quot;%%~c&quot; neq &quot;&quot; (set &quot;%%~c=%%v&quot;) else %echo%%%v%\n%<br />)<br /><br />set macro.Num2Hex=do (%\n%<br />&nbsp; setlocal enableDelayedExpansion%\n%<br />&nbsp; set /a &quot;dec=(%%~a)&quot;%\n%<br />&nbsp; if defined hex set &quot;hex=&quot;%\n%<br />&nbsp; set &quot;map=0123456789ABCDEF&quot;%\n%<br />&nbsp; for /l %%n in (1,1,8) do (%\n%<br />&nbsp; &nbsp; set /a &quot;d=dec&amp;15,dec&gt;&gt;=4&quot;%\n%<br />&nbsp; &nbsp; for %%d in (!d!) do set &quot;hex=!map:~%%d,1!!hex!&quot;%\n%<br />&nbsp; )%\n%<br />&nbsp; for %%v in (!hex!) do endlocal^&amp;if &quot;%%~b&quot; neq &quot;&quot; (set &quot;%%~b=%%v&quot;) else %echo%%%v%\n%<br />)<br />::<br />::END DEFINITION OF MACROS<br />::==========================================================================<br /><br />setlocal enableDelayedExpansion<br />%echo%<br />%echo%Measuring how long it takes to execute each method %~1 times<br />%echo%<br /><br />%macro_call% (&quot;t1&quot;) %macro.GetTime%<br />(<br />&nbsp; for /l %%n in (1 1 %1) do (<br />&nbsp; &nbsp; call cmd /c exit /b %%n<br />&nbsp; &nbsp; echo !=exitcode!<br />&nbsp; )<br />)&gt;callExitcode.out<br />%macro_call% (&quot;t2&quot;) %macro.GetTime%<br />%macro_Call% (&quot;t1 t2 time_callExitcode&quot;) %macro.DiffTime%<br /><br />%macro_call% (&quot;t1&quot;) %macro.GetTime%<br />(<br />&nbsp; for /l %%n in (1 1 %1) do (<br />&nbsp; &nbsp; cmd /c exit /b %%n<br />&nbsp; &nbsp; echo !=exitcode!<br />&nbsp; )<br />)&gt;exitcode.out<br />%macro_call% (&quot;t2&quot;) %macro.GetTime%<br />%macro_Call% (&quot;t1 t2 time_exitcode____&quot;) %macro.DiffTime%<br /><br />%macro_call% (&quot;t1&quot;) %macro.GetTime%<br />(<br />&nbsp; for /l %%n in (1 1 %1) do call :toHex %%n<br />)&gt;function.out<br />%macro_call% (&quot;t2&quot;) %macro.GetTime%<br />%macro_Call% (&quot;t1 t2 time_function____&quot;) %macro.DiffTime%<br /><br />%macro_call% (&quot;t1&quot;) %macro.GetTime%<br />(<br />&nbsp; for /l %%n in (1 1 %1) do %macro_call% (&quot;%%n&quot;) %macro.Num2Hex%<br />)&gt;macro.out<br />%macro_call% (&quot;t2&quot;) %macro.GetTime%<br />%macro_Call% (&quot;t1 t2 time_macro_______&quot;) %macro.DiffTime%<br /><br />set time_<br />exit /b<br /><br /><br />:toHex dec hex -- convert a decimal number to hexadecimal, i.e. -20 to FFFFFFEC or 26 to 0000001A<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- dec &#91;in&#93;&nbsp; &nbsp; &nbsp; - decimal number to convert<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- hex &#91;out,opt&#93; - variable to store the converted hexadecimal number in<br />::Thanks to 'dbenham' dostips forum users who inspired to improve this function<br />:$created 20091203 :$changed 20110330 :$categories Arithmetic,Encoding<br />:$source http://www.dostips.com<br />SETLOCAL ENABLEDELAYEDEXPANSION<br />set /a dec=%~1<br />set &quot;hex=&quot;<br />set &quot;map=0123456789ABCDEF&quot;<br />for /L %%N in (1,1,8) do (<br />&nbsp; &nbsp; set /a &quot;d=dec&amp;15,dec&gt;&gt;=4&quot;<br />&nbsp; &nbsp; for %%D in (!d!) do set &quot;hex=!map:~%%D,1!!hex!&quot;<br />)<br />rem !!!! REMOVE LEADING ZEROS by activating the next line, e.g. will return 1A instead of 0000001A<br />rem for /f &quot;tokens=* delims=0&quot; %%A in (&quot;%hex%&quot;) do set &quot;hex=%%A&quot;&amp;if not defined hex set &quot;hex=0&quot;<br />( ENDLOCAL &amp; REM RETURN VALUES<br />&nbsp; &nbsp; IF &quot;%~2&quot; NEQ &quot;&quot; (SET %~2=%hex%) ELSE ECHO.%hex%<br />)<br />EXIT /b<br /></code></pre></div><br />Here is the screen output when using a repeat value of 1000:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>D:\temp&gt;test 1000<br /><br />Measuring how long it takes to execute each method 1000 times<br /><br />time_callExitcode=00:00:14.03<br />time_exitcode____=00:00:12.32<br />time_function____=00:00:05.72<br />time_macro_______=00:00:02.02<br /><br />D:\temp&gt;<br /></code></pre></div><br /><br /><blockquote><div><cite>voodooman wrote:</cite>... wow this marco thread is crazy, i just tried thing like that recently, and come to conclusion that it complicates things to much.<br />escaping special characters needs to be done careful, any minor miscalculation with one more or less ^ symbol and whole macros is screwed, also syntax like this is quite unreadable and with lack of detailed instructions and explanations many people would not even get the idea how it works, also debuging such type of syntax also extra pain in arse and consuming more time, so i dont think its practical enough, it looks more like a challenge... unfortunately i have too little time to mess with challenges like this, and im more interested getting effective result faster<br /></div></blockquote>Macro development is definitely tricky for all of the reasons you state. But once a library of routines is complete and tested, they are very easy to use, and the performance gains can be stunning. Running a moderately complex traditional script can be painful on a slow network drive, yet it can still zip right along if macros are used. I've seen more than a 30 fold speed improvement. Still, I agree they are probably not of interest except to a minority of hard core batch programmers.<br /><br />Dave Benham</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [How to] dec to hex and hex to dec conversion bat</h3>
				<div class="date">Posted: <strong>02 Oct 2011 09:05</strong></div>
				<div class="author">by <strong>jeb</strong></div>
				<div class="content">Hi,<br />The problem of the char to ASCII-code function of iterating over all charactars can be solved with a mapping variable.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set map=0#301#312#32...a#41<br />Set tmp=!map:*%ch%#=!<br />Set /a code=0x!tmp:~0,2!<br /></code></pre></div><br /><br />jeb</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=2261&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:04:29 GMT -->
</html>
