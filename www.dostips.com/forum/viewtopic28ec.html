<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=7570&start=30&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:20:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; CONVERTCP.exe - Convert text from one code page to another - Page 3</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>CONVERTCP.exe - Convert text from one code page to another</h2>
		<p><a href="viewtopic75ba.html?f=3&amp;t=7570">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=7570</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>3</strong> of <strong>5</strong></div>
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>26 Sep 2017 12:25</strong></div>
				<div class="author">by <strong>miskox</strong></div>
				<div class="content">@aGerman and @Dave:<br /><br />As Steffen wrote he made CONVERTCP for me - I had one old 16-bit 'pure' DOS .exe which I was using on an almost daily basis to do conversions between CP852 and CP1250 (and vice versa) - of course these 16-bit .exe files don't work on 64-bit architecture any more. Of course Steffen checked the source file and decided it was easier for him to write the program from scratch than to try and rebuild it. Here I cannot thank him enough.<br /><br />Dave's JREPL is an excellent tool. It is just too complex for my needs (as Steffen also mentioned). Also (Steffen mentioned) I have very large .txt files to process (few hundred Mega Bytes).<br /><br />Thank you.<br />Saso</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>30 Dec 2017 08:28</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Recently I found a silly little bug. In the past I supported options with leading dash (besides of leading forward slash). It was an undocumented "feature" which, in the end, was a failure. File names with leading dash were erroneously recognized as options. Fixed with version 1.5.<br>
<br>
Virustotal:<br>
x86: <a href="https://www.virustotal.com/en/file/cfbd0c45d570f7d7b0bf8c2256ed541e6c68c11c0cf3615955f97a8d292b3505/analysis/" class="postlink">https://www.virustotal.com/en/file/cfbd ... /analysis/</a><br>
x64: <a href="https://www.virustotal.com/en/file/1113de70212eb2a911ba508cf72bda2099294a99a05d674b5a644a156900998d/analysis/" class="postlink">https://www.virustotal.com/en/file/1113 ... /analysis/</a><br>
<br>
Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>30 Dec 2017 08:53</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content">Out of curiosity, how did you solve the problem <img class="smilies" src="images/smilies/icon_question.gif" width="15" height="15" alt=":?:" title="Question"> <br>
<br>
Did you remove the "feature" of - options?<br>
<br>
Or did you come up with a mechanism for differentiating - option from file name beginning with - ? (Perhaps differentiating quoted vs. unquoted)<br>
<br>
<br>
Dave</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>30 Dec 2017 11:03</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Yes I removed it, Dave. It would have been possible to check for the existence of the following file argument after option /i. Also leading dashes could have been permitted after option /o. But any additional check would lead to decrease the performance of the tool. Thus, I decided to remove it and keep it simple. I don't think it will cause a lot of backward compatibility problems because it wasn't the documented way to pass options.<br>
FWIW Arguments in C come in without surrounding quotes (similar to the WScript.Arguments items in the WSH). To differentiate quoted and unquoted arguments I would have to parse the command line myself. Possible but ... no  <img class="smilies" src="images/smilies/icon_lol.gif" width="15" height="15" alt=":lol:" title="Laughing"> <br>
<br>
Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>24 Jan 2018 06:35</strong></div>
				<div class="author">by <strong>rahulk</strong></div>
				<div class="content">Hi, Please let me know how to proceed to convert, should i go in cmd? then what i need to do? please explain in details. I have a file in my system suppose path in C:\abc\abc.txt, now what i have to do?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>24 Jan 2018 09:49</strong></div>
				<div class="author">by <strong>Squashman</strong></div>
				<div class="content"><blockquote><div><cite><a href="memberlistc9ee.html?mode=viewprofile&amp;u=9064">rahulk</a> wrote: <a href="viewtopic4553.html?p=55444#p55444" data-post-id="55444" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">24 Jan 2018 06:35</div></cite>
Hi, Please let me know how to proceed to convert, should i go in cmd? then what i need to do? please explain in details. I have a file in my system suppose path in C:\abc\abc.txt, now what i have to do?
</div></blockquote>
The very first post of this thread shows you how to use it.  Read that and try something then come back with a specific question.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>24 Jan 2018 11:23</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content"><blockquote><div><cite><a href="memberlistc9ee.html?mode=viewprofile&amp;u=9064">rahulk</a> wrote: <a href="viewtopic4553.html?p=55444#p55444" data-post-id="55444" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">24 Jan 2018 06:35</div></cite>Please let me know how to proceed to convert</div></blockquote>
First of all what character encoding does your file currently have and to what character encoding do you like to convert the file? I can't help without these informations.<br>
<br>
Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>01 Feb 2018 10:51</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Lately I wrote a little cross-platform library in pure C to convert between different Unicode charsets. I came across UTF-32 that Windows doesn't provide any API functions for conversions. Since I already wrote my own functions I thought I could also add the support of UTF-32 to CONVERTCP. Some bigger changes were needed in the core functions of the source code which is the reason why I increased the major version number to 2.<br>
Use codepage ID 12000 for UTF-32 Little Endian and 12001 for UTF-32 Big Endian.<br>
<br>
While doing some tests I also found and fixed a bug that might have happend while reading UTF-16 BE containing surrogate pairs and having a size &gt;1 MB.<br>
<br>
Virustotal scans of version 2.0:<br>
x86: <a href="https://www.virustotal.com/en/file/964c3bdb2db9ba2cb2cdb5a1ae48f55a5a49c85c482c4912e0056f1d791a8b12/analysis/" class="postlink">https://www.virustotal.com/en/file/964c ... /analysis/</a><br>
x64: <a href="https://www.virustotal.com/en/file/66ce62b8f20d3b794501bbd63e3b52e272c6a6fb78cb4ebc7f00d7e11baa05c0/analysis/" class="postlink">https://www.virustotal.com/en/file/66ce ... /analysis/</a><br>
<br>
Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>11 Apr 2018 06:41</strong></div>
				<div class="author">by <strong>lbriza</strong></div>
				<div class="content">Hello,<br>
I have discovered a bug in CONVERTCP.exe utility. I have converted followiing file, and last several lines of output file is totally different then original file, please see it.<br>
This output was generated by comand:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>convertcp.exe 65001 1250 /i .\issues-03-2018qqqq.csv /o tmpout.csv</code></pre></div>

Archive with both files You can download here (size exceeded allowed limit):<br>
 <br>
<a href="https://emerson.sendthisfile.com/c.jsp?t=NxLQmv4bnZjCcqvXnM3uoVu0&amp;n=EX4QmmG0ZMLZ4iCrx0yfTx6T" class="postlink">https://emerson.sendthisfile.com/c.jsp? ... Crx0yfTx6T</a> <br>
 <br>
 Note: These file will expire in 14 days. <br>
 <br>
<br>
best regards <br>
Lubomir</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>11 Apr 2018 10:18</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Thank you very much for your feedback Lubomir!<br>
I was able to reproduce this issue. I'll get back with a bugfix as soon as possible.<br>
<br>
Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>11 Apr 2018 12:35</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Bug fixed  <img class="smilies" src="images/smilies/icon_smile.gif" width="15" height="15" alt=":)" title="Smile"> <br>
<br>
Virustotal scans of version 2.1:<br>
x86: <a href="https://www.virustotal.com/en/file/a31343ed75142cf7cc475adc790d6c6ed5821160e205f08018501e4655df6809/analysis/" class="postlink">https://www.virustotal.com/en/file/a313 ... /analysis/</a><br>
x64: <a href="https://www.virustotal.com/en/file/b9aecb452e1a258d443fbac374447cb109935d6938bca2d611c8b00fe9e59959/analysis/" class="postlink">https://www.virustotal.com/en/file/b9ae ... /analysis/</a><br>
<br>
For those of you that are interested in the technical reason ...<br>
Output streams are buffered by the operating system. That's something that I already knew. But since the failure never occurred in my tests I thought that the buffer was flushed at least when the thread function terminates. Obviously I was wrong. It took a while to find the reason but the fix is quite simple. It's just a call of the FlushFileBuffers API function at the end of the thread function. <span style="color: #FF0000">EDIT: NOPE, THIS DID NOT SOLVE THE PROBLEM</span><br>
<br>
So thanks again Lubomir! Much appreciated indeed. Developers need people like you that report bugs rather than silently use the next found program <img class="smilies" src="images/smilies/icon_biggrin.gif" width="15" height="15" alt=":D" title="Very Happy"> <br>
<br>
Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>11 Apr 2018 21:58</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content"><blockquote><div><cite><a href="memberlistf667.html?mode=viewprofile&amp;u=1265">aGerman</a> wrote: <a href="viewtopicc2d9.html?p=56275#p56275" data-post-id="56275" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">11 Apr 2018 12:35</div></cite>
So thanks again Lubomir! Much appreciated indeed. Developers need people like you that report bugs rather than silently use the next found program <img class="smilies" src="images/smilies/icon_biggrin.gif" width="15" height="15" alt=":D" title="Very Happy"> 
</div></blockquote>
Indeed - Well said <img class="smilies" src="images/smilies/icon_exclaim.gif" width="15" height="15" alt=":!:" title="Exclamation"></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>12 Apr 2018 02:45</strong></div>
				<div class="author">by <strong>miskox</strong></div>
				<div class="content">Thanks again Steffen!<br>
<br>
Though I never had this problem it is good to have new version.<br>
<br>
Test file supplied has 40,000+ lines - my test file had more. So strange how I never encountered the problem.<br>
<br>
Saso<br>
<br>
P.S.: Steffen: maybe you could add a date below your name in the first post when you changed the file. Release notes are way down the post. So it would look something like this:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Steffen

(updated 11-apr-2018)
convertcp_v2.1.zip
    (86.46 KiB) Downloaded 5 times


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>12 Apr 2018 03:04</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Yeah there must have been something magic in the file of Lubomir  <img class="smilies" src="images/smilies/icon_lol.gif" width="15" height="15" alt=":lol:" title="Laughing"> <br>
<br>
Sure I can add the date somewhere near the link. Although there is already a list of release notes at the end of the initial post as you mentioned.<br>
<br>
Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: CONVERTCP.exe - Convert text from one code page to another</h3>
				<div class="date">Posted: <strong>14 Apr 2018 07:07</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Just one thing that might be worth to notice:<br>
<br>
Right now I discovered that the output of CONVERTCP and JREPL (as well as using various text editors) are still different when I converted Lubomir's file.<br>
CONVERTCP does <strong class="text-strong">not</strong> change line endings automatically. E.g. things like double line feeds (LF LF) can be found in Lubomir's file. CONVERTCP leaves it as LF LF while other software may automatically convert it to CR LF CR LF.<br>
<br>
If software changes the line ending then your data could get corrupted. Typical example:<br>
If you wrap the line in an Excel cell using [Alt]+[Enter] and you export this data as CSV then you'll find it as single LF (while the end of the row is CR LF). It would have been fatal if this single LF would be converted to CR LF.<br>
<br>
Steffen</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>3</strong> of <strong>5</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=7570&start=30&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:20:38 GMT -->
</html>
