<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=6839&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:24:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; And now dos batch color secrets?</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>And now dos batch color secrets?</h2>
		<p><a href="viewtopic0d9b.html?f=3&amp;t=6839">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=6839</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>2</strong></div>
					<div class="post">
				<h3>And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>12 Dec 2015 07:35</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">Hi to all,<br /><br />This is my old project for draw a sphere on console using the trick of font Lucida Console size 5 and the &quot;shadow&quot; chars<br />and the findstr colour mode.<br /><br />I use an external MATH until a dos batch MATH is not avaible. The SQRT is ready. Lack the EXP/POW at the moments. But my goal is do in &quot;native/pure&quot; mode.<br /><br />I need discovery a mechanism for create RIGHT colors on console and on image file ( I have open a separated thread )<br /><br />Antialiasing and dithering ,small fonts usage and unicode use are other goals.<br /><br />I hope that you can contribute to this work. TIA<br /><br />Yuo can port in HTA for best view. See Aacini works!<br /><br />results:<br /><img src="../../i.imgsafe.org/4704797.html" class="postimage" alt="Image" /><br /><br />- Use Lucida console font 5<br />- Disable ClearType<br />- Enable &quot;Smooth Edges of Screen Fonts&quot;<br /><br />code:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal EnableDelayedExpansion<br /><br />rem Use Lucida Console font size 5<br /><br />rem Version 2.0.9.2 dec-2015<br />rem by einstein1969<br />rem http://rosettacode.org/wiki/Draw_a_sphere<br /><br />mode 90,70 <br />color 0f<br />pushd &quot;%TMP%&quot;<br /><br />if not exist FPU-Module.js echo WScript.Stdout.WriteLine(eval(WScript.Stdin.ReadLine().replace(/\x22/g,&quot;&quot;)));&gt; FPU-Module.js<br />for /F &quot;tokens=1,2 delims=#&quot; %%a in ('&quot;prompt #$H#$E# &amp; echo on &amp; for %%b in (1) do rem&quot;') do (set &quot;DEL=%%a&quot;)<br />&lt;nul set /p &quot;.=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%&quot; &gt; &quot;'&quot;<br /><br />set &quot;color1=778707880880880000000034&quot;<br />set &quot;color2=FFFFFFF7F7F7777F88788043&quot;<br />set&nbsp; &nbsp;&quot;char=Û²²±²°±Û±²°²±°±°Û²°±°&nbsp; &quot;<br />set numshadesH=23<br /><br />set &quot;light&#91;0&#93;=30&quot;<br />set &quot;light&#91;1&#93;=30&quot;<br />set &quot;light&#91;2&#93;=-50&quot;<br /><br />call :normalize2 light<br /><br />&lt;nul set/p &quot;=%DEL%&nbsp; &nbsp;°&quot;<br />call :draw_sphereH2 8 3.5 0.20<br />call :draw_sphereH2 8 1.5 0.10<br />call :draw_sphereH2 8 3.5 0.10<br />call :draw_sphereH2 8 32.0 0.05<br /><br />del $$$.color.txt<br />del '<br /><br />popd<br /><br />pause<br /><br />goto :eof<br /><br />:::::::::::::::::::::::::::::::::::::::::::::::::<br />:draw_sphereH2 raggio k ambiente<br /><br />set R=%1<br />set k=%2<br />set ambiente=%3<br /><br />call :calculate2 &quot;Math.floor(-!R!)&quot; floorI<br />call :calculate2 &quot;Math.ceil(!R!)&quot; CeilI<br /><br />For /L %%i in (!floorI!,1,!CeilI!) do (<br /><br />&nbsp; call :calculate2 &quot;%%i+0.5&quot; x<br />&nbsp; call :calculate2 &quot;Math.floor(-2*!R!)&quot; floorJ<br />&nbsp; call :calculate2 &quot;Math.ceil(2*!R!)&quot; CeilJ<br /><br />&nbsp; For /L %%j in (!floorJ!,1,!ceilJ!) do (<br /><br />&nbsp; &nbsp; rem for aspect ratio &quot;(%%j/2+0.5)&quot; = y<br />&nbsp; &nbsp; call :calculate2 &quot;!x!*!x! + (%%j/2+0.5)*(%%j/2+0.5) - !R!*!R!&quot; inS<br /><br />&nbsp; &nbsp; if &quot;!inS:~0,1!&quot;==&quot;-&quot; (<br /><br />&nbsp; &nbsp; &nbsp; call :calculate2 &quot;Math.round( (1 - (Math.pow(Math.max(0,-(!light&#91;0&#93;!*(!x!/Math.sqrt(!x!*!x!+(%%j/2+0.5)*(%%j/2+0.5)+(!R! * !R! -(!x! * !x!) - ((%%j/2+0.5) * (%%j/2+0.5)))))+(!light&#91;1&#93;!)*((%%j/2+0.5)/Math.sqrt(!x!*!x!+(%%j/2+0.5)*(%%j/2+0.5)+(!R! * !R! - (!x! * !x!) - ((%%j/2+0.5) * (%%j/2+0.5)))))+(!light&#91;2&#93;!)*(Math.sqrt(!R! * !R! - (!x! * !x!) - ((%%j/2+0.5) * (%%j/2+0.5)))/Math.sqrt(!x!*!x!+(%%j/2+0.5)*(%%j/2+0.5)+(!R! * !R! - (!x! * !x!) - ((%%j/2+0.5) * (%%j/2+0.5))))))),!k!)+!ambiente!)) * (!numshadesH! - 1) )&quot; intensity<br />&nbsp; &nbsp; &nbsp; if &quot;!intensity:~0,1!&quot;==&quot;-&quot; set intensity=0<br />&nbsp; &nbsp; &nbsp; if !intensity! geq !numshadesH! set /a intensity=!numshadesH!-1<br /><br />&nbsp; &nbsp; &nbsp; title !intensity!<br />&nbsp; &nbsp; &nbsp; for %%s in (!intensity!) do call :shadow %%s<br /><br />&nbsp; &nbsp; ) else (&lt;nul set/p &quot;=.%DEL%°&quot;)<br /><br />&nbsp; )<br /><br />&nbsp; echo(°<br />&nbsp; &lt;nul set/p &quot;=%DEL%&nbsp; &nbsp;°&quot;<br />)<br /><br />goto :eof<br /><br />::::::::::::::::::::::::::::::::::::::::::::::<br />:calculate2 expr retvar<br />&nbsp; echo &quot;%~1&quot; &gt;%TMP%\in.txt<br />&nbsp; Cscript //nologo FPU-Module.js &lt;%TMP%\in.txt &gt;%TMP%\out.txt<br />&nbsp; set /p &quot;%2=&quot; &lt;%TMP%\out.txt<br />&nbsp; set &quot;%2=!%2:,=.!&quot;<br />goto :eof<br /><br />::::::::::::::::::::::::::::::::::::::::::::::::<br />:normalize2<br /><br />&nbsp; set _0=!%1&#91;0&#93;!<br />&nbsp; set _1=!%1&#91;1&#93;!<br />&nbsp; set _2=!%1&#91;2&#93;!<br /><br />&nbsp; call :calculate2 &quot;!_0!/Math.sqrt(!_0!*!_0!+!_1!*!_1!+!_2!*!_2!)&quot; %1&#91;0&#93;<br />&nbsp; call :calculate2 &quot;!_1!/Math.sqrt(!_0!*!_0!+!_1!*!_1!+!_2!*!_2!)&quot; %1&#91;1&#93;<br />&nbsp; call :calculate2 &quot;!_2!/Math.sqrt(!_0!*!_0!+!_1!*!_1!+!_2!*!_2!)&quot; %1&#91;2&#93;<br />&nbsp; &nbsp;<br />goto :eof<br /><br />:::::::::::::::::::::::::::::::::::::::::::::::::<br />:shadow<br /><br />&nbsp; &nbsp; (echo !char:~%1,1!\..\'<br />&nbsp; &nbsp; ) &gt; $$$.color.txt &amp;&amp; findstr /a:!color1:~%1,1!!color2:~%1,1! /f:$$$.color.txt &quot;.&quot;<br /><br />goto :eof<br /></code></pre></div><br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>15 Dec 2015 04:08</strong></div>
				<div class="author">by <strong>npocmaka_</strong></div>
				<div class="content">Looks great.<br />Aren't there a way to set the font and its size from command line?<br /><br />Here are some options for the cmd but not sure if they were only about true type <strong class="text-strong">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Console</strong></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>15 Dec 2015 13:30</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">There are some examples on setting font for command windows.<br /><br />In this <a href="viewtopicbfef.html?f=3&amp;t=2745" class="postlink">thread</a> neorobin show an example of use.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal enabledelayedexpansion<br />mode con cols=80 lines=61 &amp; color 0f &amp; &gt;nul chcp 437<br /><br />if &quot;%1&quot;==&quot;&quot; (<br />&nbsp; for %%a in (&nbsp; FontSize:00080008<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FontFamily:00000030<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WindowSize:003d0050<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenColors:0000000f<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CodePage:000001b5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenBufferSize:003d0050<br />&nbsp; ) do for /f &quot;tokens=1,2 delims=:&quot; %%b in (&quot;%%a&quot;) do (<br />&nbsp; &nbsp; &gt;nul reg add HKCU\Console\BadAppleCMD /v %%b /t reg_dword /d 0x%%c /f<br />&nbsp; )<br />&nbsp; start &quot;BadAppleCMD&quot; /max &quot;%ComSpec%&quot; /c &quot;%~f0&quot; 1&amp;goto:eof<br /><br />) else ( &gt;nul reg delete HKCU\Console\BadAppleCMD /f )<br /></code></pre></div><br /><br /><br />It is possible then change the default font palette for more complex results!!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>15 Dec 2015 14:17</strong></div>
				<div class="author">by <strong>batchcc</strong></div>
				<div class="content">Einstein1969 it is not working on my computer; I'm running Windows Vista.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>10 Jan 2016 22:07</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">what type of error?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>11 Jan 2016 13:54</strong></div>
				<div class="author">by <strong>batchcc</strong></div>
				<div class="content">It gives me this error over and over again.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>░C:\Users\User\AppData\Local\Temp\FPU-Module.js(1, 1) Microsoft JScript runtime error: Au<br />tomation server can't create object<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>14 Jan 2016 07:52</strong></div>
				<div class="author">by <strong>Squashman</strong></div>
				<div class="content">einstein,<br />I ran your draw sphere script and now when I run any batch file the Window opens to that same size as yours did.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>08 Apr 2016 16:04</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content"><blockquote><div><cite>batchcc wrote:</cite>It gives me this error over and over again.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>░C:\Users\User\AppData\Local\Temp\FPU-Module.js(1, 1) Microsoft JScript runtime error: Au<br />tomation server can't create object<br /></code></pre></div></div></blockquote><br /><br />sorry  <img class="smilies" src="images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" />  but I can't reproduce this errors.<br /><br />@squashman<br />You need change something in command windows setting to save new size.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>08 Apr 2016 18:51</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">Finally I release a old work on colors.<br /><br />- Use Lucida console font 5<br />- Disable ClearType<br />- Enable &quot;Smooth Edges of Screen Fonts&quot;<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:::::::::::::::::::::::::::::::::::::::::::::<br />::<br />:: By einstein1969. ColorsHSV.cmd<br />::<br />:: Ver. 0.0.2 09-04-2016 alpha release<br />::&nbsp; - Reduce size of environment for speedup.<br />::&nbsp; - Auto load Lucida console font size 5<br />::<br />:: Ver. 0.0.1 21-10-2013 alpha<br />::&nbsp; - Initial version. Too slow to release.<br />:::::::::::::::::::::::::::::::::::::::::::::<br />@echo off &amp; setlocal enabledelayedexpansion<br /><br />mode 90,60<br />chcp 437<br /><br />echo Use Lucida console font 5<br />echo Disable ClearType<br />echo Enable &quot;Smooth Edges of Screen Fonts&quot;<br /><br />ping -n 5 localhost &gt;nul<br /><br />if &quot;%1&quot;==&quot;&quot; (<br />&nbsp; for %%a in (&nbsp; FontSize:00050000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FontFamily:00000036<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WindowSize:003c005a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenColors:0000000f<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CodePage:000001b5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenBufferSize:003c005a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FontWeight:00000190<br />&nbsp; ) do for /f &quot;tokens=1,2 delims=:&quot; %%b in (&quot;%%a&quot;) do (<br />&nbsp; &nbsp; &gt;nul reg add HKCU\Console\ColorsHSV /v %%b /t reg_dword /d 0x%%c /f<br />&nbsp; )<br />&nbsp; &gt;nul reg add HKCU\Console\ColorsHSV /v FaceName /t reg_sz /d &quot;Lucida Console&quot; /f<br />&nbsp; start &quot;ColorsHSV&quot; /max &quot;%ComSpec%&quot; /c &quot;%~f0&quot; 1&amp;goto:eof<br /><br />) else ( &gt;nul reg delete HKCU\Console\ColorsHSV /f )<br /><br /><br />pushd %tmp%<br /><br />:: prepare for color function<br />&nbsp; for /F &quot;tokens=1,2 delims=#&quot; %%a in ('&quot;prompt #$H#$E# &amp; echo on &amp; for %%b in (1) do rem&quot;') do (<br />&nbsp; &nbsp; set &quot;DEL=%%a&quot;<br />&nbsp; )<br />&nbsp; &lt;nul set /p &quot;.=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%&quot; &gt; &quot;'&quot;<br />&nbsp; &lt;nul &gt; X set /p &quot;.=.&quot;<br /><br /><br />:: Set the 16 color standard palette<br />&nbsp; set /a i=0<br />&nbsp; for %%c in (&nbsp; &nbsp;000000 000080 008000 008080 800000 800080 808000 C0C0C0<br />&nbsp; &nbsp;&nbsp; &nbsp;808080 0000FF 00FF00 00FFFF FF0000 FF00FF FFFF00 FFFFFF) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set p16&#91;!i!&#93;=%%c<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a i=i+1<br />&nbsp; )<br /><br />&nbsp; :: gamma 2.2<br />&nbsp; set /a i=0<br />&nbsp; for %%c in (&nbsp; &nbsp;000000 000037 003700 003737 370000 370037 373700 898989<br />&nbsp; &nbsp;&nbsp; &nbsp;373737 0000FF 00FF00 00FFFF FF0000 FF00FF FFFF00 FFFFFF) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set p16&#91;!i!&#93;=%%c<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a i=i+1<br />&nbsp; )<br /><br /><br />:: Calculate all colors<br /><br />&nbsp; set &quot;map=0123456789ABCDEF&quot;<br /><br />&nbsp; set cont=-1<br />&nbsp; For /L %%i in (0,1,15) do (<br /><br />&nbsp; &nbsp;set /a bg=%%i, fg=%%i<br />&nbsp; &nbsp;for %%D in (!bg!) do (set bg=!map:~%%D,1!)<br />&nbsp; &nbsp; &nbsp; &nbsp; for %%D in (!fg!) do (set fg=!map:~%%D,1!)<br /><br />&nbsp; &nbsp;set /a &quot;rgb=0x!p16&#91;%%i&#93;!, rri=rgb &gt;&gt; 16, ggi=(rgb &gt;&gt; 8) &amp; 0xFF, bbi=rgb &amp; 0xFF&quot;<br /><br />&nbsp; &nbsp;set /a cont+=1<br /><br />&nbsp; &nbsp;set &quot;pRGB!cont!=!p16&#91;%%i&#93;!&quot;<br /><br />&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg! !&quot;<br /><br />&nbsp; &nbsp;set /a si=%%i+1<br />&nbsp; &nbsp;&nbsp; &nbsp;For /L %%j in (!si!,1,15) do (<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set fg=%%j<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for %%D in (!fg!) do (set fg=!map:~%%D,1!)<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;rgb=0x!p16&#91;%%j&#93;!, rrj=rgb &gt;&gt; 16, ggj=(rgb &gt;&gt; 8) &amp; 0xFF, bbj=rgb &amp; 0xFF&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;pR=(ddr=rrj-rri)/4+rri, pG=(ddg=ggj-ggi)/4+ggi, pB=(ddb=bbj-bbi)/4+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!°&quot;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Set /a &quot;pR=ddr/2+rri, pG=ddg/2+ggi, pB=ddb/2+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!±&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp;&nbsp; &nbsp;Set /a &quot;pR=ddr*3/4+rri, pG=ddg*3/4+ggi, pB=ddb*3/4+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!²&quot;<br /><br />&nbsp; &nbsp;)<br />&nbsp; )<br /><br />&nbsp; set pal16_4.size=!cont!<br /><br />&nbsp; for /L %%i in (0,1,15) do set &quot;p16&#91;%%i&#93;=&quot; <br /><br /><br />&nbsp; :: Demo of colors. This show HALF number of colors. The WHITE colors are not show!<br /><br />&nbsp; Set /a s=10000, v1=10000<br /><br />&nbsp; For /L %%h in (0,15,360) do ( <br />&nbsp; &nbsp;For /L %%v in (10000,-400,0) do call :plot_HSV_RGB %%h !s! %%v<br />&nbsp; &nbsp;if !v1! geq 0 (&nbsp; &nbsp;call :plot 0 0 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;call :plot 0 0 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;For /L %%l in (0,8,360) do call :plot_HSV_RGB %%l !s! !v1!<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set /a v1=v1-500 )<br />&nbsp; &nbsp;echo(<br />&nbsp; )<br /><br />&nbsp; echo(<br /><br />&nbsp; popd<br />&nbsp; pause<br /><br />exit /b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:Plot_HSV_RGB H S V<br /><br />rem H=0..360 S=0..10000 V=0..10000<br /><br />set /a H=%1, S=%2, V=%3<br /><br />rem When 0 &lt;= H &lt; 360, 0 &lt;= S &lt;= 1 and 0 &lt;= V &lt;= 1:<br /><br />if !H! equ 360 set /a H=0<br /><br />if !H! lss 0 echo ERROR! &amp; goto :EOF<br /><br />set /a &quot;h1=h*10000/60, mm = (h1 %% 20000) - 10000&quot;<br /><br />if !mm! lss 0 set /a mm=-mm<br /><br />set /a C = (V * S) / 10000<br /><br />set /a &quot;X = C *(10000 - mm)/10000 , m = V - C&quot;<br /><br />rem (R,G,B) = (R'+m, G'+m, B'+m)<br /><br />if !H! lss 60 (set /a R=C+m, G=X+m, B=0+m) else (<br />&nbsp; &nbsp;if !H! lss 120 (set /a R=X+m, G=C+m, B=0+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 180 (set /a R=0+m, G=C+m, B=X+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 240 (set /a R=0+m, G=X+m, B=C+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 300 (set /a R=X+m, G=0+m, B=C+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 360 (set /a R=C+m, G=0+m, B=X+m) else (echo ERROR!)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;)<br />)<br /><br />set /a &quot;R=R*255/10000, G=G*255/10000, B=B*255/10000&quot;<br /><br />call :Plot !R! !G! !B!<br /><br />exit /b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:plot R G B<br />&nbsp; set /a &quot;AArt=%1, AAgt=%2, AAbt=%3&quot;<br />&nbsp; set /a dm=256*256*256, fg=-1, bg=-1, ind=-1<br /><br />&nbsp; For /L %%i in (0,1,!pal16_4.size!) do (<br /><br />&nbsp; &nbsp;set /a &quot;AAArgb=0x!pRGB%%i!, d=(AArt-(AAArgb &gt;&gt; 16))*(AArt-(AAArgb &gt;&gt; 16))+(AAgt-((AAArgb &gt;&gt; 8) &amp; 0xFF))*(AAgt-((AAArgb &gt;&gt; 8) &amp; 0xFF))+(AAbt-(AAArgb &amp; 0xFF))*(AAbt-(AAArgb &amp; 0xFF))&quot;<br /><br />&nbsp; &nbsp;if !dm! gtr !d! set /a dm=d, ind=%%i<br />&nbsp; )<br /><br />&nbsp; for %%i in (!ind!) do (<br />&nbsp; &nbsp;set bg=!z%%i:~0,1!<br />&nbsp; &nbsp;set fg=!z%%i:~1,1!<br />&nbsp; &nbsp;set &quot;char=!z%%i:~2,1!&quot;<br />&nbsp; )<br /><br />&nbsp; rem Carlos color version 23c. Use for compatibilty with XP<br />&nbsp; rem call :color !bg!!fg! &quot;!char!&quot;<br /><br />&nbsp; rem jeb version don't work :(<br />&nbsp; rem call :color_jeb !bg!!fg! &quot;!char!&quot;<br /><br />&nbsp; rem Fast color<br />&nbsp; &gt; colorPrint.txt (echo !char!\..\') &amp;&amp; findstr /a:!bg!!fg! /f:colorPrint.txt &quot;.&quot;<br /><br />exit/b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:RGBhex<br /><br />set /a &quot;d=pR&amp;15,pR&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pR!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB=!HH!!LH!<br /><br />set /a &quot;d=pG&amp;15,pG&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pG!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB=!pRGB!!HH!!LH!<br /><br />set /a &quot;d=pB&amp;15,pB&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pB!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB!cont!=!pRGB!!HH!!LH!<br /><br />exit/b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:color_jeb<br />set &quot;param=^%~2&quot; !<br />set &quot;param=!param:&quot;=\&quot;!&quot;<br />findstr /p /A:%1 &quot;.&quot; &quot;!param!\..\X&quot; nul<br />&lt;nul set /p &quot;.=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%&quot;<br />exit /b<br /></code></pre></div><br /><br />result:<br /><img src="../../s30.postimg.org/lbv19gskx/colorsHSV.png" class="postimage" alt="Image" /><br /><br />I open a separate <a href="viewtopicf9f0.html?f=3&amp;t=7075" class="postlink">thread</a> for problem.<br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>09 Apr 2016 09:06</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">In the previus code is possible work with major resolution decreasing the font size.<br /><br />This is possible changing for example:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>FontSize:00050000<br /></code></pre></div><br /><br />to:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>FontSize:00020000<br /></code></pre></div><br /><br />This is not possible in standard mode via mouse click and changing the windows propierties.<br /><br />Einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>10 Apr 2016 09:49</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">This is with the HSL function. We can view more colors.<br />I have zoomed than this is little slow. But this is ALPHA stage!!!<br /><br />- Use Lucida console font 5<br />- Disable ClearType<br />- Enable &quot;Smooth Edges of Screen Fonts&quot;<br /><br />ColorsHSL.cmd:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:::::::::::::::::::::::::::::::::::::::::::::<br />::<br />:: By einstein1969. ColorsHSL.cmd<br />::<br />:: Ver. 0.0.2 09-04-2016 alpha release<br />::&nbsp; - Reduce size of environment for speedup.<br />::&nbsp; - Auto load Lucida console font size 5<br />::<br />:: Ver. 0.0.1 21-10-2013 alpha<br />::&nbsp; - Initial version. Too slow to release.<br />:::::::::::::::::::::::::::::::::::::::::::::<br />@echo off &amp; setlocal enabledelayedexpansion<br /><br />mode 90,60<br />chcp 437<br /><br />echo Use Lucida console font 5<br />echo Disable ClearType<br />echo Enable &quot;Smooth Edges of Screen Fonts&quot;<br /><br />ping -n 5 localhost &gt;nul<br /><br />if &quot;%1&quot;==&quot;&quot; (<br />&nbsp; for %%a in (&nbsp; FontSize:00050000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FontFamily:00000036<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WindowSize:003c005a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenColors:0000000f<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CodePage:000001b5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenBufferSize:003c005a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FontWeight:00000190<br />&nbsp; ) do for /f &quot;tokens=1,2 delims=:&quot; %%b in (&quot;%%a&quot;) do (<br />&nbsp; &nbsp; &gt;nul reg add HKCU\Console\ColorsHSL /v %%b /t reg_dword /d 0x%%c /f<br />&nbsp; )<br />&nbsp; &gt;nul reg add HKCU\Console\ColorsHSL /v FaceName /t reg_sz /d &quot;Lucida Console&quot; /f<br />&nbsp; start &quot;ColorsHSL&quot; /max &quot;%ComSpec%&quot; /c &quot;%~f0&quot; 1&amp;goto:eof<br /><br />) else ( &gt;nul reg delete HKCU\Console\ColorsHSL /f )<br /><br /><br />pushd %tmp%<br /><br />:: prepare for color function<br />&nbsp; for /F &quot;tokens=1,2 delims=#&quot; %%a in ('&quot;prompt #$H#$E# &amp; echo on &amp; for %%b in (1) do rem&quot;') do (<br />&nbsp; &nbsp; set &quot;DEL=%%a&quot;<br />&nbsp; )<br />&nbsp; &lt;nul set /p &quot;.=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%&quot; &gt; &quot;'&quot;<br />&nbsp; &lt;nul &gt; X set /p &quot;.=.&quot;<br /><br /><br />:: Set the 16 color standard palette<br />&nbsp; set /a i=0<br />&nbsp; for %%c in (&nbsp; &nbsp;000000 000080 008000 008080 800000 800080 808000 C0C0C0<br />&nbsp; &nbsp;&nbsp; &nbsp;808080 0000FF 00FF00 00FFFF FF0000 FF00FF FFFF00 FFFFFF) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set p16&#91;!i!&#93;=%%c<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a i=i+1<br />&nbsp; )<br /><br />&nbsp; :: gamma 2.2<br />&nbsp; set /a i=0<br />&nbsp; for %%c in (&nbsp; &nbsp;000000 000037 003700 003737 370000 370037 373700 898989<br />&nbsp; &nbsp;&nbsp; &nbsp;373737 0000FF 00FF00 00FFFF FF0000 FF00FF FFFF00 FFFFFF) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set p16&#91;!i!&#93;=%%c<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a i=i+1<br />&nbsp; )<br /><br /><br />:: Calculate all colors<br /><br />&nbsp; set &quot;map=0123456789ABCDEF&quot;<br /><br />&nbsp; set cont=-1<br />&nbsp; For /L %%i in (0,1,15) do (<br /><br />&nbsp; &nbsp;set /a bg=%%i, fg=%%i<br />&nbsp; &nbsp;for %%D in (!bg!) do (set bg=!map:~%%D,1!)<br />&nbsp; &nbsp; &nbsp; &nbsp; for %%D in (!fg!) do (set fg=!map:~%%D,1!)<br /><br />&nbsp; &nbsp;set /a &quot;rgb=0x!p16&#91;%%i&#93;!, rri=rgb &gt;&gt; 16, ggi=(rgb &gt;&gt; 8) &amp; 0xFF, bbi=rgb &amp; 0xFF&quot;<br /><br />&nbsp; &nbsp;set /a cont+=1<br /><br />&nbsp; &nbsp;set &quot;pRGB!cont!=!p16&#91;%%i&#93;!&quot;<br /><br />&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg! !&quot;<br /><br />&nbsp; &nbsp;set /a si=%%i+1<br />&nbsp; &nbsp;&nbsp; &nbsp;For /L %%j in (!si!,1,15) do (<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set fg=%%j<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for %%D in (!fg!) do (set fg=!map:~%%D,1!)<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;rgb=0x!p16&#91;%%j&#93;!, rrj=rgb &gt;&gt; 16, ggj=(rgb &gt;&gt; 8) &amp; 0xFF, bbj=rgb &amp; 0xFF&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;pR=(ddr=rrj-rri)/4+rri, pG=(ddg=ggj-ggi)/4+ggi, pB=(ddb=bbj-bbi)/4+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!°&quot;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Set /a &quot;pR=ddr/2+rri, pG=ddg/2+ggi, pB=ddb/2+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!±&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp;&nbsp; &nbsp;Set /a &quot;pR=ddr*3/4+rri, pG=ddg*3/4+ggi, pB=ddb*3/4+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!²&quot;<br /><br />&nbsp; &nbsp;)<br />&nbsp; )<br /><br />&nbsp; set pal16_4.size=!cont!<br /><br />&nbsp; for /L %%i in (0,1,15) do set &quot;p16&#91;%%i&#93;=&quot; <br /><br /><br />&nbsp; :: Demo of colors. <br /><br />&nbsp; mode 190,120<br /><br />&nbsp; For /L %%l in (10000,-100,0) do (<br />&nbsp; &nbsp;For /L %%h in (0,2,360) do call :plot_HSL_RGB %%h 10000 %%l<br />&nbsp; &nbsp; &nbsp; &nbsp; ping -n 5 localhost &gt;nul<br />&nbsp; &nbsp;echo(<br />&nbsp; )<br /><br /><br />&nbsp; popd<br />&nbsp; pause<br /><br />exit /b<br /><br />:Plot_HSL_RGB H S L<br /><br />rem H=0..360 S=0..10000 L=0..10000<br /><br />set /a H=%1, S=%2, L=%3<br /><br />rem When 0 &lt;= H &lt; 360, 0 &lt;= S &lt;= 1 and 0 &lt;= L &lt;= 1:<br /><br />if !H! equ 360 set /a H=0<br /><br />if !H! lss 0 echo ERROR! &amp; goto :EOF<br /><br />set /a va=2*L-10000<br />if !va! lss 0 set /a va=-va<br /><br />set /a C=(10000-va)*S/10000<br /><br />set /a &quot;h1=h*10000/60, mm = (h1 %% 20000) - 10000&quot;<br /><br />if !mm! lss 0 set /a mm=-mm<br /><br />set /a X = C *(10000 - mm)/10000 , m = L - C/2<br /><br />rem (R,G,B) = (R'+m, G'+m, B'+m)<br /><br />if !H! lss 60 (set /a R=C+m, G=X+m, B=0+m) else (<br />&nbsp; &nbsp;if !H! lss 120 (set /a R=X+m, G=C+m, B=0+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 180 (set /a R=0+m, G=C+m, B=X+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 240 (set /a R=0+m, G=X+m, B=C+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 300 (set /a R=X+m, G=0+m, B=C+m) else (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if !H! lss 360 (set /a R=C+m, G=0+m, B=X+m) else (echo ERROR!)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;)<br />)<br /><br />set /a R=R*255/10000, G=G*255/10000, B=B*255/10000<br /><br />call :Plot !R! !G! !B!<br /><br />goto :eof<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:plot R G B<br />&nbsp; set /a &quot;AArt=%1, AAgt=%2, AAbt=%3&quot;<br />&nbsp; set /a dm=256*256*256, fg=-1, bg=-1, ind=-1<br /><br />&nbsp; For /L %%i in (0,1,!pal16_4.size!) do (<br /><br />&nbsp; &nbsp;set /a &quot;AAArgb=0x!pRGB%%i!, d=(AArt-(AAArgb &gt;&gt; 16))*(AArt-(AAArgb &gt;&gt; 16))+(AAgt-((AAArgb &gt;&gt; 8) &amp; 0xFF))*(AAgt-((AAArgb &gt;&gt; 8) &amp; 0xFF))+(AAbt-(AAArgb &amp; 0xFF))*(AAbt-(AAArgb &amp; 0xFF))&quot;<br /><br />&nbsp; &nbsp;if !dm! gtr !d! set /a dm=d, ind=%%i<br />&nbsp; )<br /><br />&nbsp; for %%i in (!ind!) do (<br />&nbsp; &nbsp;set bg=!z%%i:~0,1!<br />&nbsp; &nbsp;set fg=!z%%i:~1,1!<br />&nbsp; &nbsp;set &quot;char=!z%%i:~2,1!&quot;<br />&nbsp; )<br /><br />&nbsp; rem Carlos color version 23c. Use for compatibilty with XP<br />&nbsp; rem call :color !bg!!fg! &quot;!char!&quot;<br /><br />&nbsp; rem jeb version don't work :(<br />&nbsp; rem call :color_jeb !bg!!fg! &quot;!char!&quot;<br /><br />&nbsp; rem Fast color<br />&nbsp; &gt; colorPrint.txt (echo !char!\..\') &amp;&amp; findstr /a:!bg!!fg! /f:colorPrint.txt &quot;.&quot;<br /><br />exit/b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:RGBhex<br /><br />set /a &quot;d=pR&amp;15,pR&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pR!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB=!HH!!LH!<br /><br />set /a &quot;d=pG&amp;15,pG&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pG!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB=!pRGB!!HH!!LH!<br /><br />set /a &quot;d=pB&amp;15,pB&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pB!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB!cont!=!pRGB!!HH!!LH!<br /><br />exit/b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:color_jeb<br />set &quot;param=^%~2&quot; !<br />set &quot;param=!param:&quot;=\&quot;!&quot;<br />findstr /p /A:%1 &quot;.&quot; &quot;!param!\..\X&quot; nul<br />&lt;nul set /p &quot;.=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%&quot;<br />exit /b<br /><br /></code></pre></div><br /><br />results:<br /><img src="../../s9.postimg.org/70en428rz/colorsHSL.png" class="postimage" alt="Image" /><br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>10 Apr 2016 10:41</strong></div>
				<div class="author">by <strong>foxidrive</strong></div>
				<div class="content">Nice!   That's so impressive, when back many years ago it would have been considered impossible.<br /><br />Others have done nice work that I've noticed with colour too, real purdy.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>10 Apr 2016 10:45</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">This is the RGB CUBE but on 2D plane.<br />This show all color in the R G B range.<br /><br />- Use Lucida console font 5<br />- Disable ClearType<br />- Enable &quot;Smooth Edges of Screen Fonts&quot;<br /><br />ColorsRGB.cmd:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:::::::::::::::::::::::::::::::::::::::::::::<br />::<br />:: By einstein1969. ColorsRGB.cmd<br />::<br />:: Ver. 0.0.2 09-04-2016 alpha release<br />::&nbsp; - Reduce size of environment for speedup.<br />::&nbsp; - Auto load Lucida console font size 5<br />::<br />:: Ver. 0.0.1 21-10-2013 alpha<br />::&nbsp; - Initial version. Too slow to release.<br />:::::::::::::::::::::::::::::::::::::::::::::<br />@echo off &amp; setlocal enabledelayedexpansion<br /><br />mode 90,60<br />chcp 437<br /><br />echo Use Lucida console font 5<br />echo Disable ClearType<br />echo Enable &quot;Smooth Edges of Screen Fonts&quot;<br /><br />ping -n 5 localhost &gt;nul<br /><br />if &quot;%1&quot;==&quot;&quot; (<br />&nbsp; for %%a in (&nbsp; FontSize:00050000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FontFamily:00000036<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WindowSize:003c005a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenColors:0000000f<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CodePage:000001b5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ScreenBufferSize:003c005a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FontWeight:00000190<br />&nbsp; ) do for /f &quot;tokens=1,2 delims=:&quot; %%b in (&quot;%%a&quot;) do (<br />&nbsp; &nbsp; &gt;nul reg add HKCU\Console\ColorsRGB /v %%b /t reg_dword /d 0x%%c /f<br />&nbsp; )<br />&nbsp; &gt;nul reg add HKCU\Console\ColorsRGB /v FaceName /t reg_sz /d &quot;Lucida Console&quot; /f<br />&nbsp; start &quot;ColorsRGB&quot; /max &quot;%ComSpec%&quot; /c &quot;%~f0&quot; 1&amp;goto:eof<br /><br />) else ( &gt;nul reg delete HKCU\Console\ColorsRGB /f )<br /><br /><br />pushd %tmp%<br /><br />:: prepare for color function<br />&nbsp; for /F &quot;tokens=1,2 delims=#&quot; %%a in ('&quot;prompt #$H#$E# &amp; echo on &amp; for %%b in (1) do rem&quot;') do (<br />&nbsp; &nbsp; set &quot;DEL=%%a&quot;<br />&nbsp; )<br />&nbsp; &lt;nul set /p &quot;.=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%&quot; &gt; &quot;'&quot;<br />&nbsp; &lt;nul &gt; X set /p &quot;.=.&quot;<br /><br /><br />:: Set the 16 color standard palette<br />&nbsp; set /a i=0<br />&nbsp; for %%c in (&nbsp; &nbsp;000000 000080 008000 008080 800000 800080 808000 C0C0C0<br />&nbsp; &nbsp;&nbsp; &nbsp;808080 0000FF 00FF00 00FFFF FF0000 FF00FF FFFF00 FFFFFF) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set p16&#91;!i!&#93;=%%c<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a i=i+1<br />&nbsp; )<br /><br />&nbsp; :: gamma 2.2<br />&nbsp; set /a i=0<br />&nbsp; for %%c in (&nbsp; &nbsp;000000 000037 003700 003737 370000 370037 373700 898989<br />&nbsp; &nbsp;&nbsp; &nbsp;373737 0000FF 00FF00 00FFFF FF0000 FF00FF FFFF00 FFFFFF) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set p16&#91;!i!&#93;=%%c<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a i=i+1<br />&nbsp; )<br /><br /><br />:: Calculate all colors<br /><br />&nbsp; set &quot;map=0123456789ABCDEF&quot;<br /><br />&nbsp; set cont=-1<br />&nbsp; For /L %%i in (0,1,15) do (<br /><br />&nbsp; &nbsp;set /a bg=%%i, fg=%%i<br />&nbsp; &nbsp;for %%D in (!bg!) do (set bg=!map:~%%D,1!)<br />&nbsp; &nbsp; &nbsp; &nbsp; for %%D in (!fg!) do (set fg=!map:~%%D,1!)<br /><br />&nbsp; &nbsp;set /a &quot;rgb=0x!p16&#91;%%i&#93;!, rri=rgb &gt;&gt; 16, ggi=(rgb &gt;&gt; 8) &amp; 0xFF, bbi=rgb &amp; 0xFF&quot;<br /><br />&nbsp; &nbsp;set /a cont+=1<br /><br />&nbsp; &nbsp;set &quot;pRGB!cont!=!p16&#91;%%i&#93;!&quot;<br /><br />&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg! !&quot;<br /><br />&nbsp; &nbsp;set /a si=%%i+1<br />&nbsp; &nbsp;&nbsp; &nbsp;For /L %%j in (!si!,1,15) do (<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set fg=%%j<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for %%D in (!fg!) do (set fg=!map:~%%D,1!)<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;rgb=0x!p16&#91;%%j&#93;!, rrj=rgb &gt;&gt; 16, ggj=(rgb &gt;&gt; 8) &amp; 0xFF, bbj=rgb &amp; 0xFF&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;pR=(ddr=rrj-rri)/4+rri, pG=(ddg=ggj-ggi)/4+ggi, pB=(ddb=bbj-bbi)/4+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!°&quot;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Set /a &quot;pR=ddr/2+rri, pG=ddg/2+ggi, pB=ddb/2+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!±&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a cont+=1<br />&nbsp; &nbsp;&nbsp; &nbsp;Set /a &quot;pR=ddr*3/4+rri, pG=ddg*3/4+ggi, pB=ddb*3/4+bbi&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;call :RGBHex<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;z!cont!=!bg!!fg!²&quot;<br /><br />&nbsp; &nbsp;)<br />&nbsp; )<br /><br />&nbsp; set pal16_4.size=!cont!<br /><br />&nbsp; for /L %%i in (0,1,15) do set &quot;p16&#91;%%i&#93;=&quot; <br /><br /><br />&nbsp; :: Demo of colors. <br /><br />&nbsp; set /a v=1, st1=32*v, st2=16*v, mst2=-st2, mst1=-st1<br /><br />&nbsp; for /L %%b in (0,!st1!,256) do (<br />&nbsp; &nbsp;for /L %%i in (256,!mst2!,0) do call :plot 0 %%i %%b<br />&nbsp; &nbsp;echo(<br />&nbsp; )<br /><br />&nbsp; for /L %%r in (0,!st1!,256) do (<br />&nbsp; &nbsp;for /L %%i in (256,!mst2!,0) do call :plot %%r %%i 255<br />&nbsp; &nbsp;for /L %%b in (256,!mst2!,0) do call :plot %%r 0 %%b<br />&nbsp; &nbsp;for /L %%g in (0,!st2!,256) do call :plot %%r %%g 0<br />&nbsp; &nbsp;for /L %%i in (0,!st2!,256) do call :plot %%r 255 %%i<br />&nbsp; &nbsp;echo(<br />&nbsp; )<br />&nbsp; for /L %%b in (256,!mst1!,0) do (<br />&nbsp; &nbsp;for /L %%g in (256,!mst2!,0) do call :plot 255 %%g %%b<br />&nbsp; &nbsp;echo(<br />&nbsp; )<br /><br />&nbsp; popd<br />&nbsp; pause<br /><br />exit /b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:plot R G B<br />&nbsp; set /a &quot;AArt=%1, AAgt=%2, AAbt=%3&quot;<br />&nbsp; set /a dm=256*256*256, fg=-1, bg=-1, ind=-1<br /><br />&nbsp; For /L %%i in (0,1,!pal16_4.size!) do (<br /><br />&nbsp; &nbsp;set /a &quot;AAArgb=0x!pRGB%%i!, d=(AArt-(AAArgb &gt;&gt; 16))*(AArt-(AAArgb &gt;&gt; 16))+(AAgt-((AAArgb &gt;&gt; 8) &amp; 0xFF))*(AAgt-((AAArgb &gt;&gt; 8) &amp; 0xFF))+(AAbt-(AAArgb &amp; 0xFF))*(AAbt-(AAArgb &amp; 0xFF))&quot;<br /><br />&nbsp; &nbsp;if !dm! gtr !d! set /a dm=d, ind=%%i<br />&nbsp; )<br /><br />&nbsp; for %%i in (!ind!) do (<br />&nbsp; &nbsp;set bg=!z%%i:~0,1!<br />&nbsp; &nbsp;set fg=!z%%i:~1,1!<br />&nbsp; &nbsp;set &quot;char=!z%%i:~2,1!&quot;<br />&nbsp; )<br /><br />&nbsp; rem Carlos color version 23c. Use for compatibilty with XP<br />&nbsp; rem call :color !bg!!fg! &quot;!char!&quot;<br /><br />&nbsp; rem jeb version don't work :(<br />&nbsp; rem call :color_jeb !bg!!fg! &quot;!char!&quot;<br /><br />&nbsp; rem Fast color<br />&nbsp; &gt; colorPrint.txt (echo !char!\..\') &amp;&amp; findstr /a:!bg!!fg! /f:colorPrint.txt &quot;.&quot;<br /><br />exit/b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:RGBhex<br /><br />set /a &quot;d=pR&amp;15,pR&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pR!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB=!HH!!LH!<br /><br />set /a &quot;d=pG&amp;15,pG&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pG!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB=!pRGB!!HH!!LH!<br /><br />set /a &quot;d=pB&amp;15,pB&gt;&gt;=4&quot;<br />for %%D in (!d!) do set &quot;LH=!map:~%%D,1!&quot;<br />for %%D in (!pB!) do set &quot;HH=!map:~%%D,1!&quot;<br /><br />set pRGB!cont!=!pRGB!!HH!!LH!<br /><br />exit/b<br /><br />:::::::::::::::::::::::::::::::::::::::::::<br />:color_jeb<br />set &quot;param=^%~2&quot; !<br />set &quot;param=!param:&quot;=\&quot;!&quot;<br />findstr /p /A:%1 &quot;.&quot; &quot;!param!\..\X&quot; nul<br />&lt;nul set /p &quot;.=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%&quot;<br />exit /b<br /><br /></code></pre></div><br /><br />result:<br /><img src="../../s27.postimg.org/un41nozgj/ColorsRGB.png" class="postimage" alt="Image" /><br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>10 Apr 2016 10:49</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content"><blockquote><div><cite>foxidrive wrote:</cite>Nice!   That's so impressive, when back many years ago it would have been considered impossible.<br /><br />Others have done nice work that I've noticed with colour too, real purdy.</div></blockquote><br /><br />Thanks foxidrive,<br />do you have code, links ?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: And now dos batch color secrets?</h3>
				<div class="date">Posted: <strong>10 Apr 2016 13:11</strong></div>
				<div class="author">by <strong>foxidrive</strong></div>
				<div class="content">I can hardly remember my own name einstein! <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />I pretty sure Antonio was doing some work on it, and now I'm put on the spot I can't recall stuff.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>2</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=6839&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:24:06 GMT -->
</html>
