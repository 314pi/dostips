<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=6744&p=43737 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:51:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Definition and use of arithmetic &quot;functions&quot; in Batch files - DosTips.com</title>


	<link rel="canonical" href="viewtopice6f6.html?t=6744">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic210e.html?f=3&amp;t=6744">Definition and use of arithmetic &quot;functions&quot; in Batch files</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="postingb7dd.html?mode=reply&amp;f=3&amp;t=6744" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic4d19.html?f=3&amp;t=6744&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="6744" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			27 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopicc94a.html?f=3&amp;t=6744&amp;start=15" role="button">2</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopicc94a.html?f=3&amp;t=6744&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p43622" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43622">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43622">

						<h3 class="first"><a href="#p43622">Definition and use of arithmetic &quot;functions&quot; in Batch files</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge00c.html?mode=quote&amp;f=3&amp;p=43622" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic4015.html?p=43622#p43622" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopic4015.html?p=43622#p43622" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>26 Oct 2015 21:16
			</p>
			
			
			
			<div class="content">In this thread I present a method that allows to use arithmetic expressions in Batch files in a way rather similar to arithmetic functions of other programming languages. Let's start with a &quot;:Rand x result&quot; subroutine that in regular Batch code would be written this way:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:Rand x result<br />set /A %2=%1 * %random% / 32768 + 1<br />exit /B<br /></code></pre></div><br />... and used this way:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>call :Rand 25 num<br />echo Random number between 1 and 25: %num%<br /></code></pre></div><br />This code can be converted into a &quot;function&quot; via a variable with &quot;function(arg)&quot; name and the arithmetic expression that calculate the result as value. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=x * ^!random^! / 32768 + 1<br /></code></pre></div><br />To invoke this &quot;function&quot;, you should use this format:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set /A num=%Rand(x):x=25%<br />echo Random number between 1 and 25: %num%<br /></code></pre></div><br />Although this example seems to be practically the same than previous one, the function method run faster because it does not require CALL command. Besides, a &quot;function&quot; called this way may work as a true function, so it may be placed into a larger expression and the parameter may be an arithmetic expression. To successfully achieve these points, just enclose in parentheses the whole expression and the parameter. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=( (x)*^!random^!/32768+1 )&quot;<br /><br />set /A num=%Rand(x):x=5*6% + 10<br />echo Random number between 11 and 40: %num%<br /></code></pre></div><br />Below there are two simple function examples: Sign function returns -1 if the argument is negative, and 1 otherwise; Abs function use the sign of the argument to get its absolute value.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Sign(x)=((x)&gt;&gt;31|1)&quot;<br />set &quot;Abs(x)=(((x)&gt;&gt;31|1)*(x))&quot;<br /></code></pre></div><br />An important feature in the definition of these functions is the comma operator that allows to perform a series of partial calculations with different variables and use they in the final calculation. For example, Abs function may be defined as shown below; if it is called with a large expression, the argument is evaluated just once:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Abs(x)=(a=(x), (a&gt;&gt;31|1)*a)<br /></code></pre></div><br />There are several tricks that allows to use additional features in the definition of a function. For example, the value of &quot;a-123&quot; is positive or zero if &quot;a&quot; is greater or equal 123, so &quot;((a-123)&gt;&gt;31)+1&quot; subexpression is 1 if &quot;a&quot; is greater or equal 123 and 0 otherwise. This method allows to implement an if-then-else feature equivalent to C++ &quot;?:&quot; conditional operator via a large expression comprised of three parts: previous subexpression (that we may call &quot;condition&quot;), the &quot;then&quot; value multiplied by the condition and the &quot;else&quot; value multiplied by the NOT condition, and add the two last parts.<br /><br />In the manipulation of the 0 and 1 values returned by conditions the multiplication may work as AND boolean operator, addition may work as OR, and exclamation-mark works as NOT. The expression &quot;!!value&quot; is 0 if &quot;value&quot; is 0 and is 1 otherwise, so it may be used to reduce several values accumulated by addition operator (OR) into a single 1. You may also use &quot;&amp;&quot;, &quot;|&quot; and &quot;^&quot; bitwise operators for AND, OR and XOR boolean operators, respectively, that directly gives proper results when the values are 0 or 1.<br /><br />The Max function below get the maximum of two values. We can use one parameter only, so we need to place the other value in a variable:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>REM&nbsp; Max1(x)=&nbsp; if (x geq y)&nbsp; then x&nbsp; &nbsp; else y<br />set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />set /P &quot;pair=Enter two numbers separated by space: &quot;<br />for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />set /A &quot;y=b, max=%Max1(x):x=a%&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// or: set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br />echo The max is: %max%<br /></code></pre></div><br />Note that it is necessary to escape the exclamation-mark (NOT operator) with three carets if delayed expansion is enabled when the function is defined.<br /><br />In certain cases we can <em class="text-italics">simulate</em> two arguments in a function if algebraic manipulations allows it; this depends on the specific formula used in the calculation. The function below is the Max function with two arguments:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Max(x,y)=( ?=((x,y)&gt;&gt;31)+1, ?*(2*x,y-(x,y)) + ^^^!?*(x,y-(x,y*2)) )&quot;<br /></code></pre></div><br />In this case we insert the missing subtraction operation in the invocation itself:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set /A &quot;max=%Max(x,y):x,y=one-two%&quot;<br />echo The max of %one% and %two% is: %max%<br /></code></pre></div><br />The explanation of this code &quot;is obvious&quot; (as jeb would say! <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> ), just use a little basic algebra... Note that in Batch files, differently than in other languages, the same name may be used in both a variable and a function (of course, the explanation is that &quot;name&quot; and &quot;name(x)&quot; are <em class="text-italics">different variables</em>).<br /><br />The conversion functions from HHMMSSCC time to centiseconds and viceversa are straightforward:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;HMSCtoCSec(HMSC)=( a=(HMSC), h=a/1000000, a%%=1000000, m=a/10000, a%%=10000, s=a/100, c=a%%100, ((h*60+m)*60+s)*100+c )&quot;<br />set &quot;CSecToHMSC(CSec)=( a=(CSec), c=a%%100, a/=100, s=a%%3600, a/=3600, m=a%%60, h=a/60, h*1000000+m*10000+s*100+c )&quot;<br /><br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;startTime=%%a%%b%%c%%d&quot;<br />place here any process<br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;endTime=%%a%%b%%c%%d&quot;<br />set /A &quot;elapsed=%TimeToCSec(HMSC):HMSC=endTime% - %TimeToCSec(HMSC):HMSC=startTime%&quot;<br />echo Elapsed time: %elapsed:~0,-2%.%elapsed:~-2% seconds<br /></code></pre></div><br />The conversion functions from YYYYMMDD date to Julian Day Number and viceversa are very useful. You may review the original Batch code for these functions <a href="viewtopic6565.html?f=3&amp;t=4423&amp;p=25040#p25040" class="postlink">here</a>.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;DateToJDN(YMD)=( a=(YMD), y=a/10000, a%%=10000, m=a/100, d=a%%100, a=(m-14)/12, (1461*(y+4800+a))/4+(367*(m-2-12*a))/12-(3*((y+4900+a)/100))/4+d-32075 )&quot;<br />set &quot;JDNtoDate(JDN)=( a=(JDN), l=a+68569,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,d=l-(2447*j)/80,l=j/11,m=j+2-(12*l),y=100*(n-49)+i+l,y*10000+m*100+d )&quot;<br /><br />set /P &quot;otherDate=Enter a date in YYYY/MM/DD format: &quot;<br />for /F &quot;tokens=1-3 delims=/&quot; %%a in (&quot;%date%&quot;) do set &quot;today=%%c%%a%%b&quot;<br />set /A &quot;days=%DateToJDN(YMD):YMD=today% - %DateToJDN(YMD):YMD=!otherDate:/=!%&quot;<br />echo/<br />echo There are %days% days between that date and today<br /></code></pre></div><br />Below there is a complete Batch file that includes all previous examples, so you don't need to copy each one of they in order to test them.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />rem Definition and use of arithmetic &quot;functions&quot; in Batch files<br />rem http://www.dostips.com/forum/viewtopic.php?f=3&amp;t=6744<br />rem Antonio Perez Ayala<br /><br /><br />:: Define Rand(x) function<br />set &quot;Rand(x)=x * ^!random^! / 32768 + 1&quot;<br /><br />:: Use Rand(x) function<br />set /A num=%Rand(x):x=25%<br />echo Random number between 1 and 25: %num%<br /><br /><br />:: Define Rand(x) to be used as a true function<br />set &quot;Rand(x)=( (x)*!random!/32768+1 )&quot;<br />set /A num=%Rand(x):x=5*6% + 10<br />echo Random number between 11 and 40: %num%<br /><br /><br />:: Define Max1(x) function with one parameter and one variable<br />REM&nbsp; Max1(x)=&nbsp; if (x geq y)&nbsp; then x&nbsp; &nbsp; else y<br />set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />echo/<br />echo Max1(x) function test<br />:nextPair1<br />&nbsp; &nbsp;set &quot;pair=&quot;<br />&nbsp; &nbsp;set /P &quot;pair=Enter two numbers separated by space: &quot;<br />&nbsp; &nbsp;if not defined pair goto endPair1<br />&nbsp; &nbsp;for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />&nbsp; &nbsp;set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br />&nbsp; &nbsp;echo The max is: %max%<br />goto nextPair1<br />:endPair1<br /><br /><br />:: Define Max(x,y) and Min(x,y) functions with two parameters<br />set &quot;Max(x,y)=( ?=((x,y)&gt;&gt;31)+1, ?*(2*x,y-(x,y)) + ^^^!?*(x,y-(x,y*2)) )&quot;<br />set &quot;Min(x,y)=( ?=((x,y)&gt;&gt;31)+1, ?*(x,y-(x,y*2)) + ^^^!?*(2*x,y-(x,y)) )&quot;<br /><br />echo/<br />echo Max(x,y) function test<br />:nextPair<br />&nbsp; &nbsp;set &quot;pair=&quot;<br />&nbsp; &nbsp;set /P &quot;pair=Enter two numbers separated by space: &quot;<br />&nbsp; &nbsp;if not defined pair goto endPair<br />&nbsp; &nbsp;for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />&nbsp; &nbsp;set /A &quot;max=%Max(x,y):x,y=a-b%&quot;<br />&nbsp; &nbsp;echo The max is: %max%<br />goto nextPair<br />:endPair<br /><br /><br />:: Define HHMMSSCC time to centiseconds conversion function and viceversa<br /><br />set &quot;TimeToCSec(HMSC)=( a=(HMSC), h=a/1000000, a%%=1000000, m=a/10000, a%%=10000, s=a/100, c=a%%100, ((h*60+m)*60+s)*100+c )&quot;<br />set &quot;CSecToTime(CSec)=( a=(CSec), c=a%%100, a/=100, s=a%%60, a/=60, m=a%%60, h=a/60, h*1000000+m*10000+s*100+c )&quot;<br /><br /><br />:: Define YYYYMMDD date to Julian Day Number conversion function and viceversa<br /><br />set &quot;DateToJDN(YMD)=( a=(YMD), y=a/10000, a%%=10000, m=a/100, d=a%%100, a=(m-14)/12, (1461*(y+4800+a))/4+(367*(m-2-12*a))/12-(3*((y+4900+a)/100))/4+d-32075 )&quot;<br />set &quot;JDNtoDate(JDN)=( a=(JDN), l=a+68569,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,d=l-(2447*j)/80,l=j/11,m=j+2-(12*l),y=100*(n-49)+i+l,y*10000+m*100+d )&quot;<br /><br /><br />echo/<br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;startTime=%%a%%b%%c%%d&quot;<br />set /P &quot;birthDate=Enter your birthdate in YYYY/MM/DD format: &quot;<br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;endTime=%%a%%b%%c%%d&quot;<br />set /A &quot;elapsed=%TimeToCSec(HMSC):HMSC=endTime% - %TimeToCSec(HMSC):HMSC=startTime%&quot;<br />echo/<br />echo You took %elapsed:~0,-2%.%elapsed:~-2% seconds to enter previous line<br /><br />REM As usual, you must adjust the next line accordingly to your locale date format<br />for /F &quot;tokens=1-3 delims=/&quot; %%a in (&quot;%date%&quot;) do set &quot;today=%%c%%a%%b&quot;<br />set /A &quot;total=%DateToJDN(YMD):YMD=today% - %DateToJDN(YMD):YMD=!birthDate:/=!%, a=total*100, years=a/36525, a%%=36525, months=a/3060, days=(a%%3060)/100&quot;<br />echo/<br />echo You are %total% days old (%years% years, %months% months and %days% days approx.)<br /></code></pre></div><br />Enjoy it! <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43624" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile43624">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist8bd9.html?mode=viewprofile&amp;u=6223" class="username">OperatorGK</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search810d.html?author_id=6223&amp;sr=posts">66</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 13 Jan 2015 06:55</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content43624">

						<h3 ><a href="#p43624">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting14c9.html?mode=quote&amp;f=3&amp;p=43624" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0582.html?p=43624#p43624" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopic0582.html?p=43624#p43624" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist8bd9.html?mode=viewprofile&amp;u=6223" class="username">OperatorGK</a></strong> &raquo; </span>27 Oct 2015 01:15
			</p>
			
			
			
			<div class="content">Can they be nested?</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43625" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43625">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43625">

						<h3 ><a href="#p43625">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingfa71.html?mode=quote&amp;f=3&amp;p=43625" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic6522.html?p=43625#p43625" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopic6522.html?p=43625#p43625" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>27 Oct 2015 05:41
			</p>
			
			
			
			<div class="content">Nice!</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43628" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile43628">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1322.html?author_id=2988&amp;sr=posts">3970</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Dec 2011 13:59</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content43628">

						<h3 ><a href="#p43628">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge973.html?mode=quote&amp;f=3&amp;p=43628" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0488.html?p=43628#p43628" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopic0488.html?p=43628#p43628" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a></strong> &raquo; </span>27 Oct 2015 06:43
			</p>
			
			
			
			<div class="content">I have gotten confused enough trying to interpret all the threads about Macros. Is this not essentially a Macro and not a function?  At least that was my understanding of the definition from reading all those threads.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43629" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43629">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search73f1.html?author_id=417&amp;sr=posts">880</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 30 Aug 2007 08:05</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany, Bochum</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43629">

						<h3 ><a href="#p43629">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting550b.html?mode=quote&amp;f=3&amp;p=43629" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic4175.html?p=43629#p43629" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopic4175.html?p=43629#p43629" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a></strong> &raquo; </span>27 Oct 2015 06:46
			</p>
			
			
			
			<div class="content">@Aacini<br /><br />Cool stuff  <img class="smilies" src="images/smilies/icon_surprised.gif" alt=":o" title="Surprised" /> <br />Your solution looks so easy (nearly obvious  <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> ), I wonder why nobody developed it before. <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br /><blockquote><div><cite>OperatorGK wrote:</cite>Can they be nested?<br /></div></blockquote><br />I think that isn't possible, as you need to use the variable replace syntax.<br />You could use at best percent and delayed expansion to nest one function into another one, but not more.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43636" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile43636">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistea39.html?mode=viewprofile&amp;u=6104" class="username">Jer</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search0ee9.html?author_id=6104&amp;sr=posts">134</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Nov 2014 17:13</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> California USA</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43636">

						<h3 ><a href="#p43636">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting73a2.html?mode=quote&amp;f=3&amp;p=43636" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic437e.html?p=43636#p43636" onclick="prompt('Message #6',this.href); return false;">#6</a></span> 
									<a class="unread" href="viewtopic437e.html?p=43636#p43636" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistea39.html?mode=viewprofile&amp;u=6104" class="username">Jer</a></strong> &raquo; </span>27 Oct 2015 19:37
			</p>
			
			
			
			<div class="content">Any idea why I get the missing operand error?<br />My O/S is Window 7 32-bit<br /><br /><blockquote class="uncited"><div>C:\Temp&gt;Setlocal EnableDelayedExpansion<br /><br />C:\Temp&gt;REM  Max1(x)=  if (x geq y)  then x    else y<br /><br />C:\Temp&gt;set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />C:\Temp&gt;set /P &quot;pair=Enter two numbers separated by space: &quot;<br />Enter two numbers separated by space: 50 100<br /><br />C:\Temp&gt;for /F &quot;tokens=1,2&quot; %a in (&quot;50 100&quot;) do set /A &quot;a=%a, b=%b&quot;<br /><br />C:\Temp&gt;set /A &quot;a=50, b=100&quot;<br /><br />C:\Temp&gt;set /A &quot;y=b, max=( ?=((a-y)&gt;&gt;31)+1, ?*a + ^!?*y )&quot;         // or: set /A &quot;max=(y=b, ( ?=(<br />)+1, ?*a + ^!?*y ))&quot;<br />Missing operand.<br /><br />C:\Temp&gt;echo The max is:<br />The max is:<br /><br />C:\Temp&gt;endlocal<br />C:\Temp&gt;<br /></div></blockquote><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@Echo On<br />Setlocal EnableDelayedExpansion<br />REM&nbsp; Max1(x)=&nbsp; if (x geq y)&nbsp; then x&nbsp; &nbsp; else y<br />set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />set /P &quot;pair=Enter two numbers separated by space: &quot;<br />for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />set /A &quot;y=b, max=%Max1(x):x=a%&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// or: set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br />echo The max is: %max%<br />endlocal<br /></code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43639" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43639">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43639">

						<h3 ><a href="#p43639">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2326.html?mode=quote&amp;f=3&amp;p=43639" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicccf8.html?p=43639#p43639" onclick="prompt('Message #7',this.href); return false;">#7</a></span> 
									<a class="unread" href="viewtopicccf8.html?p=43639#p43639" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>28 Oct 2015 03:42
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Jer wrote:</cite>Any idea why I get the missing operand error?</div></blockquote><blockquote><div><cite>Jer wrote:</cite>set /A &quot;y=b, max=%Max1(x):x=a%&quot;         // or: set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br /></div></blockquote>The &quot;//&quot; part causes this issue, because the slash ('/') is an operator (division).<br />If you use it an operand is expected (here: divisor) but not present (a second divison operator follows.<br /><br />It's a flaw in Aacini's how-to-use-code (probably because &quot;//&quot; is an c-style comment):<br />Just replace the &quot;//&quot; with &quot;&amp; rem&quot; and it should work.<br /><br /><blockquote><div><cite>Aacini wrote:</cite>We can use one parameter only, so we need to place the other value in a variable</div></blockquote>You could also assign more than one variable if yoiu replace an unused one:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br />rem setup formula<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem simulate parameters using variables<br />set /A &quot;x=2, y=3, z=4, sum=%sum(x,y,z)%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem one parameter and some variables<br />set /A &quot;x=3, y=4, sum=%sum(x,y,z):&#91;&#93;=z=5%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem of course the order is not important<br />set /A &quot;y=5, sum=%sum(x,y,z):&#91;&#93;=z=6,x=4%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />endlocal<br /></code></pre></div>This initialization is of advantage especially if the name of one variable is contained in another (example: &quot;x&quot; and &quot;dx&quot;).<br />The doublequotes are important, if you access the formula because the brackets (&quot;[]&quot;) are special characters and should be treated as one variable, but you could also use any other.<br /><br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43657" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile43657">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistaaaf.html?mode=viewprofile&amp;u=2556" class="username">trebor68</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a30.html?author_id=2556&amp;sr=posts">146</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 01 Jul 2011 08:47</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content43657">

						<h3 ><a href="#p43657">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting39b5.html?mode=quote&amp;f=3&amp;p=43657" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicda32.html?p=43657#p43657" onclick="prompt('Message #8',this.href); return false;">#8</a></span> 
									<a class="unread" href="viewtopicda32.html?p=43657#p43657" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistaaaf.html?mode=viewprofile&amp;u=2556" class="username">trebor68</a></strong> &raquo; </span>28 Oct 2015 18:38
			</p>
			
			
			
			<div class="content">The Sign fuction is defineted:<br />Value <span style="color: #FF0000">x &lt; 0</span> is <span style="color: #408000">Sgn(x) = -1</span><br />Value <span style="color: #FF0000">x = 0</span> is <span style="color: #408000">Sgn(x) = 0</span><br />Value <span style="color: #FF0000">x &gt; 0</span> is <span style="color: #408000">Sgn(x) = 1</span><br /><br />See also: <a href="https://en.wikipedia.org/wiki/Sign_function" class="postlink">https://en.wikipedia.org/wiki/Sign_function</a><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>D:\CMDVerz&gt;set /a a=32,&quot;(a&gt;&gt;31)+!(a&gt;&gt;31)*!!a&quot;<br />1<br />D:\CMDVerz&gt;set /a a=0,&quot;(a&gt;&gt;31)+!(a&gt;&gt;31)*!!a&quot;<br />0<br />D:\CMDVerz&gt;set /a a=-32,&quot;(a&gt;&gt;31)+!(a&gt;&gt;31)*!!a&quot;<br />-1<br />D:\CMDVerz&gt;</code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43658" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43658">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43658">

						<h3 ><a href="#p43658">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6584.html?mode=quote&amp;f=3&amp;p=43658" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic9986.html?p=43658#p43658" onclick="prompt('Message #9',this.href); return false;">#9</a></span> 
									<a class="unread" href="viewtopic9986.html?p=43658#p43658" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>28 Oct 2015 19:06
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>trebor68 wrote:</cite>The Sign fuction is defineted:<br />Value <span style="color: #FF0000">x &lt; 0</span> is <span style="color: #408000">Sgn(x) = -1</span><br />Value <span style="color: #FF0000">x = 0</span> is <span style="color: #408000">Sgn(x) = 0</span><br />Value <span style="color: #FF0000">x &gt; 0</span> is <span style="color: #408000">Sgn(x) = 1</span><br /><br /></div></blockquote><br />Yes. Strictly speaking, you are right. However, the Sign function was one of the first ones in my description, so I did not wanted to insert additional complications in my description so early...<br /><br />The Sign function may be written in a slightly simpler way, and you may use a &quot;function&quot; directly at the command line:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\&gt; set &quot;Sign(a)=(a&gt;&gt;31|1)*!!a&quot;<br /><br />C:\&gt; set /A &quot;%Sign(a):a=32%&quot;<br />1<br />C:\&gt; set /A &quot;%Sign(a):a=0%&quot;<br />0<br />C:\&gt; set /A &quot;%Sign(a):a=-32%&quot;<br />-1<br /></code></pre></div><br />You may review a practical use of the original formula (not correct, but reduced form) of Sign function at <a href="viewtopic9cc5.html?f=3&amp;t=5594&amp;p=43637#p43637" class="postlink">this post</a>.<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43674" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile43674">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist1513.html?mode=viewprofile&amp;u=4964" class="username">Samir</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchd50c.html?author_id=4964&amp;sr=posts">341</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 16 Jul 2013 12:00</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> HSV</dd>
							
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Samir">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Samir</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.huntsvillecarscene.com/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content43674">

						<h3 ><a href="#p43674">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingbd96.html?mode=quote&amp;f=3&amp;p=43674" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic26b1-2.html?p=43674#p43674" onclick="prompt('Message #10',this.href); return false;">#10</a></span> 
									<a class="unread" href="viewtopic26b1-2.html?p=43674#p43674" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist1513.html?mode=viewprofile&amp;u=4964" class="username">Samir</a></strong> &raquo; </span>30 Oct 2015 10:27
			</p>
			
			
			
			<div class="content">Simple amazing.  I study your post like I used to study my C book in college.  Thank you for sharing!</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43737" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43737">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43737">

						<h3 ><a href="#p43737">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting80fa.html?mode=quote&amp;f=3&amp;p=43737" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic7d73.html?p=43737#p43737" onclick="prompt('Message #11',this.href); return false;">#11</a></span> 
									<a class="unread" href="viewtopic7d73.html?p=43737#p43737" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>31 Oct 2015 14:38
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Squashman wrote:</cite>I have gotten confused enough trying to interpret all the threads about Macros. Is this not essentially a Macro and not a function? At least that was my understanding of the definition from reading all those threads.<br /></div></blockquote><br />Well, strictly speaking <em class="text-italics">all expansions</em> of variables that contain code instead of data are macros! However, these ones have an unique feature not used before in any type of macro: the ability to take parameters in a way equivalent to real functions in other programming languages; that is the main reason I call them &quot;functions&quot;.<br /><br /><br /><br /><blockquote><div><cite>jeb wrote:</cite><blockquote><div><cite>OperatorGK wrote:</cite>Can they be nested?</div></blockquote><br /><br />I think that isn't possible, as you need to use the variable replace syntax.<br />You could use at best percent and delayed expansion to nest one function into another one, but not more.<br /></div></blockquote><br />Yes, jeb; here it is an example of a <em class="text-italics">two-level nesting functions</em> based on %double !expansion!%:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />:: Define YYYYMMDD date to Julian Day Number conversion function and viceversa<br /><br />set &quot;DateToJDN(YMD)=( a=(YMD), y=a/10000, a%%=10000, m=a/100, d=a%%100, a=(m-14)/12, (1461*(y+4800+a))/4+(367*(m-2-12*a))/12-(3*((y+4900+a)/100))/4+d-32075 )&quot;<br />set &quot;JDNtoDate(JDN)=( a=(JDN), l=a+68569,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,d=l-(2447*j)/80,l=j/11,m=j+2-(12*l),y=100*(n-49)+i+l,y*10000+m*100+d )&quot;<br /><br />echo/<br />echo Two-level nesting function test<br />rem Adjust next line for your locale date format<br />for /F &quot;tokens=1-3 delims=/&quot; %%a in (&quot;%date%&quot;) do (<br />&nbsp; &nbsp; set &quot;today=%%c%%b%%a&quot;<br />&nbsp; &nbsp; echo Today is %%c/%%b/%%a in YYYY/MM/DD format<br />)<br />:nextDays<br />&nbsp; &nbsp;echo/<br />&nbsp; &nbsp;set &quot;days=&quot;<br />&nbsp; &nbsp;set /P &quot;days=Enter a number of days: &quot;<br />&nbsp; &nbsp;if not defined days goto endDays<br />&nbsp; &nbsp;rem&nbsp; &nbsp; &nbsp;newDate =&nbsp; JDNtoDate(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DateToJDN(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;today) + days )<br />&nbsp; &nbsp;set /A &quot;newDate = %JDNtoDate(JDN):JDN= !DateToJDN(YMD):YMD=today! + days %&quot;<br />&nbsp; &nbsp;echo Today + %days% days = %newDate:~0,4%/%newDate:~4,2%/%newDate:~6,2%<br />goto nextDays<br />:endDays<br /></code></pre></div><br />However, you may also have several expansion levels using multiple call commands and duplicating the number of percent signs in each nesting function, although the result may look somewhat confusing! The program below is just an example of this technique, with no usefulness at all:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br /><br />rem Define a function that works as an operator<br />set &quot;OP(x,y)=(x,y)&quot;<br /><br />rem result =&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10+20) * (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 30+40)&nbsp; )&nbsp; -&nbsp; 100&nbsp; &nbsp; &nbsp; )<br />rem operators per function:&nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+<br />CALL CALL set /A result=%%%%OP(x,y):x,y=&nbsp; &nbsp;%%OP(x,y):x,y= %OP(x,y):x,y=10+20% * %OP(x,y):x,y=30+40% %%&nbsp; -&nbsp; 100&nbsp; &nbsp;%%%%<br /><br />echo Result = %result%<br /></code></pre></div><br /><br /><br /><br /><br /><br /><blockquote><div><cite>penpen wrote:</cite><blockquote><div><cite>Aacini wrote:</cite>We can use one parameter only, so we need to place the other value in a variable</div></blockquote><br />You could also assign more than one variable if yoiu replace an unused one:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br /><br />rem setup formula<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem simulate parameters using variables<br />set /A &quot;x=2, y=3, z=4, sum=%sum(x,y,z)%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem one parameter and some variables<br />set /A &quot;x=3, y=4, sum=%sum(x,y,z):&#91;&#93;=z=5%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem of course the order is not important<br />set /A &quot;y=5, sum=%sum(x,y,z):&#91;&#93;=z=6,x=4%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /></code></pre></div><br /></div></blockquote><br />Wow! This is the type of details I love about a new development: that it may serve as base for new developments! Although your example is interesting, there is a fundamental concept missing on it: the <em class="text-italics">parameter</em>. As I said in my answer to Squashman, the keypoint that makes these &quot;functions&quot; unique are its ability to take parameters in a way equivalent to functions in other programming languages. In your example the &quot;parameters&quot; are totally useless because the same behavior and result may be obtained with less, more of different named parameters in the definition, or with no parameters at all. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>rem setup formula with 3 &quot;parameters&quot;<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo 3 parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with no parameters<br />set &quot;sum()=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum():&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo No parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with whichever parameters<br />set &quot;sum(O,PQ,RST,UVWXYZ)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum(O,PQ,RST,UVWXYZ):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo Whichever parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /></code></pre></div><br />The method you used to assign the value to the &quot;parameters&quot; <em class="text-italics">before</em> invoke the function may suggest another way to use this feature. For example, instead of define a function with a fixed formula that process the values of changing parameters, we could define a formula over fixed variables (&quot;pseudo-parameters&quot;) and change <em class="text-italics">the operations</em> in the formula via the <em class="text-italics">real</em> parameters. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>rem Define a general-purpose function with 4 &quot;pseudo-parameters&quot;:<br />set &quot;accum4(x,y,z,t)=x,y,z,t&quot;<br /><br />set /A &quot;x=2,y=4,z=6,t=8, sum=%accum4(x,y,z,t):,=+%&quot;<br />echo The sum of %x%+%y%+%z%+%t% is %sum%<br /><br />set /A &quot;x=2,y=4,z=6,t=8, prod=%accum4(x,y,z,t):,=*%&quot;<br />echo The product of %x%*%y%*%z%*%t% is %prod%<br /></code></pre></div><br />However, this method is just an interesting curiosity that have not practical use...<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43746" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile43746">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43746">

						<h3 ><a href="#p43746">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting4d6f.html?mode=quote&amp;f=3&amp;p=43746" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopiccbe6.html?p=43746#p43746" onclick="prompt('Message #12',this.href); return false;">#12</a></span> 
									<a class="unread" href="viewtopiccbe6.html?p=43746#p43746" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>31 Oct 2015 17:30
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Aacini wrote:</cite>the keypoint that makes these &quot;functions&quot; unique are its ability to take parameters in a way equivalent to functions in other programming languages. In your example the &quot;parameters&quot; are totally useless because the same behavior and result may be obtained with less, more of different named parameters in the definition, or with no parameters at all. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>rem setup formula with 3 &quot;parameters&quot;<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo 3 parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with no parameters<br />set &quot;sum()=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum():&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo No parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with whichever parameters<br />set &quot;sum(O,PQ,RST,UVWXYZ)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum(O,PQ,RST,UVWXYZ):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo Whichever parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;</code></pre></div></div></blockquote><br />I don't understand... .<br />I fear i miss your keypoint.<br /><br />The name of any variable is never part of its content.<br />That is also true for all your functions (example):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=x * ^!random^! / 32768 + 1&quot;<br />set /A num=%Rand(x):x=25%<br />echo %num%<br /><br />set &quot;Rand()=x * ^!random^! / 32768 + 1&quot;<br />set /A num=%Rand():x=25%<br />echo %num%<br /><br />set &quot;Rand(OPQ)=x * ^!random^! / 32768 + 1&quot;<br />set /A num=%Rand(OPQ):x=25%<br />echo %num%<br /></code></pre></div><br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43748" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43748">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43748">

						<h3 ><a href="#p43748">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd788.html?mode=quote&amp;f=3&amp;p=43748" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic406d.html?p=43748#p43748" onclick="prompt('Message #13',this.href); return false;">#13</a></span> 
									<a class="unread" href="viewtopic406d.html?p=43748#p43748" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>31 Oct 2015 23:54
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>penpen wrote:</cite>I don't understand... .<br />I fear i miss your keypoint.<br /></div></blockquote><br /><br />Well, perhaps would be convenient to review what I said about this point:<br /><blockquote><div><cite>on <!-- l --><a class="postlink-local" href="viewtopicdcab.html?f=3&amp;t=6744&amp;p=43622#p43622">viewtopic.php?f=3&amp;t=6744&amp;p=43622#p43622</a><!-- l --> Aacini wrote:</cite>In this thread I present a method that allows to use arithmetic expressions in Batch files <strong class="text-strong">in a way rather similar to arithmetic functions of other programming languages</strong>.<br /></div></blockquote><br /><blockquote><div><cite>on <!-- l --><a class="postlink-local" href="viewtopic5ed9.html?f=3&amp;t=6744&amp;p=43737#p43737">viewtopic.php?f=3&amp;t=6744&amp;p=43737#p43737</a><!-- l --> Aacini wrote:</cite>... these ones have an unique feature not used before in any type of macro: the ability to take parameters <strong class="text-strong">in a way equivalent to real functions in other programming languages</strong>.<br /></div></blockquote><br />The purpose of this thread is not to perform arithmetic operations in an &quot;advanced&quot;, &quot;complex&quot; or just different way. The purpose is to write and execute arithmetic &quot;functions&quot; <strong class="text-strong">in a more standard way</strong> that may be comprehended by a larger group of people.<br /><br />I think the next lines are clear enough to be understood by most programmers even if they know nothing about Batch files:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=x * ^!random^! / 32768 + 1<br /><br />set /A num=%Rand(x):x=25%<br /></code></pre></div><br />The format of the definition is entirely standard: &quot;function(arg) as name and the arithmetic expression that calculate the result as value&quot; with the argument of the function included in the expression.<br /><br />The invocation is a little bit tricky <em class="text-italics">when compared vs. the standard format</em>: the value of the parameter is not placed in parentheses, but the original argument is repeated and its value is &quot;assigned&quot; after the colon. However, IMO this method would still be understood by many programmers with no additional or very little explanation (<em class="text-italics">&quot;Execute Rand(x) with x=25&quot;</em>).<br /><br />Now, let's review the first of your examples:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br /></code></pre></div><br />I invite you to try to explain this code to someone that does not know Batch files! Even an experienced Batch programmer may be confused by the &quot;([], &quot; part (starting with me!). What these characters means? Is it a Batch file feature that represent the parameter list? Is it an empty array (like in JavaScript) that receive the parameters? Of course, when the trick is understood we realize that there is nothing special about it, but it is a fact that this format is confusing and that we must do an additional effort in order to understand it.<br /><br />In your next examples we can see that in the function invocation we can omit some parameters or even all of them. Why an error is not issued in these cases? If the declared parameters have not any effect in the way the function can be invoked, what is the purpose to declare them? As you note it, my format <em class="text-italics">MAY</em> also be invoked this way, but the keypoint of this topic is to write and execute functions <strong class="text-strong">in the standard way</strong>. I do not recommend to write code that does not conform to the standards; I encourage to always define and use functions using the standard format even if we know this is not required.<br /><br />This thread provides a programming tool that aids in writting clearer and better Batch programs, when is used correctly.<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43751" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile43751">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content43751">

						<h3 ><a href="#p43751">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting1679.html?mode=quote&amp;f=3&amp;p=43751" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopice66b.html?p=43751#p43751" onclick="prompt('Message #14',this.href); return false;">#14</a></span> 
									<a class="unread" href="viewtopice66b.html?p=43751#p43751" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>01 Nov 2015 08:54
			</p>
			
			
			
			<div class="content">I reviewed especially these lines multiple times before creating my above post. It didn't occurred to me that writing the function is also &quot;using&quot; it (until now; still not fully sure about that).<br /><br />I had some sort of &quot;consumer view&quot; because you have also used nonstandard notation: For example in your Max(x,y) where you assigned the second value to the result which is not possible for most programming languages; my suggestion does the same to add an unused (but more or less well known; i fear less...) variable named &quot;[]&quot; (==substitution operator; see sidenote at the bottom of this post).<br /><br />You could also use any other variable name if that is the problem: Actually i have no idea of a name that is meaningfull for both writing the function and replacing it with parameter values; maybe &quot;setparams&quot; or &quot;:&quot;:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;f(x,y)=(setparams, x+y+4)&quot;<br />set /A &quot;z=%f(x,y):setparams=(x=1, y=2)%&quot;<br />echo %z%<br /><br />set &quot;g(n)=(:, n-3)&quot;<br />set /A &quot;a=%g(n)::=(g=4)%&quot;<br />echo %a%</code></pre></div>But actually i think, it is also no good solution (to this task).<br /><br />(<br />Actally i think the most compatible solution could only be produced by adding another macro; maybe named &quot;SET&quot;, that autodetects used formulas and checks its parameters:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:set &quot;set=???&quot;<br />set &quot;g(x)=x+1&quot;<br />%set% /A &quot;n=g(4)+100*g(5)&quot;<br /></code></pre></div><br />)<br /><br /><blockquote><div><cite>Aacini wrote:</cite>In your next examples we can see that in the function invocation we can omit some parameters or even all of them. Why an error is not issued in these cases? If the declared parameters have not any effect in the way the function can be invoked, what is the purpose to declare them?</div></blockquote>I think i don't need to respect these points because my suggestion shouldn't solve these issues (only &quot;invoke&quot; the function with multiple variables instead of only 1).<br /><br /><br /><blockquote><div><cite>Aacini wrote:</cite>Even an experienced Batch programmer may be confused by the &quot;([], &quot; part (starting with me!). What these characters means?</div></blockquote>The square brackets ('[', ']') have no special meaning for the &quot;set /A&quot; command, so they are treated as a variable name just like &quot;x&quot;, or &quot;?&quot;.<br /><br /><br />Sidenote:<br />From what i above called &quot;consumer view&quot; my usage of square brackets (&quot;[]&quot;) is motivated by a C++ precompiler we used at university (sorry, i even don't know its name anymore).<br />I must admit i never heard of a programming language that &quot;naturally&quot; supports this operator.<br />This precompiler handles the mathematical substitution operator, so this notation is not completely unknown (but indeed nearly - outside the math world - and even there it may be unknown to some: Depends on their subject field.).<br /><br />Although it is valid to use this operator in all areas of mathematics it is mostly not used because:<br />- avoiding it is too easy (just say &quot;now substitute x by y+1&quot;), and<br />- the formal definition of this operator is tricky, if not introducing &quot;Lambda calculus&quot;<br />See <a href="https://en.wikipedia.org/wiki/Lambda_calculus" class="postlink">https://en.wikipedia.org/wiki/Lambda_calculus</a>.<br /><br />Empty brackets represents an empty substitution (so nothing is substituted), so<br />- &quot;f(x)[]&quot; equals &quot;f(x)&quot;<br />- &quot;f(x)[x=2]&quot; equals &quot;f(2)[]&quot; equals &quot;f(2)&quot;.<br /><br />I first wanted to use %f(x):[]=[x=1]% to replace the empty substitution with the substitution of x with 1:<br />It should represent &quot;f(x)[x=1]&quot;.<br /><br />But that is bad, because in batch &quot;[x&quot; is interpreted as a variable name and &quot;1]&quot; is no valid formula, so i left the brackets on the right side.<br />You could use &quot;[,]&quot; (a list of two empty substitutions and add &quot;x=1,&quot; to be correct in mathematical terms), but that is very unusual and looks just ugly:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;succ(n)=(&#91;,&#93;,n+1)&quot;<br />set /A &quot;m=%succ(n):&#91;,&#93;=&#91;,n=1,&#93;%&quot;<br /></code></pre></div><br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p43753" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile43753">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist8bd9.html?mode=viewprofile&amp;u=6223" class="username">OperatorGK</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search810d.html?author_id=6223&amp;sr=posts">66</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 13 Jan 2015 06:55</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content43753">

						<h3 ><a href="#p43753">Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6444.html?mode=quote&amp;f=3&amp;p=43753" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic6882.html?p=43753#p43753" onclick="prompt('Message #15',this.href); return false;">#15</a></span> 
									<a class="unread" href="viewtopic6882.html?p=43753#p43753" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist8bd9.html?mode=viewprofile&amp;u=6223" class="username">OperatorGK</a></strong> &raquo; </span>01 Nov 2015 10:32
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>penpen wrote:</cite>I must admit i never heard of a programming language that &quot;naturally&quot; supports this operator</div></blockquote><br />Isn't this basically batch %x:y=z% operator? The only difference, AFAIK, is that [] operator may be used in anonymous expressions.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingb7dd.html?mode=reply&amp;f=3&amp;t=6744" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic4d19.html?f=3&amp;t=6744&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=6744">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			27 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopicc94a.html?f=3&amp;t=6744&amp;start=15" role="button">2</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopicc94a.html?f=3&amp;t=6744&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron68e3.gif?cron_type=cron.task.text_reparser.pm_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=6744&p=43737 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:51:18 GMT -->
</html>
