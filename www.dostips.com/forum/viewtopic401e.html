<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=4925 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:04:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>(nearly) ieee 754 floating point single precisition - DosTips.com</title>


	<link rel="canonical" href="viewtopiccffa.html?t=4925">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic401e.html?f=3&amp;t=4925">(nearly) ieee 754 floating point single precisition</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="posting4b56.html?mode=reply&amp;f=3&amp;t=4925" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic2150.html?f=3&amp;t=4925&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="4925" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			40 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopica31b.html?f=3&amp;t=4925&amp;start=15" role="button">2</a></li>
				<li><a class="button" href="viewtopic853e.html?f=3&amp;t=4925&amp;start=30" role="button">3</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopica31b.html?f=3&amp;t=4925&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p28665" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28665">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28665">

						<h3 class="first"><a href="#p28665">(nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6986.html?mode=quote&amp;f=3&amp;p=28665" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicd71e.html?p=28665#p28665" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopicd71e.html?p=28665#p28665" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>17 Sep 2013 15:15
			</p>
			
			
			
			<div class="content">I had to program a string to float and vice versa conversion in pure batch: additional exes/cscript/... all not allowed. <img class="smilies" src="images/smilies/icon_evil.gif" alt=":evil:" title="Evil or Very Mad" /> .<br />It was a pain to me to do such tedious fiddling  (&quot;fieser Fummelkram&quot;), and i<br />want to save the trouble for others that have to do this, too, so i've posted it here.<br />Hopefully someone has fun with this.<br /><br />As batch scripts don't know the float format, the string to float converts to signed integer 32, but it's hex value is that of<br />the float value, so just use the intToHex procedure to get this hex value.<br /><br />This is not full ieee 754 floating point, as rounding precistion is only estimated, but the difference should be not that big.<br /><br />The code actually is unoptimized, and i haven't actually programmed floating point division, and i don't know when i have<br />the time to finish these tasks. Feel free to solve these tasks, if you want.<br /><br />Special thanks for finding/fixing bugs and/or supporting with code (for more information see the postings below) to:<br />aGerman<br />carlsomo<br />dbenham<br />einstein1969<br />jeb<br /><br />I have split the whole into two parts:<br /> - floaty.bat (the test cases)<br /> - loadFloat.bat (that contains the macros)<br />This may help, if you want to read the source of the macros more easily;<br />it also contains the file &quot;floaty.bat&quot;:<br /><a href="viewtopicfeae.html?p=36352#p36352" class="postlink">http://www.dostips.com/forum/viewtopic.php?p=36352#p36352</a><br /><br />I haven't deleted the step by step comments and the test cases.<br />Here is what i've got so far:<br />- $str2float: string to float (int coding)<br />- $float2str: float (int coding) to string<br />- $floatAdd: addition<br />- $floatSub: substraction<br />- $floatMul: multiplication<br />- $intToHex: converts an integer string to hexadecimal notation (not really needed but is easier to compare).<br /><br />The content of &quot;loadFloat.bat&quot; (macros):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />:: define info header<br />::<br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;:: macros loaded into memory by this batch file:<br />&nbsp; &nbsp;::&nbsp; - $str2float<br />&nbsp; &nbsp;::&nbsp; - $float2str<br />&nbsp; &nbsp;::&nbsp; - $floatAdd<br />&nbsp; &nbsp;::&nbsp; - $floatSub<br />&nbsp; &nbsp;::&nbsp; - $floatMul<br />&nbsp; &nbsp;::&nbsp; - $intToHex<br />&nbsp; &nbsp;::<br /><br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;:: supported modes of operation:<br />&nbsp; &nbsp;:: ---------------------------------------------+---+---+---+---<br />&nbsp; &nbsp;::&nbsp; &nbsp;extensions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(e/d: en/disabled)&nbsp; | e | e | e | d<br />&nbsp; &nbsp;::&nbsp; &nbsp;delayed expansion&nbsp; &nbsp; &nbsp; (e/d: en/disabled)&nbsp; | e | d | d |e/d<br />&nbsp; &nbsp;::&nbsp; &nbsp;run from command line&nbsp; (y/n:&nbsp; &nbsp; &nbsp; yes/no)&nbsp; |y/n| y | n |y/n<br />&nbsp; &nbsp;:: ---------------------------------------------+---+---+---+---<br />&nbsp; &nbsp;::&nbsp; &nbsp;macro behaviour&nbsp; &nbsp; (l/e: load/executable)&nbsp; |l+e| l |l+e| -<br />&nbsp; &nbsp;::<br /><br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;:: This batch uses the following environment variable names<br />&nbsp; &nbsp;:: of the current context, and will finally undefine them:<br />&nbsp; &nbsp;::&nbsp; - bOR<br />&nbsp; &nbsp;::&nbsp; - #<br />&nbsp; &nbsp;::<br /><br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;:: rounding is applied to all floating point macros:<br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;:: Rounding to integers using the IEEE 754 rules<br />&nbsp; &nbsp;:: No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5<br />&nbsp; &nbsp;:: 0&nbsp; to nearest, ties to even&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(default) +2.0 +2.0 -2.0 -2.0<br />&nbsp; &nbsp;:: 1&nbsp; to nearest, ties away from zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +3.0 +2.0 -2.0 -3.0<br />&nbsp; &nbsp;:: 2&nbsp; toward 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(truncation, no rounding) +2.0 +1.0 -1.0 -2.0<br />&nbsp; &nbsp;:: 3&nbsp; toward +inf&nbsp; &nbsp; &nbsp; &nbsp; (rounding up, or ceiling) +3.0 +2.0 -1.0 -2.0<br />&nbsp; &nbsp;:: 4&nbsp; toward -inf&nbsp; &nbsp; &nbsp; &nbsp; (rounding down, or floor) +2.0 +1.0 -2.0 -3.0<br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;:: you select a rounding mode by setting up the environment variable<br />&nbsp; &nbsp;:: &quot;roundingMode&quot; with the number of the rounding mode.<br />&nbsp; &nbsp;:: If none is selected, then the default is rounding mode 0.<br />&nbsp; &nbsp;::<br /><br />&nbsp; &nbsp;:: <br />&nbsp; &nbsp;:: some test cases:<br />&nbsp; &nbsp;:: %$str2float% &quot;10&quot;<br />&nbsp; &nbsp;:: %$str2float% &quot;4&quot;<br />&nbsp; &nbsp;:: %$floatAdd%&nbsp; &quot;1092616192&quot; &quot;1082130432&quot;<br />&nbsp; &nbsp;:: %$float2str% &quot;1096810496&quot;<br />&nbsp; &nbsp;:: %$floatSub%&nbsp; &quot;1092616192&quot; &quot;1082130432&quot;<br />&nbsp; &nbsp;:: %$float2str% &quot;1086324736&quot;<br />&nbsp; &nbsp;:: %$floatMul%&nbsp; &quot;1092616192&quot; &quot;1082130432&quot;<br />&nbsp; &nbsp;:: %$float2str% &quot;1109393408&quot;<br />&nbsp; &nbsp;:: %$intToHex%&nbsp; &quot;305419896&quot;<br />&nbsp; &nbsp;:: <br />::<br />:: end define info header<br /><br /><br />:: define check for valid system state<br />::<br />:: If the extensions are disabled, the set command throws an &quot;syntax error&quot;,<br />:: when assigning an equal sign ('='):<br />:: This is essential for complex macros, so the extensions MUST be enabled.<br />::<br />2&gt; nul set &quot;extensionsEnabled=true&quot; || (<br />&nbsp; &nbsp;echo(Error: The extensions are disabled, no macro will be loaded into memory.<br /><br />&nbsp; &nbsp;rem simulate: exit /b 1<br />&nbsp; &nbsp;rem if extensions are disabled the label :EOF is not found<br />&nbsp; &nbsp;call<br />&nbsp; &nbsp;goto exit<br />)<br />::<br />:: end define check for valid system state<br />:: extensions enabled<br /><br /><br />:: define $str2float<br />::&nbsp; &nbsp;%~1 float string<br />::&nbsp; &nbsp;%~2 variable to store the resulting int coding of the float<br />::&nbsp; &nbsp;actually there is only few error detection,<br />::&nbsp; &nbsp;so assumed: no errorneous strings<br />::&nbsp; &nbsp;set &quot;inf=0x7F800000&quot;<br />::&nbsp; &nbsp;set &quot;nan=0x7FFFFFFF&quot;<br />::&nbsp; &nbsp;NaN(...), +NaN(...), -NaN(...) format: NaN, +NaN, -NaN watched<br />::&nbsp; &nbsp;&quot;&quot;, &quot;+&quot;, &quot;NaN&quot;, &quot;+NaN&quot; -&gt;&nbsp; NaN == 0x7FFFFFFF == 2147483647<br />::&nbsp; &nbsp;&quot;-&quot;, &quot;-NaN&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; -NaN == 0xFFFFFFFF == -1<br />::&nbsp; &nbsp;&quot;inf&quot;, &quot;+inf&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;&nbsp; inf == 0x7F800000 == 2139095040<br />::&nbsp; &nbsp;&quot;-inf&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt; -inf == 0xFF800000 == -8388608<br />::<br />&nbsp; &nbsp;(set #=0)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set bOR=^^^^) else (set bOR=^^)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set #=^^^^^^^^^^^^^^^!) else (set #=!)<br /><br />&nbsp; &nbsp;setlocal enableExtensions disableDelayedExpansion<br />&nbsp; &nbsp;set LF=^<br /><br /><br />&nbsp; &nbsp;set ^&quot;\n=^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#91;=%%~#^&lt;nul ^^^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#93;=^&lt;nul^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;endlocal &amp; (<br /><br />for %%# in (&quot;&quot;) do set $str2float=@for %%N in ^(0 1^) do @if %%~N == 1 ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;parse params:&quot;^<br />::&quot;&nbsp; &nbsp;first&nbsp; token (mandatory) := float in string representation&quot;^<br />::&quot;&nbsp; &nbsp;second token (optional)&nbsp; := if present then use variable to store the result to, else use STDOUT&quot;^<br />%&#93;%<br />&nbsp; &nbsp;set &quot;N=0&quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;1&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;2&#93;= &quot;%\n%<br />&nbsp; &nbsp;for %%P in ^(%#%params%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;param&#91;%#%N%#%&#93;= %%~P^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;set &quot;N=&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;divide in parts: sPart * iPart.fPart * 10^^ePart&quot;^<br />%&#93;%<br />&nbsp; &nbsp;set ^&quot;string=%#%param&#91;1&#93;%#%^&quot;%\n%<br />&nbsp; &nbsp;set ^&quot;string= %#%string: =%#%^&quot;%\n%<br />&nbsp; &nbsp;set &quot;float=&quot;%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;set ^&quot;ePart=%#%string:*e=%#%^&quot;%\n%<br />&nbsp; &nbsp;if not defined ePart ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;ePart=e&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%string:e=%#%^&quot;%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%string%#%^&quot; == ^&quot;%#%ePart%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;ePart=0&quot;%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(^&quot;%#%ePart%#%^&quot;^) do @set ^&quot;string=%#%string:e%%~a=%#%^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;set ^&quot;fPart=%#%string:*.=%#%^&quot;%\n%<br />&nbsp; &nbsp;if not defined fPart ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;fPart=f&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%string:.=%#%^&quot;%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%string%#%^&quot; == ^&quot;%#%fPart%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;fPart=0&quot;%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(^&quot;%#%fPart%#%^&quot;^) do @set ^&quot;string=%#%string:.%%~a=%#%^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;if ^&quot;%#%string:~1,1%#%^&quot; == &quot;-&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;iPart=%#%string:~2%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;sPart=-&quot;%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%string:~1,1%#%^&quot; == &quot;+&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;iPart=%#%string:~2%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;sPart=&quot;%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;iPart=%#%string:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;sPart=&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;if not defined iPart set &quot;iPart=i&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;set sign flag (s)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;if defined sPart ^( ^&gt;nul set /A &quot;s=1&lt;&lt;31&quot; ^) else ^( set &quot;s=0&quot; ^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;detect NaN, inf and hex format&quot;^<br />%&#93;%<br />&nbsp; &nbsp;if ^&quot;%#%iPart:~0,3%#%^&quot; == &quot;NaN&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /F &quot;tokens=1,2 delims=+-() &quot; %%a in ^(^&quot;%#%param&#91;1&#93;%#%^&quot;^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &quot;%%~b&quot; == &quot;&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;float=s|0x7FFFFFFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set&nbsp; &nbsp; &quot;float=%%~b&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;float=^(0x%#%float:~0,1%#%^&lt;^&lt;28^)+0x%#%float:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;float=s%bOR%float&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%iPart:~0,3%#%^&quot; == &quot;inf&quot; ^( ^&gt;nul set /A &quot;float=s|0x7F800000&quot;%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%iPart:~0,2%#%^&quot; == &quot;0x&quot; ^( ^&gt;nul set /A &quot;float=s%bOR%iPart&quot;%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%iPart%#%%#%fPart%#%^&quot; == &quot;if&quot; ^( ^&gt;nul set /A &quot;float=s|0x7FFFFFFF&quot;%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%ePart%#%^&quot; == &quot;e&quot; ^( ^&gt;nul set /A &quot;float=s|0x7FFFFFFF&quot;%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;normalize to: sPart * 0.significand * 10^ePart, 0.significand &gt;= 0.1&quot;^<br />::&quot;&nbsp; &nbsp;AND&quot;^<br />::&quot;&nbsp; &nbsp;detect 0.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /F &quot;tokens=* delims= &quot; %%a in ^(^&quot;%#%iPart:0= %#%^&quot;^) do @set &quot;iPartP=%%~a&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /F &quot;tokens=* delims= &quot; %%a in ^(^&quot;%#%fPart:0= %#%^&quot;^) do @set &quot;fPartP=%%~a&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%iPartP%#%%#%fPartP%#%^&quot; == &quot;&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;float=s&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if defined iPartP ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;iPartP=%#%iPartP: =0%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;fPartP=%#%fPart%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string= %#%iPartP%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;op=+&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else if defined fPartP ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;fPartP=%#%fPartP: =0%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(%#%fPartP%#%^) do @set ^&quot;string= %#%fPart:%%a=%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;op=-&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(4096,2048,1024,512,256,128,64,32,16,8,4,2,1^) do @if not ^&quot;%#%string:~%%a,1%#%^&quot; == &quot;&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%string:~%%a%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;ePart%#%op%#%=%%a^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;significand=%#%iPartP%#%%#%fPartP%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;iPartP=&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;fPartP=&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;drop unneeded digits&quot;^<br />::&quot;&nbsp; &nbsp;transform to: sPart * high_{8}.high_{7-0}low{7-0} * 5^ePart * 2^e_2&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;significand=%#%significand:~0,17%#%0000000000000000^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%significand:~0,9%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%significand:~9,8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart-=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e_2=ePart&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;iterate on: 987654321; up to three times&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;string= 8&nbsp; &nbsp;4 2 &quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(^&quot;%#%high:~0,1%#%^&quot;^) do @for %%b in ^(%#%string:~-%%~a%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;c=(high&amp;1)+1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%c%#%%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high&gt;&gt;=1&quot;, &quot;low=(low&gt;&gt;1)-50000000&quot;, &quot;e_2+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;string=&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;c=&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;transform to: sPart * high_{8}.high_{7-0}low{7-0} * 2^e_2&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%ePart%#% LSS 0 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(%#%ePart%#%,1,-1^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;c=%#%high:~-1%#%%%5^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;cc=c+1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%high%#% LSS 125000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high=(((high-c)/5)&lt;&lt;3)&quot;, &quot;e_2-=3&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;low=^(^(%#%cc%#%%#%low%#%-100000000^)/5^)^&lt;^&lt;3^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high=(((high-c)/5)&lt;&lt;2)&quot;, &quot;e_2-=2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;low=^(^(%#%cc%#%%#%low%#%-100000000^)/5^)^&lt;^&lt;2^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%low%#% GEQ 100000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;c=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high+=c&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else if %#%ePart%#% GTR 0 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(%#%ePart%#%,-1,1^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;c=high&amp;7&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;cc=c+1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%high%#% LSS 160000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;high=^(^(^(%#%high%#%-c^)^&gt;^&gt;2^)*5^)^&quot;, &quot;e_2+=2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;low=^(^(%#%cc%#%%#%low%#%-100000000^)^&gt;^&gt;2^)*5^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;high=^(^(^(%#%high%#%-c^)^&gt;^&gt;3^)*5^)^&quot;, &quot;e_2+=3&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;low=^(^(%#%cc%#%%#%low%#%-100000000^)^&gt;^&gt;3^)*5^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%low%#% GEQ 100000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;c=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high+=c&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;ePart=&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;compute fraction bits (f)&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;setup maxIndex of bits to be computed: denormalized ones with e_2 &lt;= 127;&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set e_2 to 127 although the exponent of denormalized float is 126 - coding.&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;maxIndex := 24+(127+!e_2!)-1 == 150+!e_2!&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%e_2%#% LEQ -127 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;maxIndex=150+e_2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;e_2=-127&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else if %#%e_2%#% GEQ 128 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;maxIndex=-1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;maxIndex=24&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;f=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(0, 1, %#%maxIndex%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%high:~8%#%^&quot; == &quot;&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f&lt;&lt;=1&quot;, &quot;high&lt;&lt;=1&quot;, ^&quot;low=^(1%#%low%#%-100000000^)^&lt;^&lt;1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f=(f&lt;&lt;1)+1&quot;, &quot;high=(high-100000000)&lt;&lt;1&quot;, ^&quot;low=^(1%#%low%#%-100000000^)^&lt;^&lt;1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%low:~8%#%^&quot; == &quot;&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;set up round bit (r) that specifies if rounding is performed, and&quot;^<br />::&quot;&nbsp; &nbsp;if number is greater than the round bit (rUp: true==1 false==0); this means more bits or decimal digits are available&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;roundingMode+=0&quot;, &quot;r=f&amp;1&quot;, &quot;f&gt;&gt;=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%roundingMode%#%^&quot; == &quot;4&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;4&nbsp; toward -inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding down, or floor&#93; +2.0 +1.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%high%#%%#%low%#%^&quot; == &quot;000000000&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if defined sPart ^&gt;nul set /A &quot;f+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;3&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;3&nbsp; toward +inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding up, or ceiling&#93; +3.0 +2.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%high%#%%#%low%#%^&quot; == &quot;000000000&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT defined sPart ^&gt;nul set /A &quot;f+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;2&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;2&nbsp; toward 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;truncation, no rounding&#93; +2.0 +1.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;rem nothing left to do%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;1&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;1&nbsp; to nearest, ties away from zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +3.0 +2.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;0&nbsp; to nearest, ties to even&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;default&#93; +2.0 +2.0 -2.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%r%#% == 1 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%high%#%%#%low%#%^&quot; == &quot;000000000&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f+=(f&amp;1)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;overflow checking&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%e_2%#%^&quot; == &quot;-127&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%f%#%^&quot; == &quot;8388608&quot; ^&gt;nul set /A &quot;e_2+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%f%#%^&quot; == &quot;16777216&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e_2+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f&gt;&gt;=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;build float&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e=(e_2+127)&lt;&lt;23&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%e%#% == 255 ^( set &quot;f=0&quot; ^) else ^( ^&gt;nul set /A &quot;f&amp;=0x007FFFFF&quot; ^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;float=s|e|f&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;for %%a in ^(^&quot;%#%float%#%^&quot;^) do @for %%b in ^(^&quot;%#%param&#91;2&#93;:~1%#%^&quot;^) do @^(endlocal ^&amp; ^(if &quot;%%~b&quot; == &quot;&quot; ^( echo %%~a^) else ^(set &quot;%%~b=%%~a&quot;^)^)^)%\n%<br />^) else setlocal enableDelayedExpansion ^&amp; set params=, <br /><br />)<br />&nbsp; &nbsp;(set #=)<br />::<br />:: end define $str2float<br /><br /><br />:: define $float2str<br />::&nbsp; &nbsp;%~1 float value (int coding)<br />::&nbsp; &nbsp;%~2 variable to store the resulting string if exists,<br />::&nbsp; &nbsp;&nbsp; &nbsp; else echo string value if undefined<br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;values for (simplified) rounding using table lookup:<br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; float&nbsp; &nbsp; | decimal value of f == 0x1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| precisition<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; (decstr) |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;----------+-----------------------------------------------------------------+-------------<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;...&nbsp; &nbsp; &nbsp; &nbsp;| ...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ... ...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | ...<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;----------+-----------------------------------------------------------------+-------------<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; | 0,0000001 1920928955078125 /|\&nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2^-23=2^-13=2^-3&nbsp; &nbsp; | 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; | 0,0000002 384185791015625&nbsp; &nbsp;|&nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; | 0,0000004 76837158203125&nbsp; &nbsp; |&nbsp; &nbsp;5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8&nbsp; &nbsp;&#91;7-8&#93;<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 8&nbsp; &nbsp; &nbsp; &nbsp; | 0,0000009 5367431640625&nbsp; &nbsp; &nbsp;|&nbsp; 10 (hex: A)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | 8-9 (7-8)<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 16&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; 0,000001 9073486328125&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; 0,000003 814697265625&nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 64&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; 0,000007 62939453125&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8-9 (7-8)<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 128&nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;0,00001 52587890625&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 256&nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;0,00003 0517578125&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;0,00006 103515625&nbsp; &nbsp; &nbsp; &nbsp; \|/&nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 9<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;----------+-----------------------------------------------------------------+-------------<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 1024&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; 0,0001 220703125&nbsp; &nbsp; &nbsp; &nbsp; /|\&nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 2048&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; 0,0002 44140625&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 4096&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; 0,0004 8828125&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8&nbsp; &nbsp;&#91;7-8&#93;<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 8192&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; 0,0009 765625&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; 10 (hex: A)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | 8-9 (7-8)<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 16384&nbsp; &nbsp; |&nbsp; &nbsp; &nbsp;0,001 953125&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 32768&nbsp; &nbsp; |&nbsp; &nbsp; &nbsp;0,003 90625&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 65536&nbsp; &nbsp; |&nbsp; &nbsp; &nbsp;0,007 8125&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 9&nbsp; &nbsp;(7-8)<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 131072&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; 0,01 5625&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 262144&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; 0,03 125&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 524288&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; 0,06 25&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\|/&nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 9<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;----------+-----------------------------------------------------------------+-------------<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 1048576&nbsp; |&nbsp; &nbsp; &nbsp; &nbsp;0,1 25&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/|\&nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 2097152&nbsp; |&nbsp; &nbsp; &nbsp; &nbsp;0,2 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; 4194304&nbsp; |&nbsp; &nbsp; &nbsp; &nbsp;0,5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 8&nbsp; &nbsp;&#91;7-8&#93;<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; ...&nbsp; &nbsp; &nbsp; |&nbsp; ...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;... ...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | ...<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;legend:<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; -&nbsp; (x-y)&nbsp; implemented (reduced precisition due to too big round delta value)<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp; -&nbsp; &#91;x-y&#93;&nbsp; i've seen this in 'wild life', but i have no idea, why ...<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;maybe because this table is imprecise; if this is true i won't fix it (higher precisition, so no problem)<br />&nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (i've also seen lower precisition on some denormalized numbers: i have no idea... if ... true... not fix it (...))<br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;::&nbsp; &nbsp;&nbsp; &nbsp;actually not needed: set &quot;deltaR=125A248236&quot;<br />&nbsp; &nbsp;::<br />&nbsp; &nbsp;(set #=0)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set #=^^^^^^^^^^^^^^^!) else (set #=!)<br /><br />&nbsp; &nbsp;setlocal enableExtensions disableDelayedExpansion<br />&nbsp; &nbsp;set LF=^<br /><br /><br />&nbsp; &nbsp;set ^&quot;\n=^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#91;=%%~#^&lt;nul ^^^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#93;=^&lt;nul^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;endlocal &amp; (<br /><br /><br />for %%# in (&quot;&quot;) do set $float2str=@for %%N in ^(0 1^) do @if &quot;%%~N&quot; == &quot;1&quot; ^(%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;set &quot;N=0&quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;1&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;2&#93;= &quot;%\n%<br />&nbsp; &nbsp;for %%P in ^(%#%params%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;param&#91;%#%N%#%&#93;= %%~P^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;set &quot;N=&quot;%\n%<br />&nbsp; &nbsp;set &quot;string=&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;transform to: (s, e_2, f)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;set ^&quot;float=%#%param&#91;1&#93;%#%^&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s=(float&gt;&gt;31)&amp;1&quot;, &quot;e_2=((float&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f=float&amp;0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;if ^&quot;%#%s%#%^&quot; == &quot;1&quot; ^( set &quot;sPart=-1&quot; ^) else set &quot;sPart=1&quot;%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;if ^&quot;%#%e_2%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%f%#%^&quot; == &quot;0&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%sPart:1=%#%inf^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%f%#%^&quot; == &quot;8388607&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%sPart:1=%#%NaN^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;f=f^|0x00800000^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;hexDigits=0123456789ABCDEF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;value=&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;string=&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(1,1,6^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;value=f&amp;0xF&quot;, &quot;f&gt;&gt;=4&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for %%b in ^(^&quot;%#%value%#%^&quot;^) do @set ^&quot;string=%#%hexDigits:~%%~b,1%#%%#%string%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%sPart:1=%#%NaN^(7F%#%string%#%^)^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%e_2%#%,%#%f%#%^&quot; == &quot;-127,0&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%sPart:~0,-1%#%0.0^&quot;%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;transform to: sPart * high_{8}(==1).high_{7-0}low{7-0} * 2^e&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%e_2%#%^&quot; == &quot;-127&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(0,1,23^) do @if %#%f%#% LSS 8388608 ^&gt;nul set /A &quot;e_2-=1&quot;, &quot;f&lt;&lt;=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&gt;nul /A &quot;e_2+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else set ^&gt;nul /A &quot;f|=0x00800000&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;high=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;low=00000000&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(0, 1, 23^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;b=f&amp;1&quot;, &quot;f&gt;&gt;=1&quot;, &quot;c=(high&amp;1)+1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;d=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;low=^(%#%c%#%%#%low%#%-100000000^)^&gt;^&gt;1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;high=^(high^&gt;^&gt;1^)+%#%b%#%00000000^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;transform to: sPart * 0.high_{7-0}low{7-0} * 10^ePart&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;ePart=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e_2%#% GTR 0 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N=(e_2&gt;&gt;1)+1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(%#%N%#%,-1,1^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%e_2%#% GTR %#%ePart%#% ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;c=^(%#%high:~-1%#%%%5^)+1^&quot;, ^&quot;cc=%#%low:~-1%#%%%5^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%high%#% LSS 125000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high=(high/5)&lt;&lt;3&quot;, &quot;e_2-=3&quot;, &quot;ePart+=1&quot;, ^&quot;low=^(^(^(%#%c%#%%#%low%#%-100000000^)/5^)^&lt;^&lt;3^)+^(^(cc^&lt;^&lt;3^)/5^)^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high=(high/5)&lt;&lt;2&quot;, &quot;e_2-=2&quot;, &quot;ePart+=1&quot;, ^&quot;low=^(^(^(%#%c%#%%#%low%#%-100000000^)/5^)^&lt;^&lt;2^)+^(^(cc^&lt;^&lt;2^)/5^)^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%low%#% GEQ 100000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;high+=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e_2-=ePart&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%e_2%#% LSS 0 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;cc=^(%#%high:~-1%#%^&amp;^(^(1^&lt;^&lt;^(-e_2^)^)-1^)^)+1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high&gt;&gt;=(-e_2)&quot;, ^&quot;low=^(^(%#%cc%#%%#%low%#%-100000000^)^&gt;^&gt;^(-e_2^)^)^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;e_2=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%high:~-1%#%%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~0,8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%high:~0,-1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if not defined high set &quot;high=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if %#%e_2%#% LSS 0 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N=(e_2&gt;&gt;1)-1&quot;, &quot;ePart-=3&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(%#%N%#%,1,-1^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%e_2%#% LSS %#%ePart%#% ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%high%#% LSS 160000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;c=(high&amp;3)+1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;cLow=%#%c%#%%#%low%#%-100000000^&quot;, &quot;high=((high&gt;&gt;2)*5)&quot;, &quot;e_2+=2&quot;, &quot;ePart-=1&quot;, &quot;low=((cLow&gt;&gt;2)*5)+(((cLow&amp;2)*5)&gt;&gt;2)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;c=(high&amp;7)+1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;cLow=%#%c%#%%#%low%#%-100000000^&quot;, &quot;high=((high&gt;&gt;3)*5)&quot;, &quot;e_2+=3&quot;, &quot;ePart-=1&quot;, &quot;low=((cLow&gt;&gt;3)*5)+(((cLow&amp;3)*5)&gt;&gt;3)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%low%#% GEQ 100000000 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;high+=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e_2-=(ePart+=3)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%e_2%#% LSS 0 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;cc=^(%#%high:~-1%#%^&amp;^(^(1^&lt;^&lt;^(-e_2^)^)-1^)^)+1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;high&gt;&gt;=(-e_2)&quot;, ^&quot;low=^(^(%#%cc%#%%#%low%#%-100000000^)^&gt;^&gt;^(-e_2^)^)^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=00000000%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~-8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;e_2=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%high:~-1%#%%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~0,8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%high:~0,-1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else (%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%high:~-1%#%%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~0,8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%high:~0,-1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;perform rounding: see table above&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;initial values are upper bounds only&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;precisition=8889889889&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;rounding+=0&quot;, &quot;eR=(((float&gt;&gt;23)&amp;0x000000FF)-127)+1000&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%eR%#% EQU 873 ^&gt;nul set /A &quot;eR=874&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(^&quot;%#%er:~-1%#%^&quot;^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A ^&quot;precisition=%#%precisition:~%%~a,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%precisition%#%^&quot; == &quot;9&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%high:~0,1%#%^&quot; == &quot;1&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;precisition=8&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &quot;%%~a&quot; == &quot;3&quot; ^&gt;nul set /A &quot;precisition-=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &quot;%%~a&quot; == &quot;6&quot; ^&gt;nul set /A &quot;precisition-=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;REM #1234567890&nbsp; &nbsp;&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;REM i0123456789&nbsp; &nbsp;&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;REM&nbsp; xxxxxxlr---&nbsp; &quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;REM&nbsp; xxxxxxxlr--- &quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;REM&nbsp; xxxxxxxxlr---&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;rest=%#%high%#%%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%precisition%#%^&quot; == &quot;7&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%rest:~0,6%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set&nbsp; ^&quot;low=%#%rest:~6,2%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;rest=%#%rest:~8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%precisition%#%^&quot; == &quot;8&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%rest:~0,7%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set&nbsp; ^&quot;low=%#%rest:~7,2%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;rest=%#%rest:~9%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%rest:~0,8%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set&nbsp; ^&quot;low=%#%rest:~8,2%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;rest=%#%rest:~10%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%roundingMode%#%^&quot; == &quot;4&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;4&nbsp; toward -inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding down, or floor&#93; +2.0 +1.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sPart%#%^&quot; == &quot;-1&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /F &quot;delims=0&quot; %%a in ^(^&quot;%#%low:~1%#%%#%rest%#%#^&quot;^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &quot;%%~a&quot; == &quot;#&quot; ^( set ^&quot;low=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^&gt;nul set /A ^&quot;low=%#%low:~0,1%#%+1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else set ^&quot;low=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;3&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;3&nbsp; toward +inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding up, or ceiling&#93; +3.0 +2.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sPart%#%^&quot; == &quot;1&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /F &quot;delims=0&quot; %%a in ^(^&quot;%#%low:~1%#%%#%rest%#%#^&quot;^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &quot;%%~a&quot; == &quot;#&quot; ^( set ^&quot;low=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^&gt;nul set /A ^&quot;low=%#%low:~0,1%#%+1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else set ^&quot;low=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;2&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;2&nbsp; toward 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;truncation, no rounding&#93; +2.0 +1.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;rem nothing left to do%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;1&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;1&nbsp; to nearest, ties away from zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +3.0 +2.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%low:~1%#% GEQ 5 ^( ^&gt;nul set /A ^&quot;low=%#%low:~0,1%#%+1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else set ^&quot;low=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;0&nbsp; to nearest, ties to even&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;default&#93; +2.0 +2.0 -2.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for /F &quot;delims=02468&quot; %%a in ^(^&quot;%#%low:~0,1%#%#^&quot;^) do @for /F &quot;delims=0&quot; %%b in ^(^&quot;%#%rest%#%#^&quot;^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &quot;%%~a%%~b&quot; == &quot;##&quot; ^( set ^&quot;low=%#%low%#%0^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else set ^&quot;low=%#%low%#%1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%low:~1%#% GTR 50 ^( ^&gt;nul set /A ^&quot;low=%#%low:~0,1%#%+1^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else set ^&quot;low=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;check overflow&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%low%#% GEQ 10 ^&gt;nul set /A ^&quot;low=%#%low:~1%#%^&quot;, &quot;high+=1&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;transform to: sPart * high.low * 10^ePart, digits := #|high.low|&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%high%#%%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;digits=%#%precisition%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(^&quot;%#%precisition%#%^&quot;^) do @if NOT ^&quot;%#%low:~%%~a%#%^&quot; == &quot;&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;digits+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;transform to: nice numbers&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;no leading zero (except the following explicitely allow this)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%low:~0,1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart-=1&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;use form without exponent if possible (max 7 integer / -3 fraction digits are allowed)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(^&quot;%#%ePart%#%^&quot;^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if 1 LEQ %%~a if %%~a LSS 7 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=%#%high%#%%#%low:~0,%%~a%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%low:~%%~a%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart-=%%~a&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if -3 LEQ %%~a if %%~a LEQ -1 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;zeroes=000000000&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for %%b in ^(^&quot;%#%ePart%#%^&quot;^) do @if ^&quot;%#%low:~%%~b%#%^&quot; == ^&quot;%#%zeroes:~%%~b%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;high=000000000%#%high%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;low=%#%high:~%%~a%#%%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set &quot;high=&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart-=%%~a&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;no trailing zeroes&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(1,1,%#%digits%#%^) do @if ^&quot;%#%low:~-1%#%^&quot; == &quot;0&quot; set ^&quot;low=%#%low:~0,-1%#%^&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;avoid lonely separator&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;if NOT defined high set &quot;high=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if NOT defined low set &quot;low=0&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;create float string&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;ePart+=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;string=%#%sPart:~0,-1%#%%#%high%#%.%#%low%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if not ^&quot;%#%ePart%#%^&quot; == &quot;0&quot; set ^&quot;string=%#%string%#% e%#%ePart%#%^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;for %%a in ^(^&quot;%#%string%#%^&quot;^) do @for %%b in ^(^&quot;%#%param&#91;2&#93;:~1%#%^&quot;^) do @^(endlocal ^&amp; ^(if &quot;%%~b&quot; == &quot;&quot; ^(echo^(%%~a^) else ^(set &quot;%%~b=%%~a&quot;^)^)^)%\n%<br />^) else setlocal enableDelayedExpansion ^&amp; set params=, <br /><br />)<br />&nbsp; &nbsp;(set #=)<br />::<br />:: end define $float2str<br /><br /><br />:: define $floatAdd<br />::&nbsp; &nbsp;%~1 summand1 float in int coding<br />::&nbsp; &nbsp;%~2 summand2 float in int coding<br />::&nbsp; &nbsp;%~3 resulting float in int coding<br />&nbsp; &nbsp;(set #=0)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set bOR=^^^^) else (set bOR=^^)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set #=^^^^^^^^^^^^^^^!) else (set #=!)<br /><br />&nbsp; &nbsp;setlocal enableExtensions disableDelayedExpansion<br />&nbsp; &nbsp;set LF=^<br /><br /><br />&nbsp; &nbsp;set ^&quot;\n=^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#91;=%%~#^&lt;nul ^^^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#93;=^&lt;nul^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;endlocal &amp; (<br /><br />for %%# in (&quot;&quot;) do set $floatAdd=@for %%N in ^(0 1^) do @if %%~N == 1 ^(%\n%<br />&nbsp; &nbsp;set &quot;N=0&quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;1&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;2&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;3&#93;= &quot;%\n%<br />&nbsp; &nbsp;for %%P in ^(%#%params%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;param&#91;%#%N%#%&#93;= %%~P^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;set &quot;N=&quot;%\n%<br />&nbsp; &nbsp;set &quot;result=&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;float1=param&#91;1&#93;&quot;, &quot;float2=param&#91;2&#93;&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s1=(float1&gt;&gt;31)&amp;1&quot;, &quot;e1=((float1&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f1=float1&amp;0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s2=(float2&gt;&gt;31)&amp;1&quot;, &quot;e2=((float2&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f2=float2&amp;0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;deltaE=(e1-e2)&quot;%\n%<br />&nbsp; &nbsp;if %#%deltaE%#% LSS 0 ^&gt;nul set /A &quot;deltaE=-deltaE&quot;%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;if ^&quot;%#%e1%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%e2%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%s1%#%^&quot; == ^&quot;%#%s2%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float1|float2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=0x7FFFFFFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^) else if %#%e2%#% == 128 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float2&quot;%\n%<br />&nbsp; &nbsp;^) else if %#%deltaE%#% GEQ 25 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e1%#% LSS %#%e2%#% ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e1%#% == -127 ^( ^&gt;nul set /A &quot;e1+=1&quot; ^) else ^( ^&gt;nul set /A &quot;f1|=0x00800000&quot; ^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e2%#% == -127 ^( ^&gt;nul set /A &quot;e2+=1&quot; ^) else ^( ^&gt;nul set /A &quot;f2|=0x00800000&quot; ^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;watch one more bit needed to round (&lt;= 25 bits)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e1-=1&quot;, &quot;f1&lt;&lt;=1&quot;, &quot;e2-=1&quot;, &quot;f2&lt;&lt;=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;r=0&quot;, &quot;rUp=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;rest=0x01FFFFFF%bOR%((0x01FFFFFF&gt;&gt;deltaE)&lt;&lt;deltaE)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e1%#% LSS %#%e2%#% ^( ^&gt;nul set /A &quot;e1+=deltaE&quot;, &quot;rest&amp;=f1&quot;, &quot;f1&gt;&gt;=(deltaE)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^&gt;nul set /A &quot;e2+=deltaE&quot;, &quot;rest&amp;=f2&quot;, &quot;f2&gt;&gt;=(deltaE)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%s1%#%^&quot; == ^&quot;%#%s2%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;sR=s1&quot;, &quot;eR=e1&quot;, &quot;fR=f1+f2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%s1%#% == 1 set ^&quot;f1=-%#%f1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%s2%#% == 1 set ^&quot;f2=-%#%f2%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;sR=0&quot;, &quot;eR=e1&quot;, &quot;fR=f1+f2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%fR:~0,1%#%^&quot; == &quot;-&quot; ^&gt;nul set /A &quot;sR=1&quot;, &quot;fR=-fR&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;deltaE=eR+126&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%deltaE%#% LSS 0 ^( ^&gt;nul set /A &quot;deltaE=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if %#%deltaE%#% GTR 25 ^&gt;nul set /A &quot;deltaE=25&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(1,1,%#%deltaE%#%^) do @if %#%fR%#% LSS 16777216 ^&gt;nul set /A &quot;fR&lt;&lt;=1&quot;, &quot;eR-=1&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;perform rounding (renormalize to 24 bits again)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;roundingMode+=0&quot;, &quot;r=fR&amp;1&quot;, &quot;fR&gt;&gt;=1&quot;, &quot;eR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if 0x1000000 LEQ %#%fR%#% ^&gt;nul set /A &quot;fR&gt;&gt;=1&quot;, &quot;eR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%roundingMode%#%^&quot; == &quot;4&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;4&nbsp; toward -inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding down, or floor&#93; +2.0 +1.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%rest%#%^&quot; == &quot;0&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sR%#%^&quot; == &quot;1&quot; ^&gt;nul set /A &quot;fR+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;3&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;3&nbsp; toward +inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding up, or ceiling&#93; +3.0 +2.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%rest%#%^&quot; == &quot;0&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sR%#%^&quot; == &quot;0&quot; ^&gt;nul set /A &quot;fR+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;2&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;2&nbsp; toward 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;truncation, no rounding&#93; +2.0 +1.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;rem nothing left to do%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;1&quot; (%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;1&nbsp; to nearest, ties away from zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +3.0 +2.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;0&nbsp; to nearest, ties to even&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;default&#93; +2.0 +2.0 -2.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%r%#% == 1 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%rest%#%^&quot; == &quot;0&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR+=(fR&amp;1)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;overflow checking&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;if 0x1000000 LEQ %#%fR%#% ^&gt;nul set /A &quot;fR&gt;&gt;=1&quot;, &quot;eR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%fR%#% LSS 8388608 ^( ^&gt;nul set /A &quot;result=((sR&amp;1)&lt;&lt;31)|fR&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^&gt;nul set /A &quot;result=((sR&amp;1)&lt;&lt;31)|((eR+127)&lt;&lt;23)|(fR&amp;0x7FFFFF)&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;for %%a in ^(^&quot;%#%result%#%^&quot;^) do @for %%b in ^(^&quot;%#%param&#91;3&#93;:~1%#%^&quot;^) do @^(endlocal ^&amp; ^(if &quot;%%~b&quot; == &quot;&quot; ^( echo %%~a^) else ^(set &quot;%%~b=%%~a&quot;^)^)^)%\n%<br />^) else setlocal enableDelayedExpansion ^&amp; set params=, <br />)<br />&nbsp; &nbsp;(set #=)<br />::<br />:: end define $floatAdd<br /><br /><br />:: define $floatSub<br />::&nbsp; &nbsp;%~1 summand1 float in int coding<br />::&nbsp; &nbsp;%~2 summand2 float in int coding<br />::&nbsp; &nbsp;%~3 resulting float in int coding<br />&nbsp; &nbsp;(set #=0)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set bOR=^^^^) else (set bOR=^^)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set #=^^^^^^^^^^^^^^^!) else (set #=!)<br /><br />&nbsp; &nbsp;setlocal enableExtensions disableDelayedExpansion<br />&nbsp; &nbsp;set LF=^<br /><br /><br />&nbsp; &nbsp;set ^&quot;\n=^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#91;=%%~#^&lt;nul ^^^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#93;=^&lt;nul^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;endlocal &amp; (<br /><br />for %%# in (&quot;&quot;) do set $floatSub=@for %%N in ^(0 1^) do @if %%~N == 1 ^(%\n%<br />&nbsp; &nbsp;set &quot;N=0&quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;1&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;2&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;3&#93;= &quot;%\n%<br />&nbsp; &nbsp;for %%P in ^(%#%params%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;param&#91;%#%N%#%&#93;= %%~P^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;set &quot;N=&quot;%\n%<br />&nbsp; &nbsp;set &quot;result=&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;float1=param&#91;1&#93;&quot;, &quot;float2=param&#91;2&#93;&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s1=(float1&gt;&gt;31)&amp;1&quot;, &quot;e1=((float1&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f1=float1&amp;0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s2=(float2&gt;&gt;31)&amp;1&quot;, &quot;e2=((float2&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f2=float2&amp;0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s2=(1-s2)&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;deltaE=(e1-e2)&quot;%\n%<br />&nbsp; &nbsp;if %#%deltaE%#% LSS 0 ^&gt;nul set /A &quot;deltaE=-deltaE&quot;%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;if ^&quot;%#%e1%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%e2%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%s1%#%^&quot; == ^&quot;%#%s2%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float1|float2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=0x7FFFFFFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^) else if %#%e2%#% == 128 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float2&quot;%\n%<br />&nbsp; &nbsp;^) else if %#%deltaE%#% GEQ 25 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e1%#% LSS %#%e2%#% ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=float2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e1%#% == -127 ^( ^&gt;nul set /A &quot;e1+=1&quot; ^) else ^( ^&gt;nul set /A &quot;f1|=0x00800000&quot; ^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e2%#% == -127 ^( ^&gt;nul set /A &quot;e2+=1&quot; ^) else ^( ^&gt;nul set /A &quot;f2|=0x00800000&quot; ^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;watch one more bit needed to round (&lt;= 25 bits)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e1-=1&quot;, &quot;f1&lt;&lt;=1&quot;, &quot;e2-=1&quot;, &quot;f2&lt;&lt;=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;r=0&quot;, &quot;rUp=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;rest=0x01FFFFFF%bOR%((0x01FFFFFF&gt;&gt;deltaE)&lt;&lt;deltaE)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%e1%#% LSS %#%e2%#% ^( ^&gt;nul set /A &quot;e1+=deltaE&quot;, &quot;rest&amp;=f1&quot;, &quot;f1&gt;&gt;=(deltaE)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^&gt;nul set /A &quot;e2+=deltaE&quot;, &quot;rest&amp;=f2&quot;, &quot;f2&gt;&gt;=(deltaE)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%s1%#%^&quot; == ^&quot;%#%s2%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;sR=s1&quot;, &quot;eR=e1&quot;, &quot;fR=f1+f2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%s1%#% == 1 set ^&quot;f1=-%#%f1%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%s2%#% == 1 set ^&quot;f2=-%#%f2%#%^&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;sR=0&quot;, &quot;eR=e1&quot;, &quot;fR=f1+f2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%fR:~0,1%#%^&quot; == &quot;-&quot; ^&gt;nul set /A &quot;sR=1&quot;, &quot;fR=-fR&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;deltaE=eR+126&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%deltaE%#% LSS 0 ^( ^&gt;nul set /A &quot;deltaE=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if %#%deltaE%#% GTR 25 ^&gt;nul set /A &quot;deltaE=25&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(1,1,%#%deltaE%#%^) do @if %#%fR%#% LSS 16777216 ^&gt;nul set /A &quot;fR&lt;&lt;=1&quot;, &quot;eR-=1&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;perform rounding (renormalize to 24 bits again)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;roundingMode+=0&quot;, &quot;r=fR&amp;1&quot;, &quot;fR&gt;&gt;=1&quot;, &quot;eR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if 0x1000000 LEQ %#%fR%#% ^&gt;nul set /A &quot;fR&gt;&gt;=1&quot;, &quot;eR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%roundingMode%#%^&quot; == &quot;4&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;4&nbsp; toward -inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding down, or floor&#93; +2.0 +1.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%rest%#%^&quot; == &quot;0&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sR%#%^&quot; == &quot;1&quot; ^&gt;nul set /A &quot;fR+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;3&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;3&nbsp; toward +inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding up, or ceiling&#93; +3.0 +2.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%rest%#%^&quot; == &quot;0&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sR%#%^&quot; == &quot;0&quot; ^&gt;nul set /A &quot;fR+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;2&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;2&nbsp; toward 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;truncation, no rounding&#93; +2.0 +1.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;rem nothing left to do%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;1&quot; (%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;1&nbsp; to nearest, ties away from zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +3.0 +2.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;0&nbsp; to nearest, ties to even&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;default&#93; +2.0 +2.0 -2.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%r%#% == 1 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%rest%#%^&quot; == &quot;0&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR+=(fR&amp;1)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;overflow checking&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;if 0x1000000 LEQ %#%fR%#% ^&gt;nul set /A &quot;fR&gt;&gt;=1&quot;, &quot;eR+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%fR%#% LSS 8388608 ^( ^&gt;nul set /A &quot;result=((sR&amp;1)&lt;&lt;31)|fR&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^&gt;nul set /A &quot;result=((sR&amp;1)&lt;&lt;31)|((eR+127)&lt;&lt;23)|(fR&amp;0x7FFFFF)&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;for %%a in ^(^&quot;%#%result%#%^&quot;^) do @for %%b in ^(^&quot;%#%param&#91;3&#93;:~1%#%^&quot;^) do @^(endlocal ^&amp; ^(if &quot;%%~b&quot; == &quot;&quot; ^( echo %%~a^) else ^(set &quot;%%~b=%%~a&quot;^)^)^)%\n%<br />^) else setlocal enableDelayedExpansion ^&amp; set params=, <br />)<br />&nbsp; &nbsp;(set #=)<br />::<br />:: end define $floatSub<br /><br /><br />:: define $floatMul<br />::&nbsp; &nbsp;%~1 multiplicand1 float in int coding<br />::&nbsp; &nbsp;%~2 multiplicand1 float in int coding<br />::&nbsp; &nbsp;%~3 resulting float in int coding<br />::<br />:: (a1 * 2^12 + a0) * (b1 * 2^12 + b0) == a1*b1*2^24 + (a1*b0 + a0*b1)*2^12 + a0*b0<br />:: 1...&lt;n&gt;...1 * 1...&lt;n&gt;...1 == 1...&lt;n-1&gt;...1 0...&lt;n-1&gt;...0 1<br />:: =&gt; |ax*by|==2*12==24<br />:: let be:<br />::&nbsp; &nbsp;a1*b1 = AAAAAAAAAAAAAAAAAAAAAAAA,<br />::&nbsp; &nbsp;a1*b0 = BBBBBBBBBBBBCCCCCCCCCCCC,<br />::&nbsp; &nbsp;a0*b1 = DDDDDDDDDDDDEEEEEEEEEEEE,<br />::&nbsp; &nbsp;a0*b0 = FFFFFFFFFFFFFFFFFFFFFFFF<br />:: f1 * f2 == AAAAAAAAAAAAAAAAAAAAAAAA000000000000000000000000 +<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BBBBBBBBBBBBCCCCCCCCCCCC000000000000 +<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DDDDDDDDDDDDEEEEEEEEEEEE000000000000 +<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FFFFFFFFFFFFFFFFFFFFFFFF<br />&nbsp; &nbsp;(set #=0)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set bOR=^^^^) else (set bOR=^^)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set #=^^^^^^^^^^^^^^^!) else (set #=!)<br /><br />&nbsp; &nbsp;setlocal enableExtensions disableDelayedExpansion<br />&nbsp; &nbsp;set LF=^<br /><br /><br />&nbsp; &nbsp;set ^&quot;\n=^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#91;=%%~#^&lt;nul ^^^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#93;=^&lt;nul^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;endlocal &amp; (<br /><br />for %%# in (&quot;&quot;) do set $floatMul=@for %%N in ^(0 1^) do @if %%~N == 1 ^(%\n%<br />&nbsp; &nbsp;set &quot;N=0&quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;1&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;2&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;3&#93;= &quot;%\n%<br />&nbsp; &nbsp;for %%P in ^(%#%params%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;param&#91;%#%N%#%&#93;= %%~P^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;set &quot;N=&quot;%\n%<br />&nbsp; &nbsp;set &quot;result=&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;float1=param&#91;1&#93;&quot;, &quot;float2=param&#91;2&#93;&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s1=(float1&gt;&gt;31)&amp;1&quot;, &quot;e1=((float1&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f1=float1&amp;0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;s2=(float2&gt;&gt;31)&amp;1&quot;, &quot;e2=((float2&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f2=float2&amp;0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;if ^&quot;%#%e1%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if NOT ^&quot;%#%e2%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=((s1%bOR%s2)&lt;&lt;31)|((e1+127)&lt;&lt;23)|f1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%f1%#%^&quot; == ^&quot;%#%f2%#%^&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=((s1%bOR%s2)&lt;&lt;31)|((e1+127)&lt;&lt;23)|f1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=((s1%bOR%s2)&lt;&lt;31)|0x7FFFFFFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;^) else if ^&quot;%#%e2%#%^&quot; == &quot;128&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=((s1%bOR%s2)&lt;&lt;31)|((e2+127)&lt;&lt;23)|f2&quot;%\n%<br />&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%e1%#%^&quot; == &quot;-127&quot; ^( ^&gt;nul set /A &quot;e1+=1&quot; ^) else ^&gt;nul set /A &quot;f1|=0x00800000&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%e2%#%^&quot; == &quot;-127&quot; ^( ^&gt;nul set /A &quot;e2+=1&quot; ^) else ^&gt;nul set /A &quot;f2|=0x00800000&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f11=(f1&amp;0x00FFF000)&gt;&gt;12&quot;, &quot;f10=f1&amp;0x00000FFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;f21=(f2&amp;0x00FFF000)&gt;&gt;12&quot;, &quot;f20=f2&amp;0x00000FFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;AA=f11*f21&quot;, &quot;BC=f11*f20&quot;, &quot;DE=f10*f21&quot;, &quot;FF=f10*f20&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;B=(BC&amp;0x00FFF000)&gt;&gt;12&quot;, &quot;C=BC&amp;0x00000FFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;D=(DE&amp;0x00FFF000)&gt;&gt;12&quot;, &quot;E=DE&amp;0x00000FFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR0=((C+E)&lt;&lt;12)+FF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1=AA+B+D+(fR0&gt;&gt;24)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR0&amp;=0x00FFFFFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;sR=s1%bOR%s2&quot;, &quot;eR=e1+e2&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1=(fR1&lt;&lt;1)|(fR0&gt;&gt;23)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR0=(fR0&amp;0x007FFFFF)&lt;&lt;1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(1,1,48^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%fR1%#% LSS 8388608 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%eR%#% GTR -127 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1=(fR1&lt;&lt;1)|(fR0&gt;&gt;23)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR0=(fR0&amp;0x007FFFFF)&lt;&lt;1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;eR-=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;normalize fR1 to 24 bits (rest := (last 2 bits of) fR0, as (some bits) may disappear)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;rest1=fR0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for %%a in ^(1,2^) do @if %#%fR1%#% GEQ 16777216 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;d=(fR1&amp;1)&lt;&lt;24&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;eR+=1&quot;, &quot;fR1&gt;&gt;=1&quot;, &quot;fR0|=d&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;ensure minimum representable exponent (denormalized number: -127)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;set &quot;rest2=fR0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for /L %%a in ^(%#%eR%#%,1,-128^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;d=(fR1&amp;1)&lt;&lt;24&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;eR+=1&quot;, &quot;fR1&gt;&gt;=1&quot;, &quot;fR0|=d&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;perform rounding&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;roundingMode+=0&quot;, &quot;r=(fR0&amp;0x00800000)&gt;&gt;23&quot;, &quot;rest=fR0&amp;0x7FFFFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%rest%#%%#%rest1%#%%#%rest2%#%^&quot; == &quot;000&quot; ^( set &quot;rest=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else set &quot;rest=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%roundingMode%#%^&quot; == &quot;4&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;4&nbsp; toward -inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding down, or floor&#93; +2.0 +1.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%rest%#%^&quot; == &quot;1&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sR%#%^&quot; == &quot;1&quot; ^&gt;nul set /A &quot;fR1+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;3&quot; (%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;3&nbsp; toward +inf&nbsp; &nbsp; &nbsp; &nbsp; &#91;rounding up, or ceiling&#93; +3.0 +2.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%rest%#%^&quot; == &quot;1&quot; set &quot;r=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%sR%#%^&quot; == &quot;0&quot; ^&gt;nul set /A &quot;fR1+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;2&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;2&nbsp; toward 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;truncation, no rounding&#93; +2.0 +1.0 -1.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;rem nothing left to do%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else if ^&quot;%#%roundingMode%#%^&quot; == &quot;1&quot; ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;1&nbsp; to nearest, ties away from zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +3.0 +2.0 -2.0 -3.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1+=r&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5&quot;^<br />::&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;0&nbsp; to nearest, ties to even&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#91;default&#93; +2.0 +2.0 -2.0 -2.0&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%r%#% == 1 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%rest%#%^&quot; == &quot;0&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1+=(fR1&amp;1)&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;overflow checking&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;if %#%fR1%#% GEQ 16777216 ^&gt;nul set /A &quot;eR+=1&quot;, &quot;fR1&gt;&gt;=1&quot;%\n%<br />%&#91;%<br />::&quot;&nbsp; &nbsp;build result (denormalized/normalized numbers and check for inf)&quot;^<br />%&#93;%<br />&nbsp; &nbsp;&nbsp; &nbsp;if ^&quot;%#%eR%#%^&quot; == &quot;-127&quot; ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1&gt;&gt;=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if %#%eR%#% GEQ 128 ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1=0&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^) else ^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;fR1&amp;=0x007FFFFF&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;e=eR+127&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;result=(sR&lt;&lt;31)|((eR+127)&lt;&lt;23)|fR1&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;for %%a in ^(^&quot;%#%result%#%^&quot;^) do @for %%b in ^(^&quot;%#%param&#91;3&#93;:~1%#%^&quot;^) do @^(endlocal ^&amp; ^(if &quot;%%~b&quot; == &quot;&quot; ^( echo %%~a^) else ^(set &quot;%%~b=%%~a&quot;^)^)^)%\n%<br />^) else setlocal enableDelayedExpansion ^&amp; set params=, <br />)<br />&nbsp; &nbsp;(set #=)<br />::<br />:: end define $floatMul<br /><br /><br />:: define $intToHex<br />::&nbsp; &nbsp;%~1 int32 string value<br />::&nbsp; &nbsp;%~2 variable to store the hex value<br />::&nbsp; &nbsp;for optical improvement<br />&nbsp; &nbsp;(set #=0)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set bOR=^^^^) else (set bOR=^^)<br />&nbsp; &nbsp;if &quot;!#!&quot; == &quot;0&quot; (set #=^^^^^^^^^^^^^^^!) else (set #=!)<br /><br />&nbsp; &nbsp;setlocal enableExtensions disableDelayedExpansion<br />&nbsp; &nbsp;set LF=^<br /><br /><br />&nbsp; &nbsp;set ^&quot;\n=^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#91;=%%~#^&lt;nul ^^^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;set ^&quot;&#93;=^&lt;nul^^^%LF%%LF%^%LF%%LF%^&lt;nul ^^^&quot;<br />&nbsp; &nbsp;endlocal &amp; (<br /><br />for %%# in (&quot;&quot;) do set $intToHex=@for %%N in ^(0 1^) do @if %%~N == 1 ^(%\n%<br />&nbsp; &nbsp;set &quot;N=0&quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;1&#93;= &quot;%\n%<br />&nbsp; &nbsp;set &quot;param&#91;2&#93;= &quot;%\n%<br />&nbsp; &nbsp;for %%P in ^(%#%params%#%^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;N+=1&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;set ^&quot;param&#91;%#%N%#%&#93;= %%~P^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;set &quot;N=&quot;%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;^&gt;nul set /A &quot;num=param&#91;1&#93;&quot;%\n%<br />&nbsp; &nbsp;set &quot;hex= &quot;%\n%<br />&nbsp; &nbsp;set &quot;digits=0123456789ABCDEF&quot;%\n%<br />&nbsp; &nbsp;for /L %%a in ^(0,1,7^) do @^(%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;^&gt;nul set /A &quot;nibble=num&amp;0xF&quot;, &quot;num&gt;&gt;=4&quot;%\n%<br />&nbsp; &nbsp;&nbsp; &nbsp;for %%b in ^(%#%nibble%#%^) do @set ^&quot;hex=%#%digits:~%%b,1%#%%#%hex%#%^&quot;%\n%<br />&nbsp; &nbsp;^)%\n%<br />&nbsp; &nbsp;%\n%<br />&nbsp; &nbsp;for %%a in ^(^&quot;0x%#%hex%#%^&quot;^) do @for %%b in ^(^&quot;%#%param&#91;2&#93;:~1%#%^&quot;^) do @^(endlocal ^&amp; ^(if &quot;%%~b&quot; == &quot;&quot; ^( echo %%~a^) else ^(set &quot;%%~b=%%~a&quot;^)^)^)%\n%<br />^) else setlocal enableDelayedExpansion ^&amp; set params=, <br />)<br />&nbsp; &nbsp;(set #=)<br />::<br />:: end define $intToHex<br /><br />::<br />:: All macros loaded to memory: return success (errorLevel == 0).<br />exit /b 0<br /><br />:exit<br /></code></pre></div><br />A batch/JScript hybrid conversion can be found here:<a href="viewtopic8891.html?p=33820#p33820" class="postlink">http://www.dostips.com/forum/viewtopic.php?p=33820#p33820</a><br /><br /><br />penpen<br /><br />Edit: Corrected some flaws.<br />Edit2: Changed this: [It was a pain to me to do such incidentals (is this the right translation of the german slang: &quot;fieser Fummelkram&quot;?)] to<br />[It was a pain to me to do such tedious fiddling  (&quot;fieser Fummelkram&quot;),].<br />Edit3: Applied jebs changes to make it work under Windows 7, and added arithemtic float addition.<br />Further edits:<br />Replaced 0x80000000 by 1&lt;&lt;31, as it may lead to errors on WinXP64.<br />Fixed a bug in float2str where the fraction is cut of in step :: 'nice' numbers 2.<br />Cut of wrong 'nice' number steps so for the moment they're uglier.<br />Fixed :floatAdd by adding a &quot;&amp; goto :eof&quot; on 'early' results corrected the return value on !deltaE! GEQ 25 float1 &lt;-&gt; float2<br />Added :floatSub, :floatMul.<br />Edit5: Added the reference to the batch/JScript conversion (near bottom).<br />Edit6: Bugfixed the function floatAdd: It could happen that the sum of two 24 bit numbers added could be 25 (or 26 with rounding) bits long --&gt; then the exponent of the result must be incremented by 1 (or 2) and the fraction should be shifted left by 1 (or 2) (thanks to einstein1969).<br />Edit7: Added &quot; &amp; goto :eof&quot; in the functions :floatAdd, and :floatMul if result is defined early (thanks to einstein1969).<br />Edit8-15: Completed the implementation of rounding modes (except of detecting precisition acurately), removed some bugs, and converted the functions to macros.</div>

			
													<div class="notice">
					Last edited by <a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a> on 20 Aug 2014 08:32, edited 15 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28677" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile28677">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search661c.html?author_id=1265&amp;sr=posts">3386</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 22 Jan 2010 18:01</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28677">

						<h3 ><a href="#p28677">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting1279-2.html?mode=quote&amp;f=3&amp;p=28677" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic6faa.html?p=28677#p28677" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopic6faa.html?p=28677#p28677" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a></strong> &raquo; </span>18 Sep 2013 07:42
			</p>
			
			
			
			<div class="content">Very interesting. But too much code for the moment.<br />I get back a bundle of error messages. Was it intended or should each of your test calls work properly?<br /><br />[OT]<br /><blockquote class="uncited"><div>(is this the right translation of the german slang: &quot;fieser Fummelkram&quot;?)</div></blockquote><br /><em class="text-italics">tedious fiddling / pesky fumbling</em> even if I'm obviously not a native English <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> <br />[/OT]<br /><br />Regards<br />aGerman</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28679" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28679">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28679">

						<h3 ><a href="#p28679">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting3753.html?mode=quote&amp;f=3&amp;p=28679" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic70b8.html?p=28679#p28679" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopic70b8.html?p=28679#p28679" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Sep 2013 08:15
			</p>
			
			
			
			<div class="content">It should run error free and this is displayed under WinXP home (actually this is the only system, where i can test it):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>0x00000000 &lt;-- &quot;.e&quot; --&gt; &quot;0.0&quot;<br />0x00000000 &lt;-- &quot;.e3&quot; --&gt; &quot;0.0&quot;<br />0x3E4CCCCD &lt;-- &quot;.2e&quot; --&gt; &quot;0.2&quot;<br />0x3F800000 &lt;-- &quot;1.e&quot; --&gt; &quot;1.0&quot;<br />0x00000000 &lt;-- &quot;+.e&quot; --&gt; &quot;0.0&quot;<br />0x3F800000 &lt;-- &quot;+1.e&quot; --&gt; &quot;1.0&quot;<br />0x00000000 &lt;-- &quot;-.e&quot; --&gt; &quot;0.0&quot;<br />0xBF800000 &lt;-- &quot;-1.e&quot; --&gt; &quot;-1.0&quot;<br />0x7FFFFFFF &lt;-- &quot;NaN&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;NaN&quot;<br />0x7FFFFFFF &lt;-- &quot;+NaN&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;NaN&quot;<br />0xFFFFFFFF &lt;-- &quot;-NaN&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;-NaN&quot;<br />0x7FFFFFFF &lt;-- &quot;+NaN(7FFFFFFF)&quot; --&gt; &quot;NaN&quot;<br />0xFFFFFFFF &lt;-- &quot;-NaN(FFFFFFFF)&quot; --&gt; &quot;-NaN&quot;<br />0x7F800000 &lt;-- &quot;inf&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;inf&quot;<br />0x7F800000 &lt;-- &quot;+inf&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;inf&quot;<br />0xFF800000 &lt;-- &quot;-inf&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;-inf&quot;<br />0x00000000 &lt;-- &quot;0.0&quot; --&gt; &quot;0.0&quot;<br />0x01234567 &lt;-- &quot;0x01234567&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;2.99881655e-38&quot;<br />0x01234567 &lt;-- &quot;+0x01234567&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;2.99881655e-38&quot;<br />0x81234567 &lt;-- &quot;-0x01234567&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;-2.99881655e-38&quot;<br />0x447A0000 &lt;-- &quot;1000.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1000.0&quot;<br />0x447A0001 &lt;-- &quot;1000.00006&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1000.00006&quot;<br />0x358637BD &lt;-- &quot;0.000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e-6&quot;<br />0x00000001 &lt;-- &quot;1.4e-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.40129846e-45&quot;<br />0x00000003 &lt;-- &quot;4.2E-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;4.20389539e-45&quot;<br />0x00800001 &lt;-- &quot;1.1754945E-38&nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.17549449e-38&quot;<br />0x00400000 &lt;-- &quot;5.877472E-39&nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;5.87747175e-39&quot;<br />0x41460000 &lt;-- &quot;12.375&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;12.375&quot;<br />0x38D1B717 &lt;-- &quot;0.0001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e-4&quot;<br />0x3A83126F &lt;-- &quot;0.001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;0.001&quot;<br />0x3C23D70A &lt;-- &quot;0.01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;0.01&quot;<br />0x3DCCCCCD &lt;-- &quot;0.1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;0.1&quot;<br />0x3F800000 &lt;-- &quot;1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.0&quot;<br />0x41200000 &lt;-- &quot;10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;10.0&quot;<br />0x42C80000 &lt;-- &quot;100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;100.0&quot;<br />0x447A0000 &lt;-- &quot;1000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1000.0&quot;<br />0x461C4000 &lt;-- &quot;10000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;10000.0&quot;<br />0x47C35000 &lt;-- &quot;100000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;100000.0&quot;<br />0x49742400 &lt;-- &quot;1000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1000000.0&quot;<br />0x4B189680 &lt;-- &quot;10000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e7&quot;<br />0x42883EFA &lt;-- &quot;68.123&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;68.123&quot;<br />0x00800000 &lt;-- &quot;1.17549434E-38&nbsp; &nbsp; &quot; --&gt; &quot;1.17549435e-38&quot;<br />0x00400000 &lt;-- &quot;5.877472E-39&nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;5.87747175e-39&quot;<br />0xB58637BD &lt;-- &quot;-1.0e-6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;-1.0e-6&quot;<br />0x00C00000 &lt;-- &quot;1.763241500000E-38&quot; --&gt; &quot;1.76324153e-38&quot;<br />0x00002000 &lt;-- &quot;1.14794E-41&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.1479437e-41&quot;<br />0x00000001 &lt;-- &quot;1.4E-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.40129846e-45&quot;<br />0x501502F9 &lt;-- &quot;1.0e10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e10&quot;<br />0x501502F9 &lt;-- &quot;+1.0e+10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e10&quot;<br />0xAEDBE6FF &lt;-- &quot;- 1.0 e -10&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;-1.0e-10&quot;<br /></code></pre></div><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28680" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile28680">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search661c.html?author_id=1265&amp;sr=posts">3386</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 22 Jan 2010 18:01</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28680">

						<h3 ><a href="#p28680">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingccae.html?mode=quote&amp;f=3&amp;p=28680" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic9b26.html?p=28680#p28680" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopic9b26.html?p=28680#p28680" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a></strong> &raquo; </span>18 Sep 2013 08:22
			</p>
			
			
			
			<div class="content">Hmm. That's what it displays under my Win7 x86<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>0x00000000 &lt;-- &quot;.e&quot; --&gt; &quot;0.0&quot;<br />0x00000000 &lt;-- &quot;.e3&quot; --&gt; &quot;0.0&quot;<br />0x3E4CCCCD &lt;-- &quot;.2e&quot; --&gt; &quot;0.2&quot;<br />0x3F800000 &lt;-- &quot;1.e&quot; --&gt; &quot;1.0&quot;<br />0x00000000 &lt;-- &quot;+.e&quot; --&gt; &quot;0.0&quot;<br />0x3F800000 &lt;-- &quot;+1.e&quot; --&gt; &quot;1.0&quot;<br />0x00000000 &lt;-- &quot;-.e&quot; --&gt; &quot;0.0&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Fehlender Operand<br />0.0<br />0x00000000 &lt;-- &quot;-1.e&quot; --&gt; &quot;&quot;<br />0x7FFFFFFF &lt;-- &quot;NaN&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;NaN&quot;<br />0x7FFFFFFF &lt;-- &quot;+NaN&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;NaN&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Fehlender Operand<br />0.0<br />0x00000000 &lt;-- &quot;-NaN&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;&quot;<br />0x7FFFFFFF &lt;-- &quot;+NaN(7FFFFFFF)&quot; --&gt; &quot;NaN&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Numerische Konstanten sind entweder dezimale (17),<br />hexadezimale (0x11) oder oktale (021) Zahlen.<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Fehlender Operand<br />0.0<br />0x00000000 &lt;-- &quot;-NaN(FFFFFFFF)&quot; --&gt; &quot;&quot;<br />0x7F800000 &lt;-- &quot;inf&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;inf&quot;<br />0x7F800000 &lt;-- &quot;+inf&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;inf&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Fehlender Operand<br />0.0<br />0x00000000 &lt;-- &quot;-inf&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;&quot;<br />0x00000000 &lt;-- &quot;0.0&quot; --&gt; &quot;0.0&quot;<br />0x01234567 &lt;-- &quot;0x01234567&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;2.99881655e-38&quot;<br />0x01234567 &lt;-- &quot;+0x01234567&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;2.99881655e-38&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Fehlender Operand<br />0.0<br />0x00000000 &lt;-- &quot;-0x01234567&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;&quot;<br />0x447A0000 &lt;-- &quot;1000.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1000.0&quot;<br />0x447A0001 &lt;-- &quot;1000.00006&nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1000.00006&quot;<br />0x358637BD &lt;-- &quot;0.000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e-6&quot;<br />0x00000001 &lt;-- &quot;1.4e-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.40129846e-45&quot;<br />0x00000003 &lt;-- &quot;4.2E-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;4.20389539e-45&quot;<br />0x00800001 &lt;-- &quot;1.1754945E-38&nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.17549449e-38&quot;<br />0x00400000 &lt;-- &quot;5.877472E-39&nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;5.87747175e-39&quot;<br />0x41460000 &lt;-- &quot;12.375&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;12.375&quot;<br />0x38D1B717 &lt;-- &quot;0.0001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e-4&quot;<br />0x3A83126F &lt;-- &quot;0.001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;0.001&quot;<br />0x3C23D70A &lt;-- &quot;0.01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;0.01&quot;<br />0x3DCCCCCD &lt;-- &quot;0.1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;0.1&quot;<br />0x3F800000 &lt;-- &quot;1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.0&quot;<br />0x41200000 &lt;-- &quot;10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;10.0&quot;<br />0x42C80000 &lt;-- &quot;100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;100.0&quot;<br />0x447A0000 &lt;-- &quot;1000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1000.0&quot;<br />0x461C4000 &lt;-- &quot;10000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;10000.0&quot;<br />0x47C35000 &lt;-- &quot;100000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;100000.0&quot;<br />0x49742400 &lt;-- &quot;1000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1000000.0&quot;<br />0x4B189680 &lt;-- &quot;10000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e7&quot;<br />0x42883EFA &lt;-- &quot;68.123&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;68.123&quot;<br />0x00800000 &lt;-- &quot;1.17549434E-38&nbsp; &nbsp; &quot; --&gt; &quot;1.17549435e-38&quot;<br />0x00400000 &lt;-- &quot;5.877472E-39&nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;5.87747175e-39&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Fehlender Operand<br />0.0<br />0x00000000 &lt;-- &quot;-1.0e-6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;&quot;<br />0x00C00000 &lt;-- &quot;1.763241500000E-38&quot; --&gt; &quot;1.76324153e-38&quot;<br />0x00002000 &lt;-- &quot;1.14794E-41&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.1479437e-41&quot;<br />0x00000001 &lt;-- &quot;1.4E-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;1.40129846e-45&quot;<br />0x501502F9 &lt;-- &quot;1.0e10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e10&quot;<br />0x501502F9 &lt;-- &quot;+1.0e+10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; --&gt; &quot;1.0e10&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br />Fehlender Operand<br />0.0<br />0x00000000 &lt;-- &quot;- 1.0 e -10&nbsp; &nbsp; &nbsp; &nbsp;&quot; --&gt; &quot;&quot;<br /></code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28681" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28681">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28681">

						<h3 ><a href="#p28681">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingecd4.html?mode=quote&amp;f=3&amp;p=28681" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicbfe1.html?p=28681#p28681" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopicbfe1.html?p=28681#p28681" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Sep 2013 08:50
			</p>
			
			
			
			<div class="content">Seems Win7 doesn't like the '-' handling parts, especially with the &quot;-NaN(FFFFFFFF)&quot; part... should not generate so much errors, as it should have returned much more earlier.<br /><br />Has Windows 7 problems with one of this?<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;iPart=0xFFFFFFFF&quot;<br />set /A &quot;s=0x80000000&quot;<br />set /A &quot;float=%s%|0x7FFFFFFF&quot;<br />set /A &quot;float=%s%|0x7F800000&quot;<br />set /A &quot;float=%s%^%iPart%&quot;<br /></code></pre></div><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28682" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile28682">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search73f1.html?author_id=417&amp;sr=posts">880</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 30 Aug 2007 08:05</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany, Bochum</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28682">

						<h3 ><a href="#p28682">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc16f-2.html?mode=quote&amp;f=3&amp;p=28682" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic8140.html?p=28682#p28682" onclick="prompt('Message #6',this.href); return false;">#6</a></span> 
									<a class="unread" href="viewtopic8140.html?p=28682#p28682" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a></strong> &raquo; </span>18 Sep 2013 08:59
			</p>
			
			
			
			<div class="content"><img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> Nice, but much work for only converting the numbers, without any math functions.<br /><br />I got the same erros at Win7 64bit, like aGerman.<br /><br />I tested <br />call :floatTest &quot;-1.e&quot;<br /><br />Here it fails<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:: perform rounding: to nearest, ties to even<br />....<br />set /A &quot;float=-2147483648|1065353216|0&quot;</code></pre></div><br /><br />You could read the number explanation of dbenham at stackoverflow for the background<br /><br />jeb</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28683" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28683">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search661c.html?author_id=1265&amp;sr=posts">3386</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 22 Jan 2010 18:01</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28683">

						<h3 ><a href="#p28683">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2f53-2.html?mode=quote&amp;f=3&amp;p=28683" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic4df4-2.html?p=28683#p28683" onclick="prompt('Message #7',this.href); return false;">#7</a></span> 
									<a class="unread" href="viewtopic4df4-2.html?p=28683#p28683" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a></strong> &raquo; </span>18 Sep 2013 09:22
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>Has Windows 7 problems with one of this?</div></blockquote><br />Yes indeed it has<br />(ECHO ON)<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt; set &quot;iPart=0xFFFFFFFF&quot;<br /><br />&gt; set /A &quot;s=0x80000000&quot;<br /><br />&gt; set /A &quot;float=-2147483648|0x7FFFFFFF&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br /><br />&gt; set /A &quot;float=-2147483648|0x7F800000&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br /><br />&gt; set /A &quot;float=-2147483648^0xFFFFFFFF&quot;<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.<br /></code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28684" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile28684">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search73f1.html?author_id=417&amp;sr=posts">880</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 30 Aug 2007 08:05</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany, Bochum</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28684">

						<h3 ><a href="#p28684">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting961f.html?mode=quote&amp;f=3&amp;p=28684" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicb88c.html?p=28684#p28684" onclick="prompt('Message #8',this.href); return false;">#8</a></span> 
									<a class="unread" href="viewtopicb88c.html?p=28684#p28684" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a></strong> &raquo; </span>18 Sep 2013 09:31
			</p>
			
			
			
			<div class="content">But you can solve it with the hex representation<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\temp&gt;set /a b=-2147483648<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.</code></pre></div><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\temp&gt;set /a var1=0x80000000<br />-2147483648<br />C:\temp&gt;set /a var2=var1<br />-2147483648<br />C:\temp&gt;set /a var3=%var1%<br />Ungültige Zahl. Zahlen sind begrenzt auf eine Genauigkeit von 32 Bits.</code></pre></div><br /><br />This is batch, nothing make sense  <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />jeb</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28686" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28686">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28686">

						<h3 ><a href="#p28686">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge27f-2.html?mode=quote&amp;f=3&amp;p=28686" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic5a60.html?p=28686#p28686" onclick="prompt('Message #9',this.href); return false;">#9</a></span> 
									<a class="unread" href="viewtopic5a60.html?p=28686#p28686" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Sep 2013 09:57
			</p>
			
			
			
			<div class="content">So if you change the line<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp; &nbsp;set /A &quot;float=%s%|%e%|%f%&quot;<br /></code></pre></div>to this:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp; &nbsp;set /A &quot;float=s|e|f&quot;<br /></code></pre></div>it works using Win7?<br />(s is predefined using set /A &quot;s=0x80000000&quot;, maybe i should left the /A there to not convert this number)<br />If that is true i agree with:[quote=&quot;jeb&quot;]This is batch, nothing make sense <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /> /quote]<br /><br />@jeb: i can't find the number explanation of dbenham at stackoverflow:<br />I have tried to search for (several) combinations of &quot;batch numbers set /a problems win7 winxp user:dbenham ...&quot;. Do you have a link?<br /><br />penpen<br /><br />Edit:Does this work without errors using Win7?<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;iPart=0xFFFFFFFF&quot;<br />set &quot;s=0x80000000&quot;<br />set /A &quot;float=%s%|0x7FFFFFFF&quot;<br />set /A &quot;float=%s%|0x7F800000&quot;<br />set /A &quot;float=%s%^%iPart%&quot;<br /><br />:: or that<br />set &quot;iPart=0xFFFFFFFF&quot;<br />set /A &quot;s=0x80000000&quot;<br />set /A &quot;float=s|0x7FFFFFFF&quot;<br />set /A &quot;float=s|0x7F800000&quot;<br />set /A &quot;float=s^iPart&quot;<br /></code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28687" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile28687">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search661c.html?author_id=1265&amp;sr=posts">3386</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 22 Jan 2010 18:01</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28687">

						<h3 ><a href="#p28687">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting05ec.html?mode=quote&amp;f=3&amp;p=28687" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicad33.html?p=28687#p28687" onclick="prompt('Message #10',this.href); return false;">#10</a></span> 
									<a class="unread" href="viewtopicad33.html?p=28687#p28687" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a></strong> &raquo; </span>18 Sep 2013 10:19
			</p>
			
			
			
			<div class="content">Both are working but not quite the same way.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@prompt $g<br />setlocal<br />set &quot;iPart=0xFFFFFFFF&quot;<br />set &quot;s=0x80000000&quot;<br />set /A &quot;float=%s%|0x7FFFFFFF&quot;<br />rem %float%<br />set /A &quot;float=%s%|0x7F800000&quot;<br />rem %float%<br />set /A &quot;float=%s%^%iPart%&quot;<br />rem %float%<br />endlocal<br />rem ~~~~~~~~~~~~~~~~~~~~~<br />setlocal<br />set &quot;iPart=0xFFFFFFFF&quot;<br />set /A &quot;s=0x80000000&quot;<br />set /A &quot;float=s|0x7FFFFFFF&quot;<br />rem %float%<br />set /A &quot;float=s|0x7F800000&quot;<br />rem %float%<br />set /A &quot;float=s^iPart&quot;<br />rem %float%<br />endlocal<br />pause<br /></code></pre></div><br /><br />Result:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt;setlocal<br /><br />&gt;set &quot;iPart=0xFFFFFFFF&quot;<br /><br />&gt;set &quot;s=0x80000000&quot;<br /><br />&gt;set /A &quot;float=0x80000000|0x7FFFFFFF&quot;<br /><br />&gt;rem -1<br /><br />&gt;set /A &quot;float=0x80000000|0x7F800000&quot;<br /><br />&gt;rem -8388608<br /><br />&gt;set /A &quot;float=0x80000000^0xFFFFFFFF&quot;<br /><br />&gt;rem 2147483647<br /><br />&gt;endlocal<br /><br />&gt;rem ~~~~~~~~~~~~~~~~~~~~~<br /><br />&gt;setlocal<br /><br />&gt;set &quot;iPart=0xFFFFFFFF&quot;<br /><br />&gt;set /A &quot;s=0x80000000&quot;<br /><br />&gt;set /A &quot;float=s|0x7FFFFFFF&quot;<br /><br />&gt;rem -1<br /><br />&gt;set /A &quot;float=s|0x7F800000&quot;<br /><br />&gt;rem -8388608<br /><br />&gt;set /A &quot;float=s^iPart&quot;<br /><br />&gt;rem -1<br /><br />&gt;endlocal<br /><br />&gt;pause<br />Drücken Sie eine beliebige Taste . . .<br /></code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28688" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28688">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28688">

						<h3 ><a href="#p28688">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting64ad.html?mode=quote&amp;f=3&amp;p=28688" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic05d0.html?p=28688#p28688" onclick="prompt('Message #11',this.href); return false;">#11</a></span> 
									<a class="unread" href="viewtopic05d0.html?p=28688#p28688" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Sep 2013 10:51
			</p>
			
			
			
			<div class="content">Just frustrating...<br />The upper testcase version is running on win7 but produces &quot;Ungültige Zahl. Zahlen sind ... .&quot; errors on xp,<br />the lower version produces no errors but wrong results on both xp and win7,<br />and my original version produces &quot;Ungültige Zahl. Zahlen sind ... .&quot; errors on win7....<br /><br />The best is, i try to fix the bugs, when i have access to both win7 and winxp at the same time.<br />This will be next friday or saturday if i have luck.<br />Up to that i will trie to find and read the number explanation of dbenham at stackoverflow jeb hints to.<br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28689" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile28689">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search73f1.html?author_id=417&amp;sr=posts">880</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 30 Aug 2007 08:05</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany, Bochum</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28689">

						<h3 ><a href="#p28689">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting924c.html?mode=quote&amp;f=3&amp;p=28689" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic69c3.html?p=28689#p28689" onclick="prompt('Message #12',this.href); return false;">#12</a></span> 
									<a class="unread" href="viewtopic69c3.html?p=28689#p28689" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a></strong> &raquo; </span>18 Sep 2013 11:02
			</p>
			
			
			
			<div class="content">I'm not sure if these are the best posts, but here is one at dostips<br /><a href="viewtopicd50e-2.html?f=3&amp;t=3758" class="postlink">Rules for how CMD.EXE parses numbers</a><br />And one at stackoverflow <a href="http://stackoverflow.com/a/9116378/463115" class="postlink">IF failure - How can 30000000000000 equal 40000000000?</a><br /><br />jeb</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28690" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28690">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search661c.html?author_id=1265&amp;sr=posts">3386</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 22 Jan 2010 18:01</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28690">

						<h3 ><a href="#p28690">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting91fc.html?mode=quote&amp;f=3&amp;p=28690" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic5e67.html?p=28690#p28690" onclick="prompt('Message #13',this.href); return false;">#13</a></span> 
									<a class="unread" href="viewtopic5e67.html?p=28690#p28690" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a></strong> &raquo; </span>18 Sep 2013 12:00
			</p>
			
			
			
			<div class="content">Next attempt with again another result <img class="smilies" src="images/smilies/icon_confused.gif" alt=":?" title="Confused" /> <br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@prompt $g &amp;setlocal<br />set &quot;iPart=0xFFFFFFFF&quot;<br />set &quot;s=0x80000000&quot;<br />set /A &quot;float=s|0x7FFFFFFF&quot;<br />rem %float%<br />set /A &quot;float=s|0x7F800000&quot;<br />rem %float%<br />set /A &quot;float=s^%iPart%&quot;<br />rem %float%<br />pause<br /></code></pre></div><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt; set &quot;iPart=0xFFFFFFFF&quot;<br /><br />&gt; set &quot;s=0x80000000&quot;<br /><br />&gt; set /A &quot;float=s|0x7FFFFFFF&quot;<br /><br />&gt; rem 2147483647<br /><br />&gt; set /A &quot;float=s|0x7F800000&quot;<br /><br />&gt; rem 2147483647<br /><br />&gt; set /A &quot;float=s^0xFFFFFFFF&quot;<br /><br />&gt; rem -2147483648<br /><br />&gt; pause<br />Drücken Sie eine beliebige Taste . . .<br /></code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28691" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile28691">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search73f1.html?author_id=417&amp;sr=posts">880</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 30 Aug 2007 08:05</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany, Bochum</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28691">

						<h3 ><a href="#p28691">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingbf56.html?mode=quote&amp;f=3&amp;p=28691" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicc432-2.html?p=28691#p28691" onclick="prompt('Message #14',this.href); return false;">#14</a></span> 
									<a class="unread" href="viewtopicc432-2.html?p=28691#p28691" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a></strong> &raquo; </span>18 Sep 2013 12:03
			</p>
			
			
			
			<div class="content">I fixed the code and tested it successfully with XP/32 and Win7/64.<br />The changes are minimal, I replaced <strong class="text-strong">%var%</strong> in SET /a expressions with only <strong class="text-strong">var</strong><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />cls<br />call :floatTest &quot;.e&quot;<br />call :floatTest &quot;.e3&quot;<br />call :floatTest &quot;.2e&quot;<br />call :floatTest &quot;1.e&quot;<br />call :floatTest &quot;+.e&quot;<br />call :floatTest &quot;+1.e&quot;<br />call :floatTest &quot;-.e&quot;<br />call :floatTest &quot;-1.e&quot;<br /><br />call :floatTest &quot;NaN&nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;+NaN&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;-NaN&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;+NaN(7FFFFFFF)&quot;<br />call :floatTest &quot;-NaN(FFFFFFFF)&quot;<br /><br />call :floatTest &quot;inf&nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;+inf&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;-inf&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br /><br />call :floatTest &quot;0.0&quot;<br /><br />call :floatTest &quot;0x01234567&nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;+0x01234567&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;-0x01234567&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br /><br />call :floatTest &quot;1000.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;1000.00006&nbsp; &nbsp; &nbsp; &nbsp; &quot;<br /><br />call :floatTest &quot;0.000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;1.4e-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;4.2E-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;1.1754945E-38&nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;5.877472E-39&nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;12.375&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br /><br />call :floatTest &quot;0.0001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;0.001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;0.01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;0.1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;1000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;10000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;100000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;1000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br />call :floatTest &quot;10000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br /><br />call :floatTest &quot;68.123&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;1.17549434E-38&nbsp; &nbsp; &quot;<br />call :floatTest &quot;5.877472E-39&nbsp; &nbsp; &nbsp; &quot;<br /><br />call :floatTest &quot;-1.0e-6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br /><br />call :floatTest &quot;1.763241500000E-38&quot;<br />call :floatTest &quot;1.14794E-41&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br /><br />call :floatTest &quot;1.4E-45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<br /><br /><br />call :floatTest &quot;1.0e10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;+1.0e+10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;<br />call :floatTest &quot;- 1.0 e -10&nbsp; &nbsp; &nbsp; &nbsp;&quot;<br /><br />goto :eof<br /><br /><br />:floatTest<br />::&nbsp; &nbsp;%~1 float string<br />::&nbsp; &nbsp;%~2 variable to store the resulting int coding of the float in hexadecimal representation if present,<br />::&nbsp; &nbsp; &nbsp; &nbsp;else echo hex value if undefined<br />&nbsp; &nbsp;setlocal enableDelayedExpansion<br />&nbsp; &nbsp;set &quot;float=&quot;<br /><br />&nbsp; &nbsp;call :str2float &quot;%~1&quot; float<br />&nbsp; &nbsp;call :intToHex hex &quot;%float%&quot;<br /><br />&nbsp; &nbsp;call :float2str %float% string<br /><br />&nbsp; &nbsp;endlocal &amp; if &quot;%~2&quot; == &quot;&quot; ( echo %hex% ^&lt;-- &quot;%~1&quot; --^&gt; &quot;%string%&quot; ) else ( set &quot;%~2=%hex%&quot; --^&gt; &quot;%string%&quot; )<br />&nbsp; &nbsp;goto :eof<br /><br /><br /><br />:intToHex<br />::&nbsp; &nbsp;%~1 variable to store the hex value<br />::&nbsp; &nbsp;%~2 int32 string value<br />::&nbsp; &nbsp;needed only to simulate the &quot;random_pass=$(dd...&quot; line in procedure &quot;:do_a_file&quot;<br />&nbsp; &nbsp;setlocal enableDelayedExpansion<br />&nbsp; &nbsp;set /A &quot;num=%~2&quot;<br />&nbsp; &nbsp;set &quot;hex=&quot;<br />&nbsp; &nbsp;set &quot;digits=0123456789ABCDEF&quot;<br />&nbsp; &nbsp;for /L %%a in (0,1,7) do (<br />&nbsp; &nbsp; &nbsp; set /A &quot;nibble=num&amp;0xF&quot;, &quot;num&gt;&gt;=4&quot;<br />&nbsp; &nbsp; &nbsp; for %%b in (!nibble!) do set &quot;hex=!digits:~%%b,1!!hex!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;endlocal &amp; set &quot;%~1=0x%hex%&quot;<br />&nbsp; &nbsp;goto :eof<br /><br /><br />:intToHex<br />::&nbsp; &nbsp;%~1 variable to store the hex value<br />::&nbsp; &nbsp;%~2 int32 string value<br />::&nbsp; &nbsp;needed only to simulate the &quot;random_pass=$(dd...&quot; line in procedure &quot;:do_a_file&quot;<br />&nbsp; &nbsp;setlocal enableDelayedExpansion<br />&nbsp; &nbsp;set /A &quot;num=%~2&quot;<br />&nbsp; &nbsp;set &quot;hex=&quot;<br />&nbsp; &nbsp;set &quot;digits=0123456789ABCDEF&quot;<br />&nbsp; &nbsp;for /L %%a in (0,1,7) do (<br />&nbsp; &nbsp; &nbsp; set /A &quot;nibble=num&amp;0xF&quot;, &quot;num&gt;&gt;=4&quot;<br />&nbsp; &nbsp; &nbsp; for %%b in (!nibble!) do set &quot;hex=!digits:~%%b,1!!hex!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;endlocal &amp; set &quot;%~1=0x%hex%&quot;<br />&nbsp; &nbsp;goto :eof<br /><br /><br />:: Rounding to integers using the IEEE 754 rules<br />:: No Rounding mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +2.5 +1.5 -1.5 -2.5<br />:: 0&nbsp; to nearest, ties to even&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(default) +2.0 +2.0 -2.0 -2.0<br />:: 1&nbsp; to nearest, ties away from zero (truncation) +3.0 +2.0 -2.0 -3.0<br />:: 2&nbsp; toward 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+2.0 +1.0 -1.0 -2.0<br />:: 3&nbsp; toward +inf&nbsp; &nbsp; &nbsp; &nbsp; (rounding up, or ceiling) +3.0 +2.0 -1.0 -2.0<br />:: 4&nbsp; toward -inf&nbsp; &nbsp; &nbsp; &nbsp; (rounding down, or floor) +2.0 +1.0 -2.0 -3.0<br />::<br />:str2float<br />::&nbsp; &nbsp;%~1 float string<br />::&nbsp; &nbsp;%~2 variable to store the resulting int coding of the float<br />::&nbsp; &nbsp;actually there is no error detection,<br />::&nbsp; &nbsp;so assumed: no errorneous strings<br />::&nbsp; &nbsp;set &quot;inf=0x7F800000&quot;<br />::&nbsp; &nbsp;set &quot;nan=0x7FFFFFFF&quot;<br />::&nbsp; &nbsp;ignore NaN(...), +NaN(...), -NaN(...) format: NaN, +NaN, -NaN watched<br />::&nbsp; &nbsp;&quot;&quot;, &quot;+&quot;, &quot;NaN&quot;, &quot;+NaN&quot; -&gt;&nbsp; NaN == 0x7FFFFFFF == 2147483647<br />::&nbsp; &nbsp;&quot;-&quot;, &quot;-NaN&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; -NaN == 0xFFFFFFFF == -1<br />::&nbsp; &nbsp;&quot;inf&quot;, &quot;+inf&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;&nbsp; inf == 0x7F800000 == 2139095040<br />::&nbsp; &nbsp;&quot;-inf&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt; -inf == 0xFF800000 == -8388608<br />::<br />&nbsp; &nbsp;if &quot;%~2&quot; == &quot;&quot; exit /b 1<br />&nbsp; &nbsp;if &quot;%~1&quot; == &quot;&quot; set /A &quot;%~2=0x7FFFFFFF&quot; &amp; exit /b 0<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;setlocal enableDelayedExpansion<br /><br />::&nbsp; &nbsp;divide in parts: sPart * iPart.fPart * 10^^ePart<br />&nbsp; &nbsp;set &quot;string=%~1&quot;<br />&nbsp; &nbsp;set &quot;string= %string: =%&quot;<br />&nbsp; &nbsp;set &quot;float=&quot;<br /><br />&nbsp; &nbsp;set &quot;ePart=%string:*e=%&quot;<br />&nbsp; &nbsp;if &quot;%string%&quot; == &quot;%ePart%&quot; set &quot;ePart=&quot;<br />&nbsp; &nbsp;set &quot;string=!string:e%ePart%=!&quot;<br />&nbsp; &nbsp;if not defined ePart set &quot;ePart=0&quot;<br /><br />&nbsp; &nbsp;set &quot;fPart=%string:*.=%&quot;<br />&nbsp; &nbsp;if &quot;%string%&quot; == &quot;%fPart%&quot; set &quot;fPart=&quot;<br />&nbsp; &nbsp;set &quot;string=!string:.%fPart%=!&quot;<br />&nbsp; &nbsp;if &quot;%fPart%&quot; == &quot;&quot; set &quot;fPart=0&quot;<br /><br />&nbsp; &nbsp;if &quot;%string:~1,1%&quot; == &quot;-&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;iPart=%string:~2%&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;sPart=-1&quot;<br />&nbsp; &nbsp;)else if &quot;%string:~1,1%&quot; == &quot;+&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;iPart=%string:~2%&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;sPart=1&quot;<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; set &quot;iPart=%string:~1%&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;sPart=1&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if not defined iPart set &quot;iPart=0&quot;<br /><br />::&nbsp; &nbsp;set sign flag (s)<br />&nbsp; &nbsp;if %sPart% == -1 ( set /A &quot;s=0x80000000&quot; ) else ( set &quot;s=0&quot; )<br /><br />::&nbsp; &nbsp;detect NaN, inf and hex format<br />&nbsp; &nbsp;if &quot;%iPart:~0,3%&quot; == &quot;NaN&quot; ( set /A &quot;float=s|0x7FFFFFFF&quot;<br />&nbsp; &nbsp;) else if &quot;%iPart:~0,3%&quot; == &quot;inf&quot; ( set /A &quot;float=s|0x7F800000&quot;<br />&nbsp; &nbsp;) else if &quot;%iPart:~0,2%&quot; == &quot;0x&quot; ( set /A &quot;float=s ^ iPart&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if defined float (endlocal &amp; (if &quot;%~2&quot; == &quot;&quot; ( echo(%float%) else (set &quot;%~2=%float%&quot;)) &amp; goto :eof)<br /><br />::&nbsp; &nbsp;normalize to: sPart * 0.significand * 10^ePart, 0.significand &gt;= 0.1<br />::&nbsp; &nbsp;AND<br />::&nbsp; &nbsp;detect 0.0<br />&nbsp; &nbsp;for /F &quot;tokens=* delims= &quot; %%a in (&quot;%iPart:0= %&quot;) do set &quot;iPartP=%%~a&quot;<br />&nbsp; &nbsp;if defined iPartP (<br />&nbsp; &nbsp; &nbsp; set &quot;iPartP=!iPartP: =0!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;string= !iPart!&quot;<br />&nbsp; &nbsp; &nbsp; for %%a in (4096,2048,1024,512,256,128,64,32,16,8,4,2,1) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if not &quot;!string:~%%a,1!&quot; == &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;string=!string:~%%a!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;ePart+=%%a&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; set &quot;significand=!iPartP!!fPart!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;iPartP=&quot;<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; for /F &quot;tokens=* delims= &quot; %%a in (&quot;%fPart:0= %&quot;) do set &quot;fPartP=%%~a&quot;<br />&nbsp; &nbsp; &nbsp; if defined fPartP (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;fPartP=!fPartP: =0!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for %%a in (!fPartP!) do set &quot;string= !fPart:%%a=!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for %%a in (4096,2048,1024,512,256,128,64,32,16,8,4,2,1) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not &quot;!string:~%%a,1!&quot; == &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;string=!string:~%%a!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;ePart-=%%a&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;significand=!fPartP!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;fPartP=&quot;<br />&nbsp; &nbsp; &nbsp; ) else ( set /A &quot;float=0&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if defined float (endlocal &amp; (if &quot;%~2&quot; == &quot;&quot; ( echo(%float%) else (set &quot;%~2=%float%&quot;)) &amp; goto :eof)<br /><br />::&nbsp; &nbsp;drop unneeded digits<br />::&nbsp; &nbsp;transform to: sPart * high_{8}.high_{7-0}low{7-0} * 5^ePart * 2^e_2<br />&nbsp; &nbsp;set &quot;significand=%significand:~0,17%0000000000000000&quot;<br />&nbsp; &nbsp;set &quot;high=%significand:~0,9%&quot;<br />&nbsp; &nbsp;set /A &quot;ePart-=1&quot;<br />&nbsp; &nbsp;set /a &quot;e_2=ePart&quot;<br />&nbsp; &nbsp;set &quot;low=%significand:~9,8%&quot;<br /><br />&nbsp; &nbsp;for %%a in (9 4 2) do (<br />&nbsp; &nbsp; &nbsp; set /A &quot;c=high&amp;1&quot;<br />&nbsp; &nbsp; &nbsp; if !high! GEQ 200000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high&gt;&gt;=1&quot;, &quot;low=!c!!low!&gt;&gt;1&quot;, &quot;e_2+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br /><br />::&nbsp; &nbsp;transform to: sPart * high_{8}.high_{7-0}low{7-0} * 2^e_2<br />&nbsp; &nbsp;if %ePart% LSS 0 (<br />&nbsp; &nbsp; &nbsp; for /L %%a in (%ePart%,1,-1) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;ePart+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;c=!high:~-1!%%5&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;cc=c+1&quot;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !high! LSS 125000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high=(((!high!-c)/5)&lt;&lt;3)&quot;, &quot;e_2-=3&quot;, &quot;ePart+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;low=((!cc!!low!-100000000)/5)&lt;&lt;3&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high=(((!high!-c)/5)&lt;&lt;2)&quot;, &quot;e_2-=2&quot;, &quot;ePart+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;low=((!cc!!low!-100000000)/5)&lt;&lt;2&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !low! GEQ 100000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;c=!low:~0,1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=!low:~1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high+=c&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else if %ePart% GTR 0 (<br />&nbsp; &nbsp; &nbsp; for /L %%a in (%ePart%,-1,1) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;c=!high!&amp;7&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;cc=c+1&quot;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !high! LSS 160000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high=(((!high!-c)&gt;&gt;2)*5)&quot;, &quot;e_2+=2&quot;, &quot;ePart-=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;low=((!cc!!low!-100000000)&gt;&gt;2)*5&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high=(((!high!-c)&gt;&gt;3)*5)&quot;, &quot;e_2+=3&quot;, &quot;ePart-=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;low=((!cc!!low!-100000000)&gt;&gt;3)*5&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !low! GEQ 100000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;c=!low:~0,1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=!low:~1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high+=c&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set &quot;f=0&quot;<br />&nbsp; &nbsp;for /L %%a in (0, 1 24) do (<br />&nbsp; &nbsp; &nbsp; if !high! GEQ 100000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;f=(f&lt;&lt;1)+1&quot;, &quot;high=(!high!-100000000)&lt;&lt;1&quot;<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high&lt;&lt;=1&quot;, &quot;f&lt;&lt;=1&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; set /A &quot;low=(1!low!-100000000)&lt;&lt;1&quot;<br />&nbsp; &nbsp; &nbsp; if !low! GEQ 100000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high+=1&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp;)<br /><br />:: set uo round bit (r) that specifies if rounding is performed, and<br />:: if number is greater that the round bit (rUp: true==1 false==0); this means more bits or decimal digits are available<br />&nbsp; &nbsp;set /A &quot;r=f&amp;1&quot;<br />&nbsp; &nbsp;set /A &quot;f&gt;&gt;=1&quot;<br />&nbsp; &nbsp;set &quot;rUp=1&quot;<br />&nbsp; &nbsp;if %high% == 0 if 1%low% == 100000000 set &quot;rUp=0&quot;<br />&nbsp; &nbsp;<br /><br />:: build float<br />&nbsp; &nbsp;if %e_2% LEQ -127 (<br />&nbsp; &nbsp; &nbsp; set &quot;test=0&quot;<br />&nbsp; &nbsp; &nbsp; for /L %%a in (%e_2%,1,-127) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if r == 1 set &quot;rUp=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;r=f&amp;1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;f&gt;&gt;=1&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; set /A &quot;e_2=-127&quot;<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; if %e_2% GTR 128 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;e_2=128&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />:: perform rounding: to nearest, ties to even<br />&nbsp; &nbsp;if %r% == 1 (<br />&nbsp; &nbsp; &nbsp; if %rUp% == 1 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;f+=1&quot;<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;l=f&amp;1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !l! == 1 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;f+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;if %e_2% == -127 (<br />&nbsp; &nbsp; &nbsp; if %f% == 8388608 set /A &quot;e_2+=1&quot;<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; if %f% == 16777216 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;e_2+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;f&gt;&gt;=1&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;set /A &quot;e=(e_2+127)&lt;&lt;23&quot;<br />&nbsp; &nbsp;if %e% == 255 ( set &quot;f=0&quot; ) else ( set /A &quot;f&amp;=0x007FFFFF&quot; )<br />&nbsp; &nbsp;set /A &quot;float=s|e|f&quot;<br /><br /><br />&nbsp; &nbsp;endlocal &amp; (if &quot;%~2&quot; == &quot;&quot; ( echo(%float% %~2) else (set &quot;%~2=%float%&quot;))<br />&nbsp; &nbsp;goto :eof<br /><br /><br />:float2str<br />::&nbsp; &nbsp;%~1 float value (int coding)<br />::&nbsp; &nbsp;%~2 variable to store the resulting string if exists,<br />::&nbsp; &nbsp; &nbsp; &nbsp;else echo string value if undefined<br />&nbsp; &nbsp;setlocal enableDelayedExpansion<br /><br />::&nbsp; &nbsp;transform to: sPart * high_{8}.high_{7-0}low{7-0} * 2^e<br />&nbsp; &nbsp;set &quot;float=%~1&quot;<br />&nbsp; &nbsp;set /A &quot;s=(float&gt;&gt;31)&amp;1&quot;, &quot;e_2=((float&gt;&gt;23)&amp;0x000000FF)-127&quot;, &quot;f=float&amp;0x007FFFFF&quot;<br />&nbsp; &nbsp;if %s% == 1 ( set &quot;sPart=-1&quot; ) else ( set &quot;sPart=1&quot; )<br /><br /><br />&nbsp; &nbsp;if %e_2% == -127 (<br />&nbsp; &nbsp; &nbsp; if !f! == 0 endlocal &amp; (if &quot;%~2&quot; == &quot;&quot; ( echo 0.0) else (set &quot;%~2=0.0&quot;)) &amp; goto :eof<br /><br />&nbsp; &nbsp; &nbsp; for /L %%a in (0,1,23) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !f! LSS 8388608 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;e_2-=1&quot;, &quot;f&lt;&lt;=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; set /A &quot;e_2+=1&quot;<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; if %e_2% == 128 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if %f% == 0 ( endlocal &amp; (if &quot;%~2&quot; == &quot;&quot; ( echo %sPart:1=%inf) else (set &quot;%~2=%sPart:1=%inf&quot;)) &amp; goto :eof<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else ( endlocal &amp; (if &quot;%~2&quot; == &quot;&quot; ( echo %sPart:1=%NaN) else (set &quot;%~2=%sPart:1=%NaN&quot;)) &amp; goto :eof<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; set /A &quot;f|=0x00800000&quot;<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;set &quot;high=0&quot;<br />&nbsp; &nbsp;set &quot;low=00000000&quot;<br />&nbsp; &nbsp;for /L %%a in (0, 1, 23) do (<br />&nbsp; &nbsp; &nbsp; set /A &quot;b=f&amp;1&quot;<br />&nbsp; &nbsp; &nbsp; set /A &quot;f&gt;&gt;=1&quot;<br />&nbsp; &nbsp; &nbsp; set /A &quot;c=high&amp;1&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;d=!low:~0,1!&quot;<br /><br />&nbsp; &nbsp; &nbsp; if !c! == 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;low=(1!low!-100000000)&gt;&gt;1&quot;<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;low=(!c!!low!)&gt;&gt;1&quot;<br />&nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; set /A &quot;high&gt;&gt;=1&quot;<br />&nbsp; &nbsp; &nbsp; if !b! == 1 set /A &quot;high+=100000000&quot;<br />&nbsp; &nbsp;)<br /><br />::&nbsp; &nbsp;transform to: sPart * high_{8}.high_{7-0}low{7-0} * 10^ePart<br />&nbsp; &nbsp;set &quot;ePart=0&quot;<br />&nbsp; &nbsp;if %e_2% GTR 0 (<br />&nbsp; &nbsp; &nbsp; set /A &quot;N=(e_2&gt;&gt;1)+1&quot;<br />&nbsp; &nbsp; &nbsp; for /L %%a in (!N!,-1,1) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !e_2! GTR !ePart! (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;c=!high:~-1!%%5&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;cc=c+1&quot;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if !high! LSS 125000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high=(((!high!-c)/5)&lt;&lt;3)&quot;, &quot;e_2-=3&quot;, &quot;ePart+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;low=((!cc!!low!-100000000)/5)&lt;&lt;3&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high=(((!high!-c)/5)&lt;&lt;2)&quot;, &quot;e_2-=2&quot;, &quot;ePart+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;low=((!cc!!low!-100000000)/5)&lt;&lt;2&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if !low! GEQ 100000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;c=!low:~0,1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high+=c&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; set /A &quot;e_2-=ePart&quot;<br />&nbsp; &nbsp; &nbsp; if !e_2! LSS 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;c=!high:~-1!&amp;((1&lt;&lt;(-e_2))-1)&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;cc=c+1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high=((!high!-c)&gt;&gt;(-e_2))&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;low=((!cc!!low!-100000000)&gt;&gt;(-e_2))&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;e_2=0&quot;<br />&nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; if !high! LSS 1000000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;high=!high!!low:~0,1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~1!0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;ePart-=1&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else if %e_2% LSS 0 (<br />&nbsp; &nbsp; &nbsp; set /A &quot;N=(e_2&gt;&gt;1)-1&quot;<br />&nbsp; &nbsp; &nbsp; for /L %%a in (!N!,1,-1) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !e_2! LSS !ePart! (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;c=!high!&amp;7&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;cc=c+1&quot;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if !high! LSS 160000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high=(((!high!-c)&gt;&gt;2)*5)&quot;, &quot;e_2+=2&quot;, &quot;ePart-=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;low=((!cc!!low!-100000000)&gt;&gt;2)*5&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high=(((!high!-c)&gt;&gt;3)*5)&quot;, &quot;e_2+=3&quot;, &quot;ePart-=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;low=((!cc!!low!-100000000)&gt;&gt;3)*5&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if !low! GEQ 100000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;c=!low:~0,1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;low=!low:~1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high+=c&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; set /A &quot;e_2-=ePart&quot;<br />&nbsp; &nbsp; &nbsp; if !e_2! GTR 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high&lt;&lt;=e_2&quot;, &quot;low=((1!low!-100000000)&lt;&lt;e_2)&quot;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !low! GEQ 100000000 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high+=!low:~0,1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=!low:~1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=00000000!low!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;low=!low:~-8!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;e_2=0&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />:: perform rounding: to nearest, ties to even (9th digit)<br />&nbsp; &nbsp;set &quot;r=0&quot;<br />&nbsp; &nbsp;set &quot;rUp=0&quot;<br />&nbsp; &nbsp;if %low:~0,1% GEQ 5 set &quot;r=1&quot;<br />&nbsp; &nbsp;if %low:~0,1% GTR 5 set &quot;rUp=1&quot;<br />&nbsp; &nbsp;if 1%low:~1% GTR 10000000 set &quot;rUp=1&quot;<br /><br />&nbsp; &nbsp;if %r% == 1 (<br />&nbsp; &nbsp; &nbsp; if %rUp% == 1 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;high+=1&quot;<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;l=f&amp;1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !l! == 1 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A &quot;high+=1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />::perform rounding to 'nice' numbers 1: last 3 digits &lt;= '005'<br />&nbsp; &nbsp;if 1%high:~-3% LEQ 1005 set &quot;high=%high:~0,-1%0&quot;<br /><br /><br />::perform rounding to 'nice' numbers 2: last 4 digits &lt;= '0050'<br />&nbsp; &nbsp;if 1%high:~-4% LEQ 10050 set &quot;high=%high:~0,-2%00&quot;<br /><br />::perform rounding to 'nice' numbers 3: last 3 digits &gt;= '995'<br />&nbsp; &nbsp;if 1%high:~-3% GEQ 1995 (<br />&nbsp; &nbsp; &nbsp; set &quot;high=%high:~0,-1%9&quot;<br />&nbsp; &nbsp; &nbsp; set /A &quot;high+=1&quot;<br />&nbsp; &nbsp;)<br /><br />::perform rounding to 'nice' numbers 4: last 4 digits &gt;= '9950'<br />&nbsp; &nbsp;if 1%high:~-4% GEQ 19950 (<br />&nbsp; &nbsp; &nbsp; set &quot;high=%high:~0,-2%99&quot;<br />&nbsp; &nbsp; &nbsp; set /A &quot;high+=1&quot;<br />&nbsp; &nbsp;)<br /><br />:: overflow checking<br />&nbsp; &nbsp;if %high% GEQ 1000000000 (<br />&nbsp; &nbsp; &nbsp; set &quot;high=%high:~0,-1%&quot;<br />&nbsp; &nbsp; &nbsp; set /A &quot;ePart+=1&quot;<br />&nbsp; &nbsp;)<br /><br />::perform using 'nice' numbers 1: no trailing zeroes, except if none exits prior or after the seperator<br />&nbsp; &nbsp;for /L %%a in (1,1,8) do (<br />&nbsp; &nbsp; &nbsp; if defined high (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !high:~-1! == 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;high=!high:~0,-1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br /><br />::perform using 'nice' numbers 2: 6 digits prior to separator or 3 digits after are allowed to avoid 'e'<br />&nbsp; &nbsp;set &quot;integer=%high:~0,1%&quot;<br />&nbsp; &nbsp;set &quot;fraction=%high:~1%&quot;<br /><br /><br />&nbsp; &nbsp;if -4 LSS %ePart% if %ePart% LSS 7 (<br />&nbsp; &nbsp; &nbsp; if %ePart% LSS 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;integer=00%integer%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;fraction=!integer:~%ePart%!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;integer=0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;ePart=0&quot;<br />&nbsp; &nbsp; &nbsp; ) else if 0 LSS %ePart% (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if defined fraction (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;integer=%integer%!fraction:~0,%ePart%!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;fraction=!fraction:~%ePart%!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;ePart=0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;fraction=000000&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;integer=%integer%!fraction:~0,%ePart%!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;fraction=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;ePart=0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />::perform using 'nice' numbers 3: avoid lonely separator<br />&nbsp; &nbsp;if not defined integer set &quot;integer=0&quot;<br />&nbsp; &nbsp;if not defined fraction set &quot;fraction=0&quot;<br /><br />&nbsp; &nbsp;set &quot;string=&quot;<br />&nbsp; &nbsp;if %sPart% == -1 set &quot;string=-&quot;<br />&nbsp; &nbsp;set &quot;string=%string%%integer%.%fraction%&quot;<br />&nbsp; &nbsp;if not %ePart% == 0 set &quot;string=%string%e%ePart%&quot;<br /><br />&nbsp; &nbsp;endlocal &amp; (if &quot;%~2&quot; == &quot;&quot; ( echo(%string% %~2) else (set &quot;%~2=%string%&quot;))<br />&nbsp; &nbsp;goto :eof</code></pre></div><br /><br />jeb</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p28692" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile28692">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content28692">

						<h3 ><a href="#p28692">Re: (nearly) ieee 754 floating point single precisition</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6dbe.html?mode=quote&amp;f=3&amp;p=28692" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic1974.html?p=28692#p28692" onclick="prompt('Message #15',this.href); return false;">#15</a></span> 
									<a class="unread" href="viewtopic1974.html?p=28692#p28692" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Sep 2013 12:07
			</p>
			
			
			
			<div class="content">@jeb<br />Thanks for the links: very interesting and curious behavior of set /A... .<br />And thanks for the correction of the algorithm to make it run using win7.<br /><br />Then next i will do is addition and post it as fast as i can.<br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting4b56.html?mode=reply&amp;f=3&amp;t=4925" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic2150.html?f=3&amp;t=4925&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=4925">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			40 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopica31b.html?f=3&amp;t=4925&amp;start=15" role="button">2</a></li>
				<li><a class="button" href="viewtopic853e.html?f=3&amp;t=4925&amp;start=30" role="button">3</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopica31b.html?f=3&amp;t=4925&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron5495.gif?cron_type=cron.task.text_reparser.poll_title" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=4925 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:05:05 GMT -->
</html>
