<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=6744&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:49:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; Definition and use of arithmetic &quot;functions&quot; in Batch files</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>Definition and use of arithmetic &quot;functions&quot; in Batch files</h2>
		<p><a href="viewtopic210e.html?f=3&amp;t=6744">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=6744</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>2</strong></div>
					<div class="post">
				<h3>Definition and use of arithmetic &quot;functions&quot; in Batch files</h3>
				<div class="date">Posted: <strong>26 Oct 2015 21:16</strong></div>
				<div class="author">by <strong>Aacini</strong></div>
				<div class="content">In this thread I present a method that allows to use arithmetic expressions in Batch files in a way rather similar to arithmetic functions of other programming languages. Let's start with a &quot;:Rand x result&quot; subroutine that in regular Batch code would be written this way:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:Rand x result<br />set /A %2=%1 * %random% / 32768 + 1<br />exit /B<br /></code></pre></div><br />... and used this way:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>call :Rand 25 num<br />echo Random number between 1 and 25: %num%<br /></code></pre></div><br />This code can be converted into a &quot;function&quot; via a variable with &quot;function(arg)&quot; name and the arithmetic expression that calculate the result as value. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=x * ^!random^! / 32768 + 1<br /></code></pre></div><br />To invoke this &quot;function&quot;, you should use this format:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set /A num=%Rand(x):x=25%<br />echo Random number between 1 and 25: %num%<br /></code></pre></div><br />Although this example seems to be practically the same than previous one, the function method run faster because it does not require CALL command. Besides, a &quot;function&quot; called this way may work as a true function, so it may be placed into a larger expression and the parameter may be an arithmetic expression. To successfully achieve these points, just enclose in parentheses the whole expression and the parameter. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=( (x)*^!random^!/32768+1 )&quot;<br /><br />set /A num=%Rand(x):x=5*6% + 10<br />echo Random number between 11 and 40: %num%<br /></code></pre></div><br />Below there are two simple function examples: Sign function returns -1 if the argument is negative, and 1 otherwise; Abs function use the sign of the argument to get its absolute value.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Sign(x)=((x)&gt;&gt;31|1)&quot;<br />set &quot;Abs(x)=(((x)&gt;&gt;31|1)*(x))&quot;<br /></code></pre></div><br />An important feature in the definition of these functions is the comma operator that allows to perform a series of partial calculations with different variables and use they in the final calculation. For example, Abs function may be defined as shown below; if it is called with a large expression, the argument is evaluated just once:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Abs(x)=(a=(x), (a&gt;&gt;31|1)*a)<br /></code></pre></div><br />There are several tricks that allows to use additional features in the definition of a function. For example, the value of &quot;a-123&quot; is positive or zero if &quot;a&quot; is greater or equal 123, so &quot;((a-123)&gt;&gt;31)+1&quot; subexpression is 1 if &quot;a&quot; is greater or equal 123 and 0 otherwise. This method allows to implement an if-then-else feature equivalent to C++ &quot;?:&quot; conditional operator via a large expression comprised of three parts: previous subexpression (that we may call &quot;condition&quot;), the &quot;then&quot; value multiplied by the condition and the &quot;else&quot; value multiplied by the NOT condition, and add the two last parts.<br /><br />In the manipulation of the 0 and 1 values returned by conditions the multiplication may work as AND boolean operator, addition may work as OR, and exclamation-mark works as NOT. The expression &quot;!!value&quot; is 0 if &quot;value&quot; is 0 and is 1 otherwise, so it may be used to reduce several values accumulated by addition operator (OR) into a single 1. You may also use &quot;&amp;&quot;, &quot;|&quot; and &quot;^&quot; bitwise operators for AND, OR and XOR boolean operators, respectively, that directly gives proper results when the values are 0 or 1.<br /><br />The Max function below get the maximum of two values. We can use one parameter only, so we need to place the other value in a variable:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>REM&nbsp; Max1(x)=&nbsp; if (x geq y)&nbsp; then x&nbsp; &nbsp; else y<br />set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />set /P &quot;pair=Enter two numbers separated by space: &quot;<br />for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />set /A &quot;y=b, max=%Max1(x):x=a%&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// or: set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br />echo The max is: %max%<br /></code></pre></div><br />Note that it is necessary to escape the exclamation-mark (NOT operator) with three carets if delayed expansion is enabled when the function is defined.<br /><br />In certain cases we can <em class="text-italics">simulate</em> two arguments in a function if algebraic manipulations allows it; this depends on the specific formula used in the calculation. The function below is the Max function with two arguments:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Max(x,y)=( ?=((x,y)&gt;&gt;31)+1, ?*(2*x,y-(x,y)) + ^^^!?*(x,y-(x,y*2)) )&quot;<br /></code></pre></div><br />In this case we insert the missing subtraction operation in the invocation itself:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set /A &quot;max=%Max(x,y):x,y=one-two%&quot;<br />echo The max of %one% and %two% is: %max%<br /></code></pre></div><br />The explanation of this code &quot;is obvious&quot; (as jeb would say! <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> ), just use a little basic algebra... Note that in Batch files, differently than in other languages, the same name may be used in both a variable and a function (of course, the explanation is that &quot;name&quot; and &quot;name(x)&quot; are <em class="text-italics">different variables</em>).<br /><br />The conversion functions from HHMMSSCC time to centiseconds and viceversa are straightforward:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;HMSCtoCSec(HMSC)=( a=(HMSC), h=a/1000000, a%%=1000000, m=a/10000, a%%=10000, s=a/100, c=a%%100, ((h*60+m)*60+s)*100+c )&quot;<br />set &quot;CSecToHMSC(CSec)=( a=(CSec), c=a%%100, a/=100, s=a%%3600, a/=3600, m=a%%60, h=a/60, h*1000000+m*10000+s*100+c )&quot;<br /><br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;startTime=%%a%%b%%c%%d&quot;<br />place here any process<br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;endTime=%%a%%b%%c%%d&quot;<br />set /A &quot;elapsed=%TimeToCSec(HMSC):HMSC=endTime% - %TimeToCSec(HMSC):HMSC=startTime%&quot;<br />echo Elapsed time: %elapsed:~0,-2%.%elapsed:~-2% seconds<br /></code></pre></div><br />The conversion functions from YYYYMMDD date to Julian Day Number and viceversa are very useful. You may review the original Batch code for these functions <a href="viewtopic6565.html?f=3&amp;t=4423&amp;p=25040#p25040" class="postlink">here</a>.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;DateToJDN(YMD)=( a=(YMD), y=a/10000, a%%=10000, m=a/100, d=a%%100, a=(m-14)/12, (1461*(y+4800+a))/4+(367*(m-2-12*a))/12-(3*((y+4900+a)/100))/4+d-32075 )&quot;<br />set &quot;JDNtoDate(JDN)=( a=(JDN), l=a+68569,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,d=l-(2447*j)/80,l=j/11,m=j+2-(12*l),y=100*(n-49)+i+l,y*10000+m*100+d )&quot;<br /><br />set /P &quot;otherDate=Enter a date in YYYY/MM/DD format: &quot;<br />for /F &quot;tokens=1-3 delims=/&quot; %%a in (&quot;%date%&quot;) do set &quot;today=%%c%%a%%b&quot;<br />set /A &quot;days=%DateToJDN(YMD):YMD=today% - %DateToJDN(YMD):YMD=!otherDate:/=!%&quot;<br />echo/<br />echo There are %days% days between that date and today<br /></code></pre></div><br />Below there is a complete Batch file that includes all previous examples, so you don't need to copy each one of they in order to test them.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />rem Definition and use of arithmetic &quot;functions&quot; in Batch files<br />rem http://www.dostips.com/forum/viewtopic.php?f=3&amp;t=6744<br />rem Antonio Perez Ayala<br /><br /><br />:: Define Rand(x) function<br />set &quot;Rand(x)=x * ^!random^! / 32768 + 1&quot;<br /><br />:: Use Rand(x) function<br />set /A num=%Rand(x):x=25%<br />echo Random number between 1 and 25: %num%<br /><br /><br />:: Define Rand(x) to be used as a true function<br />set &quot;Rand(x)=( (x)*!random!/32768+1 )&quot;<br />set /A num=%Rand(x):x=5*6% + 10<br />echo Random number between 11 and 40: %num%<br /><br /><br />:: Define Max1(x) function with one parameter and one variable<br />REM&nbsp; Max1(x)=&nbsp; if (x geq y)&nbsp; then x&nbsp; &nbsp; else y<br />set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />echo/<br />echo Max1(x) function test<br />:nextPair1<br />&nbsp; &nbsp;set &quot;pair=&quot;<br />&nbsp; &nbsp;set /P &quot;pair=Enter two numbers separated by space: &quot;<br />&nbsp; &nbsp;if not defined pair goto endPair1<br />&nbsp; &nbsp;for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />&nbsp; &nbsp;set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br />&nbsp; &nbsp;echo The max is: %max%<br />goto nextPair1<br />:endPair1<br /><br /><br />:: Define Max(x,y) and Min(x,y) functions with two parameters<br />set &quot;Max(x,y)=( ?=((x,y)&gt;&gt;31)+1, ?*(2*x,y-(x,y)) + ^^^!?*(x,y-(x,y*2)) )&quot;<br />set &quot;Min(x,y)=( ?=((x,y)&gt;&gt;31)+1, ?*(x,y-(x,y*2)) + ^^^!?*(2*x,y-(x,y)) )&quot;<br /><br />echo/<br />echo Max(x,y) function test<br />:nextPair<br />&nbsp; &nbsp;set &quot;pair=&quot;<br />&nbsp; &nbsp;set /P &quot;pair=Enter two numbers separated by space: &quot;<br />&nbsp; &nbsp;if not defined pair goto endPair<br />&nbsp; &nbsp;for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />&nbsp; &nbsp;set /A &quot;max=%Max(x,y):x,y=a-b%&quot;<br />&nbsp; &nbsp;echo The max is: %max%<br />goto nextPair<br />:endPair<br /><br /><br />:: Define HHMMSSCC time to centiseconds conversion function and viceversa<br /><br />set &quot;TimeToCSec(HMSC)=( a=(HMSC), h=a/1000000, a%%=1000000, m=a/10000, a%%=10000, s=a/100, c=a%%100, ((h*60+m)*60+s)*100+c )&quot;<br />set &quot;CSecToTime(CSec)=( a=(CSec), c=a%%100, a/=100, s=a%%60, a/=60, m=a%%60, h=a/60, h*1000000+m*10000+s*100+c )&quot;<br /><br /><br />:: Define YYYYMMDD date to Julian Day Number conversion function and viceversa<br /><br />set &quot;DateToJDN(YMD)=( a=(YMD), y=a/10000, a%%=10000, m=a/100, d=a%%100, a=(m-14)/12, (1461*(y+4800+a))/4+(367*(m-2-12*a))/12-(3*((y+4900+a)/100))/4+d-32075 )&quot;<br />set &quot;JDNtoDate(JDN)=( a=(JDN), l=a+68569,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,d=l-(2447*j)/80,l=j/11,m=j+2-(12*l),y=100*(n-49)+i+l,y*10000+m*100+d )&quot;<br /><br /><br />echo/<br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;startTime=%%a%%b%%c%%d&quot;<br />set /P &quot;birthDate=Enter your birthdate in YYYY/MM/DD format: &quot;<br />echo %time% &amp; for /F &quot;tokens=1-4 delims=:.&quot; %%a in (&quot;%time%&quot;) do set &quot;endTime=%%a%%b%%c%%d&quot;<br />set /A &quot;elapsed=%TimeToCSec(HMSC):HMSC=endTime% - %TimeToCSec(HMSC):HMSC=startTime%&quot;<br />echo/<br />echo You took %elapsed:~0,-2%.%elapsed:~-2% seconds to enter previous line<br /><br />REM As usual, you must adjust the next line accordingly to your locale date format<br />for /F &quot;tokens=1-3 delims=/&quot; %%a in (&quot;%date%&quot;) do set &quot;today=%%c%%a%%b&quot;<br />set /A &quot;total=%DateToJDN(YMD):YMD=today% - %DateToJDN(YMD):YMD=!birthDate:/=!%, a=total*100, years=a/36525, a%%=36525, months=a/3060, days=(a%%3060)/100&quot;<br />echo/<br />echo You are %total% days old (%years% years, %months% months and %days% days approx.)<br /></code></pre></div><br />Enjoy it! <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />Antonio</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>27 Oct 2015 01:15</strong></div>
				<div class="author">by <strong>OperatorGK</strong></div>
				<div class="content">Can they be nested?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>27 Oct 2015 05:41</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">Nice!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>27 Oct 2015 06:43</strong></div>
				<div class="author">by <strong>Squashman</strong></div>
				<div class="content">I have gotten confused enough trying to interpret all the threads about Macros. Is this not essentially a Macro and not a function?  At least that was my understanding of the definition from reading all those threads.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>27 Oct 2015 06:46</strong></div>
				<div class="author">by <strong>jeb</strong></div>
				<div class="content">@Aacini<br /><br />Cool stuff  <img class="smilies" src="images/smilies/icon_surprised.gif" alt=":o" title="Surprised" /> <br />Your solution looks so easy (nearly obvious  <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> ), I wonder why nobody developed it before. <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br /><blockquote><div><cite>OperatorGK wrote:</cite>Can they be nested?<br /></div></blockquote><br />I think that isn't possible, as you need to use the variable replace syntax.<br />You could use at best percent and delayed expansion to nest one function into another one, but not more.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>27 Oct 2015 19:37</strong></div>
				<div class="author">by <strong>Jer</strong></div>
				<div class="content">Any idea why I get the missing operand error?<br />My O/S is Window 7 32-bit<br /><br /><blockquote class="uncited"><div>C:\Temp&gt;Setlocal EnableDelayedExpansion<br /><br />C:\Temp&gt;REM  Max1(x)=  if (x geq y)  then x    else y<br /><br />C:\Temp&gt;set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />C:\Temp&gt;set /P &quot;pair=Enter two numbers separated by space: &quot;<br />Enter two numbers separated by space: 50 100<br /><br />C:\Temp&gt;for /F &quot;tokens=1,2&quot; %a in (&quot;50 100&quot;) do set /A &quot;a=%a, b=%b&quot;<br /><br />C:\Temp&gt;set /A &quot;a=50, b=100&quot;<br /><br />C:\Temp&gt;set /A &quot;y=b, max=( ?=((a-y)&gt;&gt;31)+1, ?*a + ^!?*y )&quot;         // or: set /A &quot;max=(y=b, ( ?=(<br />)+1, ?*a + ^!?*y ))&quot;<br />Missing operand.<br /><br />C:\Temp&gt;echo The max is:<br />The max is:<br /><br />C:\Temp&gt;endlocal<br />C:\Temp&gt;<br /></div></blockquote><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@Echo On<br />Setlocal EnableDelayedExpansion<br />REM&nbsp; Max1(x)=&nbsp; if (x geq y)&nbsp; then x&nbsp; &nbsp; else y<br />set &quot;Max1(x)=( ?=((x-y)&gt;&gt;31)+1, ?*x + ^^^!?*y )&quot;<br /><br />set /P &quot;pair=Enter two numbers separated by space: &quot;<br />for /F &quot;tokens=1,2&quot; %%a in (&quot;%pair%&quot;) do set /A &quot;a=%%a, b=%%b&quot;<br />set /A &quot;y=b, max=%Max1(x):x=a%&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// or: set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br />echo The max is: %max%<br />endlocal<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>28 Oct 2015 03:42</strong></div>
				<div class="author">by <strong>penpen</strong></div>
				<div class="content"><blockquote><div><cite>Jer wrote:</cite>Any idea why I get the missing operand error?</div></blockquote><blockquote><div><cite>Jer wrote:</cite>set /A &quot;y=b, max=%Max1(x):x=a%&quot;         // or: set /A &quot;max=(y=b, %Max1(x):x=a%)&quot;<br /></div></blockquote>The &quot;//&quot; part causes this issue, because the slash ('/') is an operator (division).<br />If you use it an operand is expected (here: divisor) but not present (a second divison operator follows.<br /><br />It's a flaw in Aacini's how-to-use-code (probably because &quot;//&quot; is an c-style comment):<br />Just replace the &quot;//&quot; with &quot;&amp; rem&quot; and it should work.<br /><br /><blockquote><div><cite>Aacini wrote:</cite>We can use one parameter only, so we need to place the other value in a variable</div></blockquote>You could also assign more than one variable if yoiu replace an unused one:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br />rem setup formula<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem simulate parameters using variables<br />set /A &quot;x=2, y=3, z=4, sum=%sum(x,y,z)%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem one parameter and some variables<br />set /A &quot;x=3, y=4, sum=%sum(x,y,z):&#91;&#93;=z=5%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem of course the order is not important<br />set /A &quot;y=5, sum=%sum(x,y,z):&#91;&#93;=z=6,x=4%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />endlocal<br /></code></pre></div>This initialization is of advantage especially if the name of one variable is contained in another (example: &quot;x&quot; and &quot;dx&quot;).<br />The doublequotes are important, if you access the formula because the brackets (&quot;[]&quot;) are special characters and should be treated as one variable, but you could also use any other.<br /><br /><br />penpen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>28 Oct 2015 18:38</strong></div>
				<div class="author">by <strong>trebor68</strong></div>
				<div class="content">The Sign fuction is defineted:<br />Value <span style="color: #FF0000">x &lt; 0</span> is <span style="color: #408000">Sgn(x) = -1</span><br />Value <span style="color: #FF0000">x = 0</span> is <span style="color: #408000">Sgn(x) = 0</span><br />Value <span style="color: #FF0000">x &gt; 0</span> is <span style="color: #408000">Sgn(x) = 1</span><br /><br />See also: <a href="https://en.wikipedia.org/wiki/Sign_function" class="postlink">https://en.wikipedia.org/wiki/Sign_function</a><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>D:\CMDVerz&gt;set /a a=32,&quot;(a&gt;&gt;31)+!(a&gt;&gt;31)*!!a&quot;<br />1<br />D:\CMDVerz&gt;set /a a=0,&quot;(a&gt;&gt;31)+!(a&gt;&gt;31)*!!a&quot;<br />0<br />D:\CMDVerz&gt;set /a a=-32,&quot;(a&gt;&gt;31)+!(a&gt;&gt;31)*!!a&quot;<br />-1<br />D:\CMDVerz&gt;</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>28 Oct 2015 19:06</strong></div>
				<div class="author">by <strong>Aacini</strong></div>
				<div class="content"><blockquote><div><cite>trebor68 wrote:</cite>The Sign fuction is defineted:<br />Value <span style="color: #FF0000">x &lt; 0</span> is <span style="color: #408000">Sgn(x) = -1</span><br />Value <span style="color: #FF0000">x = 0</span> is <span style="color: #408000">Sgn(x) = 0</span><br />Value <span style="color: #FF0000">x &gt; 0</span> is <span style="color: #408000">Sgn(x) = 1</span><br /><br /></div></blockquote><br />Yes. Strictly speaking, you are right. However, the Sign function was one of the first ones in my description, so I did not wanted to insert additional complications in my description so early...<br /><br />The Sign function may be written in a slightly simpler way, and you may use a &quot;function&quot; directly at the command line:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\&gt; set &quot;Sign(a)=(a&gt;&gt;31|1)*!!a&quot;<br /><br />C:\&gt; set /A &quot;%Sign(a):a=32%&quot;<br />1<br />C:\&gt; set /A &quot;%Sign(a):a=0%&quot;<br />0<br />C:\&gt; set /A &quot;%Sign(a):a=-32%&quot;<br />-1<br /></code></pre></div><br />You may review a practical use of the original formula (not correct, but reduced form) of Sign function at <a href="viewtopic9cc5.html?f=3&amp;t=5594&amp;p=43637#p43637" class="postlink">this post</a>.<br /><br />Antonio</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>30 Oct 2015 10:27</strong></div>
				<div class="author">by <strong>Samir</strong></div>
				<div class="content">Simple amazing.  I study your post like I used to study my C book in college.  Thank you for sharing!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>31 Oct 2015 14:38</strong></div>
				<div class="author">by <strong>Aacini</strong></div>
				<div class="content"><blockquote><div><cite>Squashman wrote:</cite>I have gotten confused enough trying to interpret all the threads about Macros. Is this not essentially a Macro and not a function? At least that was my understanding of the definition from reading all those threads.<br /></div></blockquote><br />Well, strictly speaking <em class="text-italics">all expansions</em> of variables that contain code instead of data are macros! However, these ones have an unique feature not used before in any type of macro: the ability to take parameters in a way equivalent to real functions in other programming languages; that is the main reason I call them &quot;functions&quot;.<br /><br /><br /><br /><blockquote><div><cite>jeb wrote:</cite><blockquote><div><cite>OperatorGK wrote:</cite>Can they be nested?</div></blockquote><br /><br />I think that isn't possible, as you need to use the variable replace syntax.<br />You could use at best percent and delayed expansion to nest one function into another one, but not more.<br /></div></blockquote><br />Yes, jeb; here it is an example of a <em class="text-italics">two-level nesting functions</em> based on %double !expansion!%:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />:: Define YYYYMMDD date to Julian Day Number conversion function and viceversa<br /><br />set &quot;DateToJDN(YMD)=( a=(YMD), y=a/10000, a%%=10000, m=a/100, d=a%%100, a=(m-14)/12, (1461*(y+4800+a))/4+(367*(m-2-12*a))/12-(3*((y+4900+a)/100))/4+d-32075 )&quot;<br />set &quot;JDNtoDate(JDN)=( a=(JDN), l=a+68569,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,d=l-(2447*j)/80,l=j/11,m=j+2-(12*l),y=100*(n-49)+i+l,y*10000+m*100+d )&quot;<br /><br />echo/<br />echo Two-level nesting function test<br />rem Adjust next line for your locale date format<br />for /F &quot;tokens=1-3 delims=/&quot; %%a in (&quot;%date%&quot;) do (<br />&nbsp; &nbsp; set &quot;today=%%c%%b%%a&quot;<br />&nbsp; &nbsp; echo Today is %%c/%%b/%%a in YYYY/MM/DD format<br />)<br />:nextDays<br />&nbsp; &nbsp;echo/<br />&nbsp; &nbsp;set &quot;days=&quot;<br />&nbsp; &nbsp;set /P &quot;days=Enter a number of days: &quot;<br />&nbsp; &nbsp;if not defined days goto endDays<br />&nbsp; &nbsp;rem&nbsp; &nbsp; &nbsp;newDate =&nbsp; JDNtoDate(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DateToJDN(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;today) + days )<br />&nbsp; &nbsp;set /A &quot;newDate = %JDNtoDate(JDN):JDN= !DateToJDN(YMD):YMD=today! + days %&quot;<br />&nbsp; &nbsp;echo Today + %days% days = %newDate:~0,4%/%newDate:~4,2%/%newDate:~6,2%<br />goto nextDays<br />:endDays<br /></code></pre></div><br />However, you may also have several expansion levels using multiple call commands and duplicating the number of percent signs in each nesting function, although the result may look somewhat confusing! The program below is just an example of this technique, with no usefulness at all:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br /><br />rem Define a function that works as an operator<br />set &quot;OP(x,y)=(x,y)&quot;<br /><br />rem result =&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10+20) * (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 30+40)&nbsp; )&nbsp; -&nbsp; 100&nbsp; &nbsp; &nbsp; )<br />rem operators per function:&nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+<br />CALL CALL set /A result=%%%%OP(x,y):x,y=&nbsp; &nbsp;%%OP(x,y):x,y= %OP(x,y):x,y=10+20% * %OP(x,y):x,y=30+40% %%&nbsp; -&nbsp; 100&nbsp; &nbsp;%%%%<br /><br />echo Result = %result%<br /></code></pre></div><br /><br /><br /><br /><br /><br /><blockquote><div><cite>penpen wrote:</cite><blockquote><div><cite>Aacini wrote:</cite>We can use one parameter only, so we need to place the other value in a variable</div></blockquote><br />You could also assign more than one variable if yoiu replace an unused one:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br /><br />rem setup formula<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem simulate parameters using variables<br />set /A &quot;x=2, y=3, z=4, sum=%sum(x,y,z)%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem one parameter and some variables<br />set /A &quot;x=3, y=4, sum=%sum(x,y,z):&#91;&#93;=z=5%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem of course the order is not important<br />set /A &quot;y=5, sum=%sum(x,y,z):&#91;&#93;=z=6,x=4%&quot;<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /></code></pre></div><br /></div></blockquote><br />Wow! This is the type of details I love about a new development: that it may serve as base for new developments! Although your example is interesting, there is a fundamental concept missing on it: the <em class="text-italics">parameter</em>. As I said in my answer to Squashman, the keypoint that makes these &quot;functions&quot; unique are its ability to take parameters in a way equivalent to functions in other programming languages. In your example the &quot;parameters&quot; are totally useless because the same behavior and result may be obtained with less, more of different named parameters in the definition, or with no parameters at all. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>rem setup formula with 3 &quot;parameters&quot;<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo 3 parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with no parameters<br />set &quot;sum()=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum():&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo No parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with whichever parameters<br />set &quot;sum(O,PQ,RST,UVWXYZ)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum(O,PQ,RST,UVWXYZ):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo Whichever parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /></code></pre></div><br />The method you used to assign the value to the &quot;parameters&quot; <em class="text-italics">before</em> invoke the function may suggest another way to use this feature. For example, instead of define a function with a fixed formula that process the values of changing parameters, we could define a formula over fixed variables (&quot;pseudo-parameters&quot;) and change <em class="text-italics">the operations</em> in the formula via the <em class="text-italics">real</em> parameters. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>rem Define a general-purpose function with 4 &quot;pseudo-parameters&quot;:<br />set &quot;accum4(x,y,z,t)=x,y,z,t&quot;<br /><br />set /A &quot;x=2,y=4,z=6,t=8, sum=%accum4(x,y,z,t):,=+%&quot;<br />echo The sum of %x%+%y%+%z%+%t% is %sum%<br /><br />set /A &quot;x=2,y=4,z=6,t=8, prod=%accum4(x,y,z,t):,=*%&quot;<br />echo The product of %x%*%y%*%z%*%t% is %prod%<br /></code></pre></div><br />However, this method is just an interesting curiosity that have not practical use...<br /><br />Antonio</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>31 Oct 2015 17:30</strong></div>
				<div class="author">by <strong>penpen</strong></div>
				<div class="content"><blockquote><div><cite>Aacini wrote:</cite>the keypoint that makes these &quot;functions&quot; unique are its ability to take parameters in a way equivalent to functions in other programming languages. In your example the &quot;parameters&quot; are totally useless because the same behavior and result may be obtained with less, more of different named parameters in the definition, or with no parameters at all. For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>rem setup formula with 3 &quot;parameters&quot;<br />set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem set 3 parameters<br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo 3 parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with no parameters<br />set &quot;sum()=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum():&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo No parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;<br /><br />rem setup formula with whichever parameters<br />set &quot;sum(O,PQ,RST,UVWXYZ)=(&#91;&#93;, x+y+z)&quot;<br /><br />rem the same...<br />set /A &quot;sum=%sum(O,PQ,RST,UVWXYZ):&#91;&#93;=x=1, y=2, z=3%&quot;<br />echo Whichever parameters:<br />echo sum==%sum%==x&#91;x=%x%&#93;+y&#91;y=%y%&#93;+z&#91;z=%z%&#93;</code></pre></div></div></blockquote><br />I don't understand... .<br />I fear i miss your keypoint.<br /><br />The name of any variable is never part of its content.<br />That is also true for all your functions (example):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=x * ^!random^! / 32768 + 1&quot;<br />set /A num=%Rand(x):x=25%<br />echo %num%<br /><br />set &quot;Rand()=x * ^!random^! / 32768 + 1&quot;<br />set /A num=%Rand():x=25%<br />echo %num%<br /><br />set &quot;Rand(OPQ)=x * ^!random^! / 32768 + 1&quot;<br />set /A num=%Rand(OPQ):x=25%<br />echo %num%<br /></code></pre></div><br /><br />penpen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>31 Oct 2015 23:54</strong></div>
				<div class="author">by <strong>Aacini</strong></div>
				<div class="content"><blockquote><div><cite>penpen wrote:</cite>I don't understand... .<br />I fear i miss your keypoint.<br /></div></blockquote><br /><br />Well, perhaps would be convenient to review what I said about this point:<br /><blockquote><div><cite>on <!-- l --><a class="postlink-local" href="viewtopicdcab.html?f=3&amp;t=6744&amp;p=43622#p43622">viewtopic.php?f=3&amp;t=6744&amp;p=43622#p43622</a><!-- l --> Aacini wrote:</cite>In this thread I present a method that allows to use arithmetic expressions in Batch files <strong class="text-strong">in a way rather similar to arithmetic functions of other programming languages</strong>.<br /></div></blockquote><br /><blockquote><div><cite>on <!-- l --><a class="postlink-local" href="viewtopic5ed9.html?f=3&amp;t=6744&amp;p=43737#p43737">viewtopic.php?f=3&amp;t=6744&amp;p=43737#p43737</a><!-- l --> Aacini wrote:</cite>... these ones have an unique feature not used before in any type of macro: the ability to take parameters <strong class="text-strong">in a way equivalent to real functions in other programming languages</strong>.<br /></div></blockquote><br />The purpose of this thread is not to perform arithmetic operations in an &quot;advanced&quot;, &quot;complex&quot; or just different way. The purpose is to write and execute arithmetic &quot;functions&quot; <strong class="text-strong">in a more standard way</strong> that may be comprehended by a larger group of people.<br /><br />I think the next lines are clear enough to be understood by most programmers even if they know nothing about Batch files:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Rand(x)=x * ^!random^! / 32768 + 1<br /><br />set /A num=%Rand(x):x=25%<br /></code></pre></div><br />The format of the definition is entirely standard: &quot;function(arg) as name and the arithmetic expression that calculate the result as value&quot; with the argument of the function included in the expression.<br /><br />The invocation is a little bit tricky <em class="text-italics">when compared vs. the standard format</em>: the value of the parameter is not placed in parentheses, but the original argument is repeated and its value is &quot;assigned&quot; after the colon. However, IMO this method would still be understood by many programmers with no additional or very little explanation (<em class="text-italics">&quot;Execute Rand(x) with x=25&quot;</em>).<br /><br />Now, let's review the first of your examples:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;sum(x,y,z)=(&#91;&#93;, x+y+z)&quot;<br /><br />set /A &quot;sum=%sum(x,y,z):&#91;&#93;=x=1, y=2, z=3%&quot;<br /></code></pre></div><br />I invite you to try to explain this code to someone that does not know Batch files! Even an experienced Batch programmer may be confused by the &quot;([], &quot; part (starting with me!). What these characters means? Is it a Batch file feature that represent the parameter list? Is it an empty array (like in JavaScript) that receive the parameters? Of course, when the trick is understood we realize that there is nothing special about it, but it is a fact that this format is confusing and that we must do an additional effort in order to understand it.<br /><br />In your next examples we can see that in the function invocation we can omit some parameters or even all of them. Why an error is not issued in these cases? If the declared parameters have not any effect in the way the function can be invoked, what is the purpose to declare them? As you note it, my format <em class="text-italics">MAY</em> also be invoked this way, but the keypoint of this topic is to write and execute functions <strong class="text-strong">in the standard way</strong>. I do not recommend to write code that does not conform to the standards; I encourage to always define and use functions using the standard format even if we know this is not required.<br /><br />This thread provides a programming tool that aids in writting clearer and better Batch programs, when is used correctly.<br /><br />Antonio</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>01 Nov 2015 08:54</strong></div>
				<div class="author">by <strong>penpen</strong></div>
				<div class="content">I reviewed especially these lines multiple times before creating my above post. It didn't occurred to me that writing the function is also &quot;using&quot; it (until now; still not fully sure about that).<br /><br />I had some sort of &quot;consumer view&quot; because you have also used nonstandard notation: For example in your Max(x,y) where you assigned the second value to the result which is not possible for most programming languages; my suggestion does the same to add an unused (but more or less well known; i fear less...) variable named &quot;[]&quot; (==substitution operator; see sidenote at the bottom of this post).<br /><br />You could also use any other variable name if that is the problem: Actually i have no idea of a name that is meaningfull for both writing the function and replacing it with parameter values; maybe &quot;setparams&quot; or &quot;:&quot;:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;f(x,y)=(setparams, x+y+4)&quot;<br />set /A &quot;z=%f(x,y):setparams=(x=1, y=2)%&quot;<br />echo %z%<br /><br />set &quot;g(n)=(:, n-3)&quot;<br />set /A &quot;a=%g(n)::=(g=4)%&quot;<br />echo %a%</code></pre></div>But actually i think, it is also no good solution (to this task).<br /><br />(<br />Actally i think the most compatible solution could only be produced by adding another macro; maybe named &quot;SET&quot;, that autodetects used formulas and checks its parameters:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:set &quot;set=???&quot;<br />set &quot;g(x)=x+1&quot;<br />%set% /A &quot;n=g(4)+100*g(5)&quot;<br /></code></pre></div><br />)<br /><br /><blockquote><div><cite>Aacini wrote:</cite>In your next examples we can see that in the function invocation we can omit some parameters or even all of them. Why an error is not issued in these cases? If the declared parameters have not any effect in the way the function can be invoked, what is the purpose to declare them?</div></blockquote>I think i don't need to respect these points because my suggestion shouldn't solve these issues (only &quot;invoke&quot; the function with multiple variables instead of only 1).<br /><br /><br /><blockquote><div><cite>Aacini wrote:</cite>Even an experienced Batch programmer may be confused by the &quot;([], &quot; part (starting with me!). What these characters means?</div></blockquote>The square brackets ('[', ']') have no special meaning for the &quot;set /A&quot; command, so they are treated as a variable name just like &quot;x&quot;, or &quot;?&quot;.<br /><br /><br />Sidenote:<br />From what i above called &quot;consumer view&quot; my usage of square brackets (&quot;[]&quot;) is motivated by a C++ precompiler we used at university (sorry, i even don't know its name anymore).<br />I must admit i never heard of a programming language that &quot;naturally&quot; supports this operator.<br />This precompiler handles the mathematical substitution operator, so this notation is not completely unknown (but indeed nearly - outside the math world - and even there it may be unknown to some: Depends on their subject field.).<br /><br />Although it is valid to use this operator in all areas of mathematics it is mostly not used because:<br />- avoiding it is too easy (just say &quot;now substitute x by y+1&quot;), and<br />- the formal definition of this operator is tricky, if not introducing &quot;Lambda calculus&quot;<br />See <a href="https://en.wikipedia.org/wiki/Lambda_calculus" class="postlink">https://en.wikipedia.org/wiki/Lambda_calculus</a>.<br /><br />Empty brackets represents an empty substitution (so nothing is substituted), so<br />- &quot;f(x)[]&quot; equals &quot;f(x)&quot;<br />- &quot;f(x)[x=2]&quot; equals &quot;f(2)[]&quot; equals &quot;f(2)&quot;.<br /><br />I first wanted to use %f(x):[]=[x=1]% to replace the empty substitution with the substitution of x with 1:<br />It should represent &quot;f(x)[x=1]&quot;.<br /><br />But that is bad, because in batch &quot;[x&quot; is interpreted as a variable name and &quot;1]&quot; is no valid formula, so i left the brackets on the right side.<br />You could use &quot;[,]&quot; (a list of two empty substitutions and add &quot;x=1,&quot; to be correct in mathematical terms), but that is very unusual and looks just ugly:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;succ(n)=(&#91;,&#93;,n+1)&quot;<br />set /A &quot;m=%succ(n):&#91;,&#93;=&#91;,n=1,&#93;%&quot;<br /></code></pre></div><br /><br />penpen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Definition and use of arithmetic &quot;functions&quot; in Batch fi</h3>
				<div class="date">Posted: <strong>01 Nov 2015 10:32</strong></div>
				<div class="author">by <strong>OperatorGK</strong></div>
				<div class="content"><blockquote><div><cite>penpen wrote:</cite>I must admit i never heard of a programming language that &quot;naturally&quot; supports this operator</div></blockquote><br />Isn't this basically batch %x:y=z% operator? The only difference, AFAIK, is that [] operator may be used in anonymous expressions.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>2</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=6744&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:49:54 GMT -->
</html>
