<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5775&p=57826 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 04:06:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>ReadFormattedLine.bat: Read a line with specific format - DosTips.com</title>


	<link rel="canonical" href="viewtopic6ce8.html?t=5775">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic20b5.html?f=3&amp;t=5775">ReadFormattedLine.bat: Read a line with specific format</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="posting01bc.html?mode=reply&amp;f=3&amp;t=5775" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic2376.html?f=3&amp;t=5775&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="5775" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			12 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p35843" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile35843">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content35843">

						<h3 class="first"><a href="#p35843">ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting5ad7.html?mode=quote&amp;f=3&amp;p=35843" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic21ec.html?p=35843#p35843" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopic21ec.html?p=35843#p35843" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>16 Jul 2014 13:58
			</p>
			
			
			
			<div class="content">I have heard this request for Batch files many times before: read a line in a similar way of SET /P command, but with certain restrictions, like a given number of characters, or read only digits, or show the characters read as asterisks, etc. Frequently the asker wants a solution that don't require 3rd party external programs.<br /><br />I developed a pure Batch file solution that works perfectly. The input is defined via a <em class="text-italics">mask</em> comprised of several characters that specify the input format at each input position. The method used in this program may be used as base for other similar data-input routines for Batch files.<br /><br /><strong class="text-strong">EDIT 2014-09-23</strong>: I modified the original routine in order to use a standard input method and added some additional features. I also improved the presentation of the input fields.<br /><br /><strong class="text-strong">EDIT 2014-09-28</strong>: I added a couple modifications suggested by foxidrive and dbenham, besides some others of my own.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />rem ReadFormattedLine.bat: Read a line from keyboard with specific format<br />rem Antonio Perez Ayala<br /><br />cls<br />echo Read a line from keyboard with specific format<br />echo/<br />echo call :ReadFormattedLine var=&quot;mask&quot;&nbsp; &#91;/M &quot;message&quot;&#93;&nbsp; &#91;/P&#93;&nbsp; &#91;/A^|/W^|/F&#93;<br />echo/<br />echo The mask specify valid input characters per position via the following chars:<br />echo/<br />echo&nbsp; &nbsp; #&nbsp; -&nbsp; Any digit<br />echo&nbsp; &nbsp; _&nbsp; -&nbsp; Any letter<br />echo&nbsp; &nbsp; +&nbsp; -&nbsp; A letter that is converted to uppercase<br />echo&nbsp; &nbsp; ?&nbsp; -&nbsp; Any letter or digit<br />echo&nbsp; &nbsp; @&nbsp; -&nbsp; Letter or digit, convert letter to uppercase<br />echo/<br />echo The following characters are just displayed/inserted at their positions:<br />echo&nbsp; &nbsp; $&nbsp; /&nbsp; \&nbsp; (&nbsp; )&nbsp; &#91;&nbsp; &#93;&nbsp; :&nbsp; ;&nbsp; ,&nbsp; .&nbsp; -&nbsp; space&nbsp; letters&nbsp; digits<br />echo/<br />echo Any character in the mask different than previous ones cause an error.<br />echo/<br />echo If /P (password) switch is given, input characters are displayed as asterisks.<br />echo/<br />echo Normally the input is completed when Enter key is pressed after read at least<br />echo one character, but the following switches changes this behavior.<br />echo/<br />echo&nbsp; &nbsp; /A (auto):&nbsp; &nbsp;Input is auto-completed after the last character; Enter key<br />echo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;is ignored.<br />echo&nbsp; &nbsp; /W (whole):&nbsp; Enter key is accepted at first or last input positions only,<br />echo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that is, when input is empty or whole.<br />echo&nbsp; &nbsp; /F (fields): Enter key fills the field with spaces and move the cursor to<br />echo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the next input field in the line.<br />echo/<br />echo To input a whole value terminated by Enter, use /W switch and insert any<br />echo character at the first position in the mask.<br />echo/<br />echo/<br />echo Some examples:<br />echo/<br /><br />setlocal<br />rem Define the following variable before call the subroutine<br />set &quot;thisFile=%~F0&quot;<br />call :ReadFormattedLine test=&quot;(_-#-+-#-_)&quot; /M &quot;Enter (_-#-+-#-_): &quot; /W<br />echo Read: &quot;%test%&quot;<br />echo/<br />call :ReadFormattedLine number=&quot;#####&quot; /M &quot;Enter a number of up to 5 digits: &quot;<br />echo Number: &quot;%number%&quot;<br />echo/<br />call :ReadFormattedLine pass=&quot;########&quot; /M &quot;Enter your password (8 digits): &quot; /P /A<br />echo Password: &quot;%pass%&quot;<br />echo/<br />call :ReadFormattedLine phone=&quot;(###)###-####&quot; /M &quot;Enter the telephone with area code: &quot; /W<br />echo Telephone: &quot;%phone%&quot;<br />echo/<br />call :ReadFormattedLine RFC=&quot;&#91;++++-######-@@@&#93;&quot; /M &quot;Enter your RFC &#91;4letters-6digits-3alpha&#93;: &quot; /W<br />echo RFC: &quot;%RFC%&quot;<br />echo/<br />call :ReadFormattedLine timeStamp=&quot;####/##/##&nbsp; HH:MM: ##:##&quot; /M &quot;Enter a time-stamp.&nbsp; YYYY/MM/DD: &quot; /W<br />echo Time-stamp: &quot;%timeStamp%&quot;<br />echo/<br />call :ReadFormattedLine name=&quot;+_______________&nbsp; Last name: +_______________&quot; /M &quot;First name: &quot; /F<br />echo Name: &quot;%name%&quot;<br />echo/<br />echo Enter the list of IP addresses<br />echo (press Enter in an empty line to end the list)<br />set i=0<br />:nextIP<br />&nbsp; &nbsp;set /A i+=1<br />&nbsp; &nbsp;call :ReadFormattedLine IP&#91;%i%&#93;=&quot;###.###.###.###&quot; /M &quot;%i%-&nbsp; &quot; /W<br />if defined IP&#91;%i%&#93; goto nextIP<br />set /A n=i-1<br />echo/<br />echo IP addresses read: %n%<br />set IP&#91;<br />echo/<br />echo/<br />echo End of examples<br />pause<br />goto :EOF<br /><br /><br />:ReadFormattedLine var=&quot;mask&quot; &#91;/M &quot;message&quot;&#93; &#91;/P&#93; &#91;/F /W /A&#93;<br /><br />if &quot;%~2&quot; equ &quot;&quot; echo ERROR: Missing parameters &amp; exit /B 1<br />setlocal EnableDelayedExpansion<br /><br />set &quot;var=%~1&quot;<br />set &quot;mask=%~2&quot;<br />shift &amp; shift<br />set &quot;message=&quot;<br />if /I &quot;%1&quot; equ &quot;/M&quot; set &quot;message=%~2&quot; &amp; shift &amp; shift<br />set &quot;password=&quot;<br />if /I &quot;%1&quot; equ &quot;/P&quot; set &quot;password=1&quot; &amp; shift<br />set &quot;switch=%~1&quot;<br /><br />set quote=&quot;<br />set &quot;digit= 0 1 2 3 4 5 6 7 8 9 &quot;<br />set &quot;letter= A B C D E F G H I J K L M N O P Q R S T U V W X Y Z &quot;<br />set &quot;alphaNum=%digit%%letter%&quot;<br />set &quot;fmt=#_+?@&quot;<br />set &quot;show=$/\()&#91;&#93;:;,.- %digit: =%%letter: =%&quot;<br />for /F %%a in ('copy /Z &quot;%thisFile%&quot; NUL') do set &quot;CR=%%a&quot;<br />for /F %%a in ('echo prompt $H ^| cmd') do set &quot;BS=%%a&quot; &amp; set &quot;SP=.%%a &quot;<br /><br />&lt; NUL (<br />&nbsp; &nbsp;set /P &quot;=%message%&quot;<br />&nbsp; &nbsp;for /F &quot;eol=| delims=&quot; %%a in ('cmd /U /C echo !mask!^| find /V &quot;&quot;') do (<br />&nbsp; &nbsp; &nbsp; if &quot;!fmt:%%a=!&quot; neq &quot;%fmt%&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=Û&quot;<br />&nbsp; &nbsp; &nbsp; ) else if &quot;%%a&quot; neq &quot; &quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=%%a&quot;<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=!SP!&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set /P &quot;=!SP!!CR!%message%&quot;<br />)<br />set &quot;input=&quot;<br />set /A i=0, key=0<br />goto checkFormat<br /><br />:nextKey<br />&nbsp; &nbsp;set &quot;key=&quot;<br />&nbsp; &nbsp;for /F &quot;delims=&quot; %%a in ('xcopy /W &quot;%thisFile%&quot; &quot;%thisFile%&quot; 2^&gt;NUL') do if not defined key set &quot;key=%%a&quot;<br />&nbsp; &nbsp;if &quot;!key:~-1!&quot; neq &quot;!CR!&quot; goto endif<br />&nbsp; &nbsp; &nbsp; if /I &quot;%switch%&quot; equ &quot;/A&quot; goto nextKey<br />&nbsp; &nbsp; &nbsp; if /I &quot;%switch%&quot; neq &quot;/F&quot; goto check/W<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:nextField<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;format=!mask:~%i%,1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;%format%&quot; equ &quot;&quot; goto endRead<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;!fmt:%format%=!&quot; equ &quot;%fmt%&quot; goto checkFormat<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=Û&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;input=%input% &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A i+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;goto nextField<br />&nbsp; &nbsp; &nbsp; :check/W<br />&nbsp; &nbsp; &nbsp; if /I &quot;%switch%&quot; neq &quot;/W&quot; goto checkEmpty<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if %i% equ 0 goto endRead<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;%format%&quot; equ &quot;&quot; goto endRead<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;goto nextKey<br />&nbsp; &nbsp; &nbsp; :checkEmpty<br />&nbsp; &nbsp; &nbsp; if %i% gtr 0 goto endRead<br />&nbsp; &nbsp; &nbsp; goto nextKey<br />&nbsp; &nbsp;:endif<br />&nbsp; &nbsp;set &quot;key=!key:~-1!&quot;<br />&nbsp; &nbsp;if &quot;!key!&quot; equ &quot;!BS!&quot; (<br />&nbsp; &nbsp; &nbsp; if %i% gtr 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;%format%&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=!SP!!BS!!BS!Û!BS!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=Û!BS!!BS!Û!BS!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;input=%input:~0,-1%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A i-=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !i! equ 0 set key=0<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; goto checkFormat<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if &quot;%format%&quot; equ &quot;&quot; goto nextKey<br />&nbsp; &nbsp;if &quot;!key!&quot; equ &quot;=&quot; goto nextKey<br />&nbsp; &nbsp;if &quot;!key!&quot; equ &quot;!quote!&quot; goto nextKey<br />&nbsp; &nbsp;if &quot;%format%&quot; equ &quot;#&quot; ( rem Any digit<br />&nbsp; &nbsp; &nbsp; if &quot;!digit: %key% =!&quot; equ &quot;%digit%&quot; goto nextKey<br />&nbsp; &nbsp;) else if &quot;%format%&quot; equ &quot;_&quot; ( rem Any letter<br />&nbsp; &nbsp; &nbsp; if &quot;!letter: %key% =!&quot; equ &quot;%letter%&quot; goto nextKey<br />&nbsp; &nbsp;) else if &quot;%format%&quot; equ &quot;+&quot; ( rem Any letter, convert it to uppercase<br />&nbsp; &nbsp; &nbsp; if &quot;!letter: %key% =!&quot; equ &quot;%letter%&quot; goto nextKey<br />&nbsp; &nbsp; &nbsp; for %%a in (%letter%) do if /I &quot;!key!&quot; equ &quot;%%a&quot; set &quot;key=%%a&quot;<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; rem Rest of formats are alphanumeric: ? @<br />&nbsp; &nbsp; &nbsp; if &quot;!alphaNum: %key% =!&quot; equ &quot;%alphaNum%&quot; goto nextKey<br />&nbsp; &nbsp; &nbsp; if &quot;%format%&quot; equ &quot;@&quot; ( rem Convert letters to uppercase<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for %%a in (%letter%) do if /I &quot;!key!&quot; equ &quot;%%a&quot; set &quot;key=%%a&quot;<br />&nbsp; &nbsp; &nbsp; ) else if &quot;%format%&quot; neq &quot;?&quot; echo ERROR: Invalid format in mask: &quot;%format%&quot; &amp; exit /B 2<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if defined password (<br />&nbsp; &nbsp; &nbsp; set /P &quot;=*&quot; &lt; NUL<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; set /P &quot;=%key%&quot; &lt; NUL<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set &quot;input=%input%%key%&quot;<br /><br />&nbsp; &nbsp;:nextFormat<br />&nbsp; &nbsp;set /A i+=1<br />&nbsp; &nbsp;:checkFormat<br />&nbsp; &nbsp;set &quot;format=!mask:~%i%,1!&quot;<br />&nbsp; &nbsp;if &quot;%format%&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; if /I &quot;%switch%&quot; equ &quot;/A&quot; goto endRead<br />&nbsp; &nbsp; &nbsp; if /I &quot;%switch%&quot; equ &quot;/M&quot; goto endRead<br />&nbsp; &nbsp; &nbsp; goto nextKey<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if &quot;!show:%format%=!&quot; neq &quot;%show%&quot; (<br />&nbsp; &nbsp; &nbsp; if &quot;!key!&quot; equ &quot;!BS!&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;%format%&quot; neq &quot; &quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=%format%!BS!!BS!Û!BS!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=!SP!!BS!!BS!Û!BS!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;input=%input:~0,-1%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A i-=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !i! equ 0 set key=0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;goto checkFormat<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;%format%&quot; neq &quot; &quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=%format%&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=!SP!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;input=%input%%format%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;goto nextFormat<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if &quot;%input:~-1%!key!&quot; equ &quot; !BS!&quot; (<br />&nbsp; &nbsp; &nbsp; set /P &quot;=Û!BS!!BS!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; set &quot;input=%input:~0,-1%&quot;<br />&nbsp; &nbsp; &nbsp; set /A i-=1<br />&nbsp; &nbsp; &nbsp; goto checkFormat<br />&nbsp; &nbsp;)<br /><br />goto nextKey<br />:endRead<br />echo/<br />endlocal &amp; set &quot;%var%=%input%&quot;<br />exit /B<br /></code></pre></div><br />Antonio</div>

			
													<div class="notice">
					Last edited by <a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a> on 29 Sep 2014 06:18, edited 2 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p37034" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile37034">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content37034">

						<h3 ><a href="#p37034">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge58c.html?mode=quote&amp;f=3&amp;p=37034" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopice75e.html?p=37034#p37034" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopice75e.html?p=37034#p37034" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>23 Sep 2014 19:43
			</p>
			
			
			
			<div class="content">I modified my ReadFormattedLine routine so it now use a standard input method based on xcopy instead of the original choice based one, that was more limited. I also improved the presentation of the input fields.<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p37037" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile37037">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchf147.html?author_id=3221&amp;sr=posts">6033</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 10 Feb 2012 02:20</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content37037">

						<h3 ><a href="#p37037">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingafe9.html?mode=quote&amp;f=3&amp;p=37037" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic2ca9.html?p=37037#p37037" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopic2ca9.html?p=37037#p37037" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a></strong> &raquo; </span>23 Sep 2014 20:52
			</p>
			
			
			
			<div class="content">That's great work Antonio!<br /><br />The way you show the examples is nice too - I just have two comments about that.<br /><br />echo Enter the list of IP addresses (press just Enter to end)<br /><br /><span style="color: #0040FF">If the user presses enter here then it aborts.</span><br /><br />set i=0<br />:nextIP<br />   set /A i+=1<br />   call :ReadFormattedLine IP[%i%]=&quot;###.###.###.###&quot; /M &quot;%i%-  &quot; /W<br />if defined IP[%i%] goto nextIP<br />set /A n=i-1<br />echo/<br />echo IP addresses read: %n%<br />set IP[<br /><br /><span style="color: #0040FF">at this point it might be nice to say that it is ending, and then pause for the people that have clicked on the batch file.</span><br /><br /><span style="color: #408000">echo.<br />echo. End of examples<br />pause</span><br />goto :EOF<br /><br /><br />This is a really polished method of keyboard input entry!</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p37045" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile37045">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searcha86d.html?author_id=2258&amp;sr=posts">2152</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 12 Feb 2011 21:02</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> United States (east coast)</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content37045">

						<h3 ><a href="#p37045">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd101.html?mode=quote&amp;f=3&amp;p=37045" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicd7b7.html?p=37045#p37045" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopicd7b7.html?p=37045#p37045" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a></strong> &raquo; </span>24 Sep 2014 06:02
			</p>
			
			
			
			<div class="content">I agree, this is a very cool and useful routine  <img class="smilies" src="images/smilies/icon_cool.gif" alt="8)" title="Cool" /> <br /><br />There are a number of key presses that give errors and/or crash the routine. A few examples include &amp; &lt; ) = &quot; <br /><br />I think I've managed to modify the :nextKey routine to eliminate the problem. Here is a code excerpt with # showing the added/changed lines (I think I remember all the changes):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:nextKey<br />&nbsp; &nbsp;set &quot;key=&quot;<br />&nbsp; &nbsp;for /F &quot;delims=&quot; %%a in ('xcopy /W &quot;%thisFile%&quot; &quot;%thisFile%&quot; 2^&gt;NUL') do if not defined key set &quot;key=%%a&quot;<br />&nbsp; &nbsp;if &quot;!key:~-1!&quot; neq &quot;!CR!&quot; goto endif<br />&nbsp; &nbsp; &nbsp; if /I &quot;%switch%&quot; equ &quot;/A&quot; goto nextKey<br />&nbsp; &nbsp; &nbsp; if /I &quot;%switch%&quot; neq &quot;/W&quot; goto endRead<br />&nbsp; &nbsp; &nbsp; if %i% equ 0 goto endRead<br />&nbsp; &nbsp; &nbsp; if &quot;%format%&quot; equ &quot;&quot; goto endRead<br />&nbsp; &nbsp; &nbsp; goto nextKey<br />&nbsp; &nbsp;:endif<br />&nbsp; &nbsp;set &quot;key=!key:~-1!&quot;<br />&nbsp; &nbsp;if &quot;!key!&quot; equ &quot;!BS!&quot; (<br />&nbsp; &nbsp; &nbsp; if %i% gtr 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=!BkSpc!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;input=%input:~0,-1%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A i-=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !i! equ 0 set key=0<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; goto checkFormat<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if &quot;%format%&quot; equ &quot;&quot; goto nextKey<br />#&nbsp; if &quot;!key!&quot; equ &quot;=&quot; goto nextKey<br />#&nbsp; if &quot;!key!!key!&quot; equ &quot;&quot;&quot;&quot; goto nextKey<br />&nbsp; &nbsp;if &quot;%format%&quot; equ &quot;#&quot; ( rem Any digit<br />&nbsp; &nbsp; &nbsp; if &quot;!digit: %key% =!&quot; equ &quot;%digit%&quot; goto nextKey<br />&nbsp; &nbsp;) else if &quot;%format%&quot; equ &quot;l&quot; ( rem Any letter<br />&nbsp; &nbsp; &nbsp; if &quot;!letter: %key% =!&quot; equ &quot;%letter%&quot; goto nextKey<br />&nbsp; &nbsp;) else if &quot;%format%&quot; equ &quot;L&quot; ( rem Any letter, convert it to uppercase<br />&nbsp; &nbsp; &nbsp; if &quot;!letter: %key% =!&quot; equ &quot;%letter%&quot; goto nextKey<br />#&nbsp; &nbsp; &nbsp;for %%a in (%letter%) do if /I &quot;!key!&quot; equ &quot;%%a&quot; set &quot;key=%%a&quot;<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; rem Rest of formats are alphanumeric: a A *<br />&nbsp; &nbsp; &nbsp; if &quot;!alphaNum: %key% =!&quot; equ &quot;%alphaNum%&quot; goto nextKey<br />&nbsp; &nbsp; &nbsp; if &quot;%format%&quot; equ &quot;A&quot; ( rem Convert letters to uppercase<br />#&nbsp; &nbsp; &nbsp; &nbsp; for %%a in (%letter%) do if /I &quot;!key!&quot; equ &quot;%%a&quot; set &quot;key=%%a&quot;<br />&nbsp; &nbsp; &nbsp; ) else if &quot;%format%&quot; neq &quot;a&quot; if &quot;%format%&quot; neq &quot;*&quot; echo ERROR: Invalid format in mask &amp; exit /B 2<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;if &quot;%format%&quot; equ &quot;*&quot; (<br />&nbsp; &nbsp; &nbsp; set /P &quot;=*&quot; &lt; NUL<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; set /P &quot;=%key%&quot; &lt; NUL<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set &quot;input=!input!!key!&quot;<br /></code></pre></div><br /><br />One more minor bug - the backspace implementation is a bit wonky. When at end, it adds an extra grey block to end, and it also replaces formatting characters with grey blocks. It shouldn't be hard to make the backspace implementation a bit more intelligent.<br /><br />I also have a few feature suggestions. Let me know if you are not interested, and I will take a stab at implementing them myself. Otherwise I will leave it to you.<br /><br />1) I think the * format feature should be converted into a mode implemented as an option. This would allow * masking no matter what format is used. For example, it might be nice to mask purely numeric input. I can't think of any cases where I've needed a mixture of masked and unmasked input in a single field.<br /><br />2) A minimum length option would be nice. Required positions could be indicated with your current grey block, and optional positions could be indicated by some other character.<br /><br />3) If masking is implemented as an option, then * can be used to represent unrestricted input. (perhaps a few chars should be rejected). You could add an option that overrides and specifies exactly which characters are accepted. This would be good for a password field.<br /><br />4) Perhaps an option to specify what character is used to represent a required position, and another to specify what character represents an optional position.<br /><br /><br />Dave Benham</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p37063" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile37063">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content37063">

						<h3 ><a href="#p37063">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge26c.html?mode=quote&amp;f=3&amp;p=37063" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic101c.html?p=37063#p37063" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopic101c.html?p=37063#p37063" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>24 Sep 2014 14:50
			</p>
			
			
			
			<div class="content">@dbenham,<br /><br />Yes, I started to work on the backspace grey block problem and the optimization of the &quot;:init&quot; loop via a for. I like the replacement of * format by a switch and then use * for &quot;any character&quot;, but I don't like the minimum length option nor required/optional positions because these features will made the code much more complex. /W and /A switches are used to indicate that all positions are required; I don't see the usefulness of a line with required <em class="text-italics">and</em> optional positions...<br /><br />@foxidrive,<br /><br />I will add your suggestions in the next modification, thanks!<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p37167" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile37167">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content37167">

						<h3 ><a href="#p37167">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf911.html?mode=quote&amp;f=3&amp;p=37167" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicbb72.html?p=37167#p37167" onclick="prompt('Message #6',this.href); return false;">#6</a></span> 
									<a class="unread" href="viewtopicbb72.html?p=37167#p37167" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>28 Sep 2014 19:33
			</p>
			
			
			
			<div class="content">A couple of the suggested modifications in ReadFormattedLine routine are ready besides some others of my own. The new version is in the same place as the original code, at beginning of this thread. Please, test it and report the result.<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p37168" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile37168">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchf147.html?author_id=3221&amp;sr=posts">6033</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 10 Feb 2012 02:20</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content37168">

						<h3 ><a href="#p37168">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting8306.html?mode=quote&amp;f=3&amp;p=37168" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic25d7.html?p=37168#p37168" onclick="prompt('Message #7',this.href); return false;">#7</a></span> 
									<a class="unread" href="viewtopic25d7.html?p=37168#p37168" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a></strong> &raquo; </span>28 Sep 2014 22:03
			</p>
			
			
			
			<div class="content">Small bug Antonio - second echo should be echo/<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>echo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the next input field in the line.<br />echo</code></pre></div><br /><br />Some extra screen formatting is needed:<br />When I start the script then text disappears off the top of the screen as 25 lines is default (mine is 30 lines).<br /><br />Otherwise it seems fine.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44274" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44274">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44274">

						<h3 ><a href="#p44274">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting83bf.html?mode=quote&amp;f=3&amp;p=44274" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicf209.html?p=44274#p44274" onclick="prompt('Message #8',this.href); return false;">#8</a></span> 
									<a class="unread" href="viewtopicf209.html?p=44274#p44274" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>06 Dec 2015 14:18
			</p>
			
			
			
			<div class="content">Although ReadFormattedLine subroutine works perfectly, the code is somewhat large and complex and frequently the users are reluctant to use it when they have simpler requirements. The subroutine below is a much simpler version that just emulates the operation of SET /P command. This basic subroutine may be easily modified in order to fulfill any other requirement, like in <a href="http://stackoverflow.com/questions/28239363/only-accept-numeric-characters-in-batch-file-input/28244552#28244552" class="postlink">this example</a> that read only digits with a limited number of characters.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal<br /><br />call :ReadLine line=&quot;Enter a line: &quot;<br />echo Line read: &quot;%line%&quot;<br />goto :EOF<br /><br /><br />:ReadLine var=&quot;prompt&quot;<br /><br />rem Read a line emulating SET /P command<br />rem Antonio Perez Ayala<br /><br />rem Initialize variables<br />setlocal EnableDelayedExpansion<br />echo &gt; _<br />for /F %%a in ('copy /Z _ NUL') do set &quot;CR=%%a&quot;<br />for /F %%a in ('echo prompt $H ^| cmd') do set &quot;BS=%%a&quot;<br /><br />rem Show the prompt and start reading<br />set /P &quot;=%~2&quot; &lt; NUL<br />set &quot;input=&quot;<br />set i=0<br /><br />:nextKey<br />&nbsp; &nbsp;set &quot;key=&quot;<br />&nbsp; &nbsp;for /F &quot;delims=&quot; %%a in ('xcopy /W _ _ 2^&gt;NUL') do if not defined key set &quot;key=%%a&quot;<br /><br />&nbsp; &nbsp;rem If key is CR: terminate input<br />&nbsp; &nbsp;if &quot;!key:~-1!&quot; equ &quot;!CR!&quot; goto endRead<br /><br />&nbsp; &nbsp;rem If key is BS: delete last char, if any<br />&nbsp; &nbsp;set &quot;key=!key:~-1!&quot;<br />&nbsp; &nbsp;if &quot;!key!&quot; equ &quot;!BS!&quot; (<br />&nbsp; &nbsp; &nbsp; if %i% gtr 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=!BS! !BS!&quot; &lt; NUL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;input=%input:~0,-1%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A i-=1<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; goto nextKey<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;rem Insert here any filter on the key<br />&nbsp; &nbsp;rem if &quot;%key%&quot; don't pass the filter:&nbsp; goto nextKey<br /><br />&nbsp; &nbsp;rem Else: show and accept the key<br />&nbsp; &nbsp;set /P &quot;=.!BS!%key%&quot; &lt; NUL<br />&nbsp; &nbsp;set &quot;input=%input%%key%&quot;<br />&nbsp; &nbsp;set /A i+=1<br /><br />goto nextKey<br /><br />:endRead<br />echo/<br />del _<br />endlocal &amp; set &quot;%~1=%input%&quot;<br />exit /B<br /></code></pre></div><br />For example, to show the input characters as asterisks (in order to read a password), just change the &quot;show and accept key&quot; line by SET /P &quot;=*&quot; &lt; NUL.<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p45154" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile45154">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberliste3d4.html?mode=viewprofile&amp;u=8105" class="username">RaceQuest</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search744f.html?author_id=8105&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Feb 2016 22:19</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content45154">

						<h3 ><a href="#p45154">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge813.html?mode=quote&amp;f=3&amp;p=45154" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic718f.html?p=45154#p45154" onclick="prompt('Message #9',this.href); return false;">#9</a></span> 
									<a class="unread" href="viewtopic718f.html?p=45154#p45154" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberliste3d4.html?mode=viewprofile&amp;u=8105" class="username">RaceQuest</a></strong> &raquo; </span>02 Feb 2016 23:11
			</p>
			
			
			
			<div class="content">I am running this under WIN XP SP3 is this what is should look like?<br /><br /><img src="../../i.imgur.com/15OXUgj.jpg" class="postimage" alt="Image" /></div>

			
													<div class="notice">
					Last edited by <a href="memberliste3d4.html?mode=viewprofile&amp;u=8105" class="username">RaceQuest</a> on 04 Feb 2016 07:33, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p45158" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile45158">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchf147.html?author_id=3221&amp;sr=posts">6033</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 10 Feb 2012 02:20</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content45158">

						<h3 ><a href="#p45158">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting1cda.html?mode=quote&amp;f=3&amp;p=45158" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic4c8c.html?p=45158#p45158" onclick="prompt('Message #10',this.href); return false;">#10</a></span> 
									<a class="unread" href="viewtopic4c8c.html?p=45158#p45158" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a></strong> &raquo; </span>03 Feb 2016 07:48
			</p>
			
			
			
			<div class="content">It doesn't appear like that here...<br /><br />If you use a special text editor then try pasting the code into notepad and saving it.<br />Or do you use a non-latin language?<br />The console font you using in CMD.EXE may also be a factor.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p45172" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile45172">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberliste3d4.html?mode=viewprofile&amp;u=8105" class="username">RaceQuest</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search744f.html?author_id=8105&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Feb 2016 22:19</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content45172">

						<h3 ><a href="#p45172">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb4a8.html?mode=quote&amp;f=3&amp;p=45172" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicde31.html?p=45172#p45172" onclick="prompt('Message #11',this.href); return false;">#11</a></span> 
									<a class="unread" href="viewtopicde31.html?p=45172#p45172" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberliste3d4.html?mode=viewprofile&amp;u=8105" class="username">RaceQuest</a></strong> &raquo; </span>04 Feb 2016 07:31
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>foxidrive wrote:</cite>It doesn't appear like that here...<br /><br />If you use a special text editor then try pasting the code into notepad and saving it.<br />Or do you use a non-latin language?<br />The console font you using in CMD.EXE may also be a factor.</div></blockquote><br />Thanks for the tip I was copy and pasting using notepad+  which saved it as &quot;UTF-8&quot; which caused these lines (see below) that have 8bit char codes to be behave different. Edit.com show it as two chars like the image in my previous post.  Notepad saved same pasting as &quot;ANSI&quot;.  Never encountered that issue before - tricky. <br />These lines:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=Û&quot;&nbsp; &nbsp;<br />...<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=Û&quot; &lt; NUL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />...<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=!SP!!BS!!BS!Û!BS!&quot; &lt; NUL<br />...<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=Û!BS!!BS!Û!BS!&quot; &lt; NUL<br />...<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=%format%!BS!!BS!Û!BS!&quot; &lt; NUL<br />...<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=!SP!!BS!!BS!Û!BS!&quot; &lt; NUL<br />... <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=Û!BS!!BS!&quot; &lt; NUL<br />&nbsp;<br /></code></pre></div><br /><br /><a href="http://pastebin.com/iRr7p5fT" class="postlink">Copied to pastebin</a></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p57826" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile57826">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content57826">

						<h3 ><a href="#p57826">Re: ReadFormattedLine.bat: Read a line with specific format</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting5050.html?mode=quote&amp;f=3&amp;p=57826" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic1fdb.html?p=57826#p57826" onclick="prompt('Message #12',this.href); return false;">#12</a></span> 
									<a class="unread" href="viewtopic1fdb.html?p=57826#p57826" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>26 Aug 2018 17:57
			</p>
			
			
			
			<div class="content">Although <strong class="text-strong">:ReadFormattedLine</strong> subroutine works very well, it is large and complicated, so new users frequently are reluctant to use it... I developed two new simpler versions of such a subroutine based on CHOICE command that are much smaller, but with less capabilities:<br>
<br>
<strong class="text-strong">ReadInput</strong> simplest version:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off
setlocal

echo Input like: XY########
call :ReadInput INPUT="Type input: " "++########"
echo INPUT=%INPUT%
goto :EOF


:ReadInput var= "Prompt" "mask"
setlocal EnableDelayedExpansion

rem Characters for the mask are: # digit, + upcase letter, @ digit or upcase letter

rem Define the character sets used in the input
set "set[#]= 0123456789"
set "set[+]= ABCDEFGHIJKLMNOPQRSTUVWXYZ"
set "set[@]=%set[+]%%set[#]:~1%"

rem Initialize input process
set "var="
set /P "=%~2" &lt; NUL
set "mask=%~3"
set "i=0"

:NextChar
   set "maskChar=!mask:~%i%,1!"
   choice /N /C !set[%maskChar%]! &gt; NUL
   set "var=!var!!set[%maskChar%]:~%errorlevel%,1!"
   set /P "=!var:~-1!" &lt; NUL
   set /A i+=1
if "!mask:~%i%!" neq "" goto NextChar
echo/

endlocal &amp; set "%~1=%var%"
exit /B
</code></pre></div>

This version have these capabilities:<br>

<ul>
<li> Characters allowed in the mask are: # digit, + upcase letter, @ digit or upcase letter. There is no way to enter any other character, including white space.</li>
<li> There is no way to delete input characters.</li>
<li> The input is completed automatically after the last character is entered. No needed/allowed ENTER key.</li>
</ul>

<strong class="text-strong">ReadInput</strong> full version:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off
setlocal

echo To delete a character, just wait 3 seconds
echo/

echo Telephone number in (##)###-#### format
call :ReadInput PHONE="Telephone number:   " "(##)###-####"
echo PHONE=%PHONE%
echo/

echo Enter RFC in XXXX-######-??? format
call :ReadInput RFC="Enter RFC:   " "++++-######-@@@"
echo RFC=%RFC%
echo/

call :ReadInput PASS="Enter password (8 chars): " "????????" /P
echo PASS=%PASS%
goto :EOF


:ReadInput var= "Prompt" "mask" [/P]ass
setlocal EnableDelayedExpansion

rem Characters for the mask are: _ letter, # digit, ? letter or digit
rem                              + upcase letter,  @ upcase letter or digit

rem Define the DEL delay (seconds after the last character will be deleted)
set "DelDelay=2"

rem Define the character sets used in the input
set "set[#]= þ0123456789"
set "set[+]= þABCDEFGHIJKLMNOPQRSTUVWXYZ"
set "set[@]=%set[+]%%set[#]:~2%"
set "set[_]=%set[+]%abcdefghijklmnopqrstuvwxyz" &amp; set "caseSwitch[_]=/CS"
set "set[?]=%set[_]%%set[#]:~2%"                &amp; set "caseSwitch[?]=/CS"
for /F %%a in ('echo prompt $H ^| cmd') do set "BS=%%a"

rem Initialize input process
set "var="
set /P "=%~2" &lt; NUL
set "mask=%~3"
set "i=0"

:NextChar
   set "maskChar=!mask:~%i%,1!"
   if defined set[%maskChar%] goto else
      rem Not mask input char: just show/insert it
      set "char=%maskChar%"
      goto endif
   :else
      rem Apply masked input
      choice /N /C !set[%maskChar%]! !caseSwitch[%maskChar%]! /T %DelDelay% /D þ &gt; NUL
      if errorlevel 2 goto endif2
         :Delete
         if %i% equ 0 goto NextChar
         set /P "=.%BS%%BS%  %BS%%BS%" &lt; NUL
         set "var=%var:~0,-1%"
         set /A i-=1
         set "maskChar=!mask:~%i%,1!"
         if not defined set[%maskChar%] goto Delete
         goto NextChar
      :endif2
      set "char=!set[%maskChar%]:~%errorlevel%,1!"
   :endif
   set "var=%var%%char%"
   (if /I "%~4" neq "/P" (set /P "=%var:~-1%") else set /P "=*") &lt; NUL
   set /A i+=1
if "!mask:~%i%!" neq "" goto NextChar
echo/
endlocal &amp; set "%~1=%var%"
exit /B
</code></pre></div>

This version have these capabilities, besides the ones in previous version:<br>

<ul>
<li> Additional characters allowed in the mask are: _ letter, ? letter or digit. This point allows to enter upcase/lowcase letters.</li>
<li> Any other character in the mask is displayed <em class="text-italics">and</em> included in the returned value.</li>
<li> The last input character is automatically deleted after 3 seconds of no input activity.</li>
<li> The <strong class="text-strong">/P</strong> optional fourth parameter allows to enter <em class="text-italics">passwords</em> where asterisks are displayed in place of input characters.</li>
</ul>

Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting01bc.html?mode=reply&amp;f=3&amp;t=5775" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic2376.html?f=3&amp;t=5775&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=5775">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			12 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron68e3.gif?cron_type=cron.task.text_reparser.pm_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5775&p=57826 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 04:06:45 GMT -->
</html>
