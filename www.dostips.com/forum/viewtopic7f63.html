<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=7746&hilit=maze&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 08:17:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; Batch Maze Game:(Another Major speed improvement)</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>Batch Maze Game:(Another Major speed improvement)</h2>
		<p><a href="viewtopic8343.html?f=3&amp;t=7746">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=7746</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>10 Mar 2017 05:54</strong></div>
				<div class="author">by <strong>Sounak@9434</strong></div>
				<div class="content">Hello, everyone. This time I'm not here for a problem but for a little batch game. <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br />I call it Maze_Game.bat<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>::Changelog<br /><br />::V:2.0 HOTFIX<br />Fixed a bug where Congratulation is not being displayed after finishing a level<br /><br />V:2.0 (Another Major Speed Improvement+bugfix)<br />Optimized input and analysis process for best performance on higher levels<br />Edited Logo<br />Fixed bugs<br /><br />V:1.2 (Major speed improvement+bugfix)<br />Updated lilgui.bat for speed improvement. Now it only recreates two/one lines for your each movement<br />Updated Align.bat for a slight speed improvement<br />Fixed some small bugs where &quot;!&quot; sign was not appearing<br />Added input check in &quot;Defined specific window&quot;<br /><br />V:1.1.2(bugfix)<br />Fixed a bug where the main game would continue even if you lost(due to the timeout)<br />Fixed a very small bug where :options is written as :option mistakenly<br /><br />V:1.1.1(bugfix)<br />Fixed a small bug where the timeout would go to negative if output is slow<br /><br />V:1.1<br />Added Timeout Feature<br />Added changing of code page<br /><br />V:1.0<br />Released The Game</code></pre></div><br />Get V:2.0<br /><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><span class="imageset icon_topic_attach"></span> <a class="postlink" href="download/file6ea4.php?id=176">MAZEGAME.zip</a></dt>
						<dd>(9.09 KiB) Downloaded 134 times</dd>
		</dl>
		
		
			</div><br />Get V:1.2<br /><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><span class="imageset icon_topic_attach"></span> <a class="postlink" href="download/file4018.php?id=173">MAZEGAME.zip</a></dt>
			<dd><em>Maze_game V1.2</em></dd>			<dd>(9.06 KiB) Downloaded 87 times</dd>
		</dl>
		
		
			</div><br />Get V:1.1.2<br /><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><span class="imageset icon_topic_attach"></span> <a class="postlink" href="download/filec7f4.php?id=156">MAZE112.zip</a></dt>
			<dd><em>Maze_game V1.1.2</em></dd>			<dd>(8.96 KiB) Downloaded 97 times</dd>
		</dl>
		
		
			</div><br /><br />Added A timeout feature and code page changing to support most of the PCs.<br />I would work on the implantation of the Neorobin's code.<br />For people like me who still enjoy classic games this is something they would like.<br />This is an almost pure batch Game. Only the <span class="posthilit">maze</span> generator uses a compiled application called amaze.exe<br />All files needed are provided under the zip_archive.<br />Try the game if you like.<br /><br />//EDIT: I have finally optimized the game for best performance. It now gives almost smooth performance even in 51x51 grid level.<br /><br />Any suggestion, bug report will be highly appreciated. <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>::Special Thanks to<br />einstein1969<br />&nbsp; &nbsp;For Neorobin's code<br />&nbsp; &nbsp;For Suggestion to add timeout<br />&nbsp; &nbsp;For finding a bug</code></pre></div><br /><br /><br />Sounak</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game</h3>
				<div class="date">Posted: <strong>10 Mar 2017 10:53</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">Hi,<br /><br />good work Sounak@9434!<br /><br />can you add a timeout for completing a <span class="posthilit">maze</span> ? (this is very difficult) <br /><br />For pure batch game you can use neorobin's <span class="posthilit">maze</span> generator:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal enabledelayedexpansion &amp; color f0 &amp; chcp 437<br />set /a &quot;wid=60,hei=40,wid|=1,hei|=1,iMax=wid*hei,cols=wid,row=hei+1&quot;<br />title <span class="posthilit">maze</span> !wid! col X !hei! row<br />mode con cols=!cols! lines=!row!<br /><br />set &quot;<span class="posthilit">maze</span>=&quot;<br />for /l %%y in (1 1 !hei!) do for /l %%x in (1 1 !wid!) do set &quot;<span class="posthilit">maze</span>=!<span class="posthilit">maze</span>!#&quot;<br />REM {1,2,4,8} -&gt; {17,18,20,24} &lt;-&gt; {Up,Left,Right,Down}<br />set &quot;d17=y-=2&quot; &amp; set &quot;d18=x-=2&quot; &amp; set &quot;d20=x+=2&quot; &amp; set &quot;d24=y+=2&quot; &amp; set &quot;d=0&quot;<br />set &quot;w17=y+=1&quot; &amp; set &quot;w18=x+=1&quot; &amp; set &quot;w20=x-=1&quot; &amp; set &quot;w24=y-=1&quot; &amp; set &quot;w=0&quot;<br />set &quot;dirs=&quot; &amp; set &quot;cells=.&quot; &amp; set /a &quot;x=2, y=2&quot;<br /><br />for /l %%* in () do (<br />&nbsp; if defined n!x!_!y! ( rem backtrack point<br />&nbsp; &nbsp; if !dirs:~-2! equ 0x1f ( rem all dirs be searched at backtrack point<br />&nbsp; &nbsp; &nbsp; set &quot;dirs=!dirs:~0,-2!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;cells=!cells:~1!&quot; &amp; set &quot;cells=!cells:*.=.!&quot;<br />&nbsp; &nbsp; &nbsp; if &quot;!cells!&quot;==&quot;.&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;nul set /p &quot;=&quot; &amp; title <span class="posthilit">Maze</span> generation completed, any key to exit...<br />&nbsp; &nbsp; &nbsp; &nbsp; &gt;nul pause &amp; exit<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; for /f &quot;tokens=1-2 delims=.#&quot; %%x in (&quot;!cells!&quot;) do (set x=%%x&amp;set y=%%y)<br />&nbsp; &nbsp; ) else ( rem exist some dirs not searched at backtrack point<br />&nbsp; &nbsp; &nbsp; for /f &quot;tokens=1-2 delims=.#&quot; %%x in (&quot;!cells!&quot;) do (set x=%%x&amp;set y=%%y)<br />&nbsp; &nbsp; &nbsp; set &quot;dir=!dirs:~-2!&quot;<br /><br />&nbsp; &nbsp; &nbsp; set /a &quot;visit=1, randS=!random! &amp; 3, randE=randS | 4&quot;<br />&nbsp; &nbsp; &nbsp; for /l %%d in (!randS! 1 !randE!) do if !visit! neq 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; set /a &quot;dc=1&lt;&lt;(%%d &amp;3), visit=dir&amp;dc,dir|=dc, dc|=0x10&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; if !visit! equ 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for %%r in (d!dc!) do set /a &quot;!%%r!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;dirs=!dirs:~0,-2!!dir!&quot;<br />&nbsp; &nbsp; ) ) )<br />&nbsp; ) else ( rem can pass point<br />&nbsp; &nbsp; set /a &quot;xin=x-2^x-wid,yin=y-2^y-hei,in=(xin&amp;yin)&gt;&gt;31&quot;<br />&nbsp; &nbsp; if !in! equ 0 ( rem out of the region<br />&nbsp; &nbsp; &nbsp; for /f &quot;tokens=1-2 delims=.#&quot; %%x in (&quot;!cells!&quot;) do (set x=%%x&amp;set y=%%y)<br />&nbsp; &nbsp; ) else ( rem In the region<br />&nbsp; &nbsp; &nbsp; set &quot;cells=.!x!#!y!!cells!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;n!x!_!y!=1&quot;<br /><br />&nbsp; &nbsp; &nbsp; for %%r in (w!dc!) do for %%i in (1 2) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; set /a &quot;ind=(x-1)+(y-1)*wid+1, lL=ind-1, lR=iMax-ind&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; for /f &quot;tokens=1-3&quot; %%a in (&quot;!lL! !ind! !lR!&quot;) do (set <span class="posthilit">maze</span>=!<span class="posthilit">maze</span>:~0,%%a!+!<span class="posthilit">maze</span>:~%%b,%%c!)<br />&nbsp; &nbsp; &nbsp; &nbsp; set /a &quot;!%%r!&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; for %%r in (d!dc!) do set /a &quot;!%%r!&quot;<br />&nbsp; &nbsp; &nbsp; cls &amp; &lt;nul set /p &quot;=!<span class="posthilit">maze</span>:+= !&quot;<br /><br />&nbsp; &nbsp; &nbsp; set /a &quot;dc=(1&lt;&lt;(!random!&amp;3))|0x10&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;dirs=!dirs!!dc!&quot;<br />&nbsp; &nbsp; &nbsp; for %%r in (d!dc!) do set /a &quot;!%%r!&quot;<br />) ) )<br />exit<br /></code></pre></div><br /><br />einstein1969.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game</h3>
				<div class="date">Posted: <strong>10 Mar 2017 23:24</strong></div>
				<div class="author">by <strong>Sounak@9434</strong></div>
				<div class="content">Hi, einstein1969<br /><blockquote><div><cite>einstein1969 wrote:</cite>can you add a timeout for completing a <span class="posthilit">maze</span> ? (this is very difficult) </div></blockquote><br />After brainstorming for ideas for Half an hour I finally made it.<br />I updated the archive to version 1.1<br />Hope you would like it.<br /><br /><blockquote><div><cite>einstein1969 wrote:</cite>For pure batch game you can use neorobin's <span class="posthilit">maze</span> generator</div></blockquote><br />I would be working on it. But That code may be kind of Slower than this whole thing already is.<br /><br />Maybe setting blocks of all lines to different variables would fasten up the script a lot.<br />I would check that.<br /><br />Thanks for your review after all.<br /><br />Sounak</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game</h3>
				<div class="date">Posted: <strong>11 Mar 2017 03:29</strong></div>
				<div class="author">by <strong>Sounak@9434</strong></div>
				<div class="content">Fixed a few bugs.<br />The latest version now works fine.<br /><br />And I checked generating display and echoing is taking 75% of time and getting input and processing is taking 25% of time on average on high width and length.<br /><br />Have to work more on speeding up the script.<br />Till then, Enjoy <img class="smilies" src="images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br /><br />Sounak</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Major speed improvement)</h3>
				<div class="date">Posted: <strong>10 Apr 2017 23:55</strong></div>
				<div class="author">by <strong>Sounak@9434</strong></div>
				<div class="content">Updated lilgui.bat with new algorithm for display.<br />It now sets all lines at the beginning and only recreates two lines each turn for vertical movement and one line each turn for horizontal movement.<br />In simple words this version is 3X faster than the last one.<br />I also updated Align.bat with new code for a slight faster output<br />Some bugfixes are also done<br /><br />Thanks everyone for 30+ downloads.<br /><br />Enjoy <img class="smilies" src="images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br />And don't forget to give suggestions and inform me about bugs.<br /><br />Sincerely,<br />Sounak</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>12 Apr 2017 00:39</strong></div>
				<div class="author">by <strong>Sounak@9434</strong></div>
				<div class="content">I have finally updated lilgui.bat with a optimized analysis which is another boost to speed improvement. Now this game runs smoothly on higher levels.<br />Hope you all would like the new updates.<br /><br />I think I will leave this game as it is till any other suggestion as I am out of Ideas for improvements.<br /><br />Anyway, Enjoy <img class="smilies" src="images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br /><br />Sincerely,<br />Sounak</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>12 Apr 2017 15:39</strong></div>
				<div class="author">by <strong>einstein1969</strong></div>
				<div class="content">Hi, <br /><br />I have probed the V 2.0. and when i finish the game in time, the game change windows size and reinit a new <span class="posthilit">maze</span> without show the &quot;congratulation&quot; message.<br /><br />einstein1969</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>13 Apr 2017 00:29</strong></div>
				<div class="author">by <strong>Sounak@9434</strong></div>
				<div class="content"><blockquote><div><cite>einstein1969 wrote:</cite>the game change windows size and reinit a new <span class="posthilit">maze</span> without show the &quot;congratulation&quot; message.<br /></div></blockquote><br /><br />Thanks again einstein1969 for finding a bug.<br />I actually planned to display the congratulation after the player finishes all the levels(64 in total), But that's a pretty long wait for a congratulation <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br />So I edited the code. Now it shows congratulation each time you finish a level<br /><br />Thanks for the suggestion/bug report.<br /><br />And unfortunately I am still unable to implant neorobin's_maze_generator code. But I'll kepp on trying.<br /><br />Anyway thanks.<br /><br />Sincerely,<br />Sounak</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>28 Sep 2017 20:19</strong></div>
				<div class="author">by <strong>CirothUngol</strong></div>
				<div class="content">Thanks for the fun little batch game. I played it for awhile (looks great, quick and fun to play, challenging when the mazes get big) and was checking out neorobin's code... so now I've got mazes on my mind! I've been examining the different algorithms and decided to attempt the easiest depth-first <span class="posthilit">maze</span> generator I could muster. It's super simple, finitely iterative, totally stack-less, can produce mazes of any dimensions up to a maximum of ~2096 cells, and I've designed it as a direct replacement for <strong class="text-strong">amaze.exe</strong>. Simply substitute <strong class="text-strong">amaze.bat</strong> and make the following change to line# 14 of the file <strong class="text-strong">mazeit.bat</strong>:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt;%_filename% CALL amaze %lines% %cols% #</code></pre></div><br />I was able to increase the maximum number of cells from ~1992 to ~2096 by removing the exterior walls from the <span class="posthilit">maze</span> string (adding them back during output). I eliminated the stack by storing the back-tracking information in the <span class="posthilit">maze</span> itself... leaving bread crumbs, Hansel und Gretel style! It was already checking in each direction for closed cells, so I added a check for crumbs. Bingo, no stack. I've added some other stuff to the version I'm currently playing with (retention of longest path, animated display) but I'm posting this version now since it's a ready-to-go command-line replacement (I've also posted it at <a href="http://rosettacode.org/wiki/Maze_generation" class="postlink">Rosetta Code</a>).<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:amaze Rows Cols &#91;wall char&#93;<br />:: A stack-less, iterative, depth-first <span class="posthilit">maze</span> generator in native WinNT batch.<br />:: Rows and Cols must each be &gt;1 and Rows*Cols cannot exceed 2096.<br />:: Default wall character is #, &#91;wall char&#93; is used if provided.<br />:: 2017/09/27 v0.1 by CirothUngol<br /><br />@ECHO OFF<br />SETLOCAL EnableDelayedExpansion<br /><br />:: check for valid input, else GOTO :help<br />IF /I &quot;%~2&quot; EQU &quot;&quot; GOTO :amaze_help<br />FOR /F &quot;tokens=* delims=0123456789&quot; %%A IN (&quot;%~1%~2&quot;) DO IF &quot;%%~A&quot; NEQ &quot;&quot; GOTO :amaze_help<br />SET /A &quot;rows=%~1, cols=%~2, mTmp=rows*cols&quot;<br />IF !rows! LSS 2&nbsp; &nbsp; GOTO :amaze_help<br />IF !cols! LSS 2&nbsp; &nbsp; GOTO :amaze_help<br />IF !mTmp! GTR 2096 GOTO :amaze_help<br /><br />:: set map characters and use 1st character of %3 for wall, if defined<br />SET &quot;wall=#&quot;<br />SET &quot;hall= &quot;<br />SET &quot;crumb=.&quot;<br />IF &quot;%~3&quot; NEQ &quot;&quot; SET &quot;wall=%~3&quot;<br />SET &quot;wall=!wall:~0,1!&quot;<br /><br />:: assign width, height, cursor position, loop count, and offsets for NSEW<br />SET /A &quot;cnt=0, wide=cols*2-1, high=rows*2-1, size=wide*high, N=wide*-2, S=wide*2, E=2, W=-2&quot;<br /><br />:: different random entrance points<br />:: ...on top<br />:: SET /A &quot;start=(!RANDOM! %% cols)*2&quot;<br />:: ...on bottom<br />:: SET /A &quot;start=size-(!RANDOM! %% cols)*2-1&quot;<br />:: ...on top or bottom<br />:: SET /A ch=cols*2, ch=!RANDOM! %% ch<br />:: IF !ch! GEQ !cols! ( SET /A &quot;start=size-(ch-cols)*2-1&quot;<br />:: ) ELSE SET /A start=ch*2<br />:: random entrance inside <span class="posthilit">maze</span><br />SET /A &quot;start=(!RANDOM! %% cols*2)+(!RANDOM! %% rows*2)*wide&quot;<br />SET /A &quot;curPos=start, cTmp=curPos+1, loops=cols*rows*2+1&quot;<br /><br />:: fill the <span class="posthilit">maze</span> with 8186 wall characters, clip to size, and open 1st cell<br />SET &quot;mz=!wall!&quot;<br />FOR /L %%A IN (1,1,6) DO SET mz=!mz!!mz!!mz!!mz!<br />SET bdr=!mz:~-%wide%!<br />SET mz=!mz:~3!!mz:~3!<br />SET mz=!mz:~-%size%!<br />SET mz=!mz:~0,%curPos%!!hall!!mz:~%cTmp%!<br /><br />:: iterate #cells*2+1 steps of random depth-first search<br />FOR /L %%@ IN (1,1,%loops%) DO (<br />&nbsp; &nbsp;SET &quot;rand=&quot; &amp; SET &quot;crmPos=&quot;<br />&nbsp; &nbsp;REM set values for NSEW cell and wall positions<br />&nbsp; &nbsp;SET /A &quot;rCnt=rTmp=0, cTmp=curPos+1, np=curPos+N, sp=curPos+S, ep=curPos+E, wp=curPos+W&quot;<br />&nbsp; &nbsp;SET /A &quot;wChk=curPos/wide*wide, eChk=wChk+wide, nw=curPos-wide, sw=curPos+wide, ew=curPos+1, ww=curPos-1&quot;<br />&nbsp; &nbsp;REM examine adjacent cells, build direction list, and find last crumb position<br />&nbsp; &nbsp;FOR /F &quot;tokens=1-8&quot; %%A IN (&quot;!np! !sp! !ep! !wp! !nw! !sw! !ew! !ww!&quot;) DO (<br />&nbsp; &nbsp;&nbsp; &nbsp;IF !np! GEQ 0 IF &quot;!mz:~%%A,1!&quot; EQU &quot;!wall!&quot; ( SET /A rCnt+=1 &amp; SET &quot;rand=n !rand!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;) ELSE IF &quot;!mz:~%%E,1!&quot; EQU &quot;!crumb!&quot; SET /A crmPos=np, cw=nw<br />&nbsp; &nbsp;&nbsp; &nbsp;IF !sp! LEQ !size! IF &quot;!mz:~%%B,1!&quot; EQU &quot;!wall!&quot; ( SET /A rCnt+=1 &amp; SET &quot;rand=s !rand!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;) ELSE IF &quot;!mz:~%%F,1!&quot; EQU &quot;!crumb!&quot; SET /A crmPos=sp, cw=sw<br />&nbsp; &nbsp;&nbsp; &nbsp;IF !ep! LEQ !eChk! IF &quot;!mz:~%%C,1!&quot; EQU &quot;!wall!&quot; ( SET /A rCnt+=1 &amp; SET &quot;rand=e !rand!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;) ELSE IF &quot;!mz:~%%G,1!&quot; EQU &quot;!crumb!&quot; SET /A crmPos=ep, cw=ew<br />&nbsp; &nbsp;&nbsp; &nbsp;IF !wp! GEQ !wChk! IF &quot;!mz:~%%D,1!&quot; EQU &quot;!wall!&quot; ( SET /A rCnt+=1 &amp; SET &quot;rand=w !rand!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;) ELSE IF &quot;!mz:~%%H,1!&quot; EQU &quot;!crumb!&quot; SET /A crmPos=wp, cw=ww<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;IF DEFINED rand ( REM adjacent unvisited cell is available<br />&nbsp; &nbsp;&nbsp; &nbsp;SET /A rCnt=!RANDOM! %% rCnt<br />&nbsp; &nbsp;&nbsp; &nbsp;FOR %%A IN (!rand!) DO ( REM pick random cell + wall<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;IF !rTmp! EQU !rCnt! SET /A &quot;curPos=!%%Ap!, cTmp=curPos+1, mw=!%%Aw!, mTmp=mw+1&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;SET /A rTmp+=1<br />&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;&nbsp; &nbsp;REM write the 2 new characters into the <span class="posthilit">maze</span><br />&nbsp; &nbsp;&nbsp; &nbsp;FOR /F &quot;tokens=1-4&quot; %%A IN (&quot;!mw! !mTmp! !curPos! !cTmp!&quot;) DO (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;SET &quot;mz=!mz:~0,%%A!!crumb!!mz:~%%B!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;SET &quot;mz=!mz:~0,%%C!!hall!!mz:~%%D!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;) ELSE IF DEFINED crmPos ( REM follow the crumbs backward<br />&nbsp; &nbsp;&nbsp; &nbsp;SET /A mTmp=cw+1<br />&nbsp; &nbsp;&nbsp; &nbsp;REM erase the crumb character and set new cursor position<br />&nbsp; &nbsp;&nbsp; &nbsp;FOR /F &quot;tokens=1-2&quot; %%A IN (&quot;!cw! !mTmp!&quot;) DO SET &quot;mz=!mz:~0,%%A!!hall!!mz:~%%B!&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;SET &quot;curPos=!crmPos!&quot;<br />&nbsp; &nbsp;)<br />)<br />SET /A open=cols/2*2, mTmp=open+1<br />ECHO !wall!!bdr:~0,%open%!!hall!!bdr:~%mTmp%!!wall!<br />FOR /L %%A IN (0,!wide!,!size!) DO IF %%A LSS !size! ECHO !wall!!mz:~%%A,%wide%!!wall!<br />ECHO !wall!!bdr:~0,%open%!!hall!!bdr:~%mTmp%!!wall!<br />ENDLOCAL<br />EXIT /B 0<br /><br />:amaze_help<br />ECHO Usage:&nbsp; &nbsp;%~0 Rows Cols &#91;wall char&#93;<br />ECHO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rows^&gt;1, Cols^&gt;1, and Rows*Cols^&lt;=2096<br />ECHO Example: %~0 11 39 @<br />ENDLOCAL<br />EXIT /B 0<br /></code></pre></div><br />Next up is a <span class="posthilit">maze</span>-solving algorithm (simple depth-first search) and then I want to try to implement a couple more (Hunt and Kill, Growing Tree, recursive division, and Eller's especially) before I attempt to do anything useful with them. Check out <a href="http://www.astrolog.org/labyrnth/algrithm.htm" class="postlink">Think Labyrinth</a> if mazes interest you at all, it's the Grand PooBah of <span class="posthilit">maze</span> algorithm sites!<br /><br />Edit 1: fixed link to Rosetta Code.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>01 Oct 2017 08:30</strong></div>
				<div class="author">by <strong>pieh-ejdsch</strong></div>
				<div class="content">Hello,<br />i think your <span class="posthilit">maze</span> is not really a <span class="posthilit">maze</span>.<br />every cell of this big area is (wall - field to go - wall).<br />your algoritm go not throw the wall because it will go on a Wall.<br />when it go on a Wall, it must check the corners too.<br />if it goes throw a Wall it will only Check the field behind this one.<br />This are not the same things.<br />If you have a place 2x2 fields this is forbidden at on the wall - as same as a place of 3x3 fields at throw a wall.<br />Phil</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>02 Oct 2017 10:57</strong></div>
				<div class="author">by <strong>CirothUngol</strong></div>
				<div class="content"><blockquote><div><cite>pieh-ejdsch wrote:</cite>Hello,<br />i think your <span class="posthilit">maze</span> is not really a <span class="posthilit">maze</span>.</div></blockquote><br />Hmm, perhaps we have different definitions of what a <span class="posthilit">maze</span> is? It produces output fairly identical to <strong class="text-strong">amaze.exe</strong> (so perhaps it doesn't produce mazes either?). It also produces output fairly identical to many of the code samples on Rosetta Code (for non-graphic languages) and is directly solvable with a right or left-handed Wall Follow algorithm.<br /><blockquote class="uncited"><div>your algoritm go not throw the wall because it will go on a Wall.</div></blockquote> Variables !np!, !sp!, !ep!, and !wp! hold the NSEW positions for adjacent cells (they are always 2 characters away in any direction). Variables !nw!, !sw!, !ew!, and !ww! hold the NSEW positions of adjacent walls (which are always 1 character away in any direction). Perhaps you're seeing the placement and removal of crumb characters that are placed in newly-vacated wall positions? These are used for back-tracking, alleviating the need for a stack.<br /><br />...you <em class="text-italics">have</em> run the code to see that it produces a 1-character wide multiply interlinked passage with only one solution, right?<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br />@&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@<br />@@@@@ @ @@@ @ @@@@@ @ @ @ @ @@@ @@@ @ @ @ @@@@@ @ @@@ @@@ @@@ @@@ @ @@@ @@@@@ @<br />@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@ @ @ @ @&nbsp; &nbsp;@ @&nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp;@ @<br />@ @@@@@@@@@@@@@@@ @@@ @ @ @@@ @@@ @@@ @@@@@@@ @ @@@ @ @@@@@ @ @@@@@ @ @@@ @@@ @<br />@&nbsp; &nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@ @ @&nbsp; &nbsp;@ @&nbsp; &nbsp;@ @ @&nbsp; &nbsp; &nbsp;@ @ @&nbsp; &nbsp; &nbsp;@<br />@@@@@@@ @ @ @ @@@ @ @@@@@@@ @@@ @ @@@@@@@@@ @ @ @ @@@@@ @ @ @@@ @@@@@ @ @ @@@@@<br />@&nbsp; &nbsp;@ @ @&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@ @ @ @&nbsp; &nbsp;@ @&nbsp; &nbsp;@ @&nbsp; &nbsp;@ @<br />@ @ @ @ @@@ @@@@@@@@@ @ @ @@@@@@@@@ @ @@@@@@@@@ @@@@@ @ @ @ @ @@@ @ @@@ @@@ @ @<br />@ @&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@ @ @<br />@ @@@ @@@ @@@ @@@ @@@@@@@@@@@ @@@ @@@@@@@ @ @@@@@@@ @@@@@ @@@ @ @@@ @@@ @@@ @ @<br />@&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@ @<br />@@@ @@@ @ @@@@@ @ @ @@@@@ @ @@@ @ @@@ @@@@@@@ @ @ @@@@@ @@@ @@@@@ @@@ @@@ @@@ @<br />@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@<br />@ @@@@@ @@@ @@@@@@@ @ @@@@@ @@@@@@@ @ @ @@@ @@@@@@@@@ @@@ @@@ @ @@@ @@@ @@@ @ @<br />@ @&nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@ @ @&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp;@&nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@ @<br />@ @ @ @@@ @@@ @@@@@@@ @ @ @@@ @@@ @@@@@@@@@@@ @ @ @ @ @ @@@ @@@ @ @@@@@@@ @@@ @<br />@ @ @&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@ @ @ @&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@ @ @&nbsp; &nbsp;@&nbsp; &nbsp;@ @ @&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@<br />@ @ @@@ @@@@@@@ @@@ @ @ @ @ @@@@@@@@@@@@@@@@@ @@@@@ @ @@@@@@@ @ @ @@@@@ @@@ @@@<br />@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@ @ @ @&nbsp; &nbsp;@ @ @&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@ @&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp;@ @ @ @<br />@ @@@ @@@@@ @ @ @ @ @@@@@ @@@ @@@@@ @ @@@@@ @@@ @@@@@ @ @ @ @@@@@@@ @ @@@ @ @ @<br />@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp;@&nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@&nbsp; &nbsp; &nbsp; &nbsp;@<br />@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</code></pre></div><br />The entrance and exit are arbitrarily placed to match the output of <strong class="text-strong">amaze.exe</strong>, my current code always places the exit at the end of the longest single path. I've used this same method to implement Growing Tree and Hunt &amp; Kill algorithms, both of with seem to work fine (albeit rather slowly ^_^)<br />I implemented the algorithms myself from the explanations on Think Labyrinth, so if you still feel the algorithm and it's output is incorrect, I would truly like to know why it seems to behave appropriately so that I could correct them.<br /><br />PS. I'm currently wasting plenty of time on a little animated batch <span class="posthilit">maze</span> generator/solver. So far, Depth-1st Backtracker (this), Growing Tree, and Hunt &amp; Kill are working, but the only solver I've written is a simple Left or Right-handed Wall Follow. Totally useless, but fun to watch and a bunch of fun to create!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Batch <span class="posthilit">Maze</span> Game:(Another Major speed improvement)</h3>
				<div class="date">Posted: <strong>04 Oct 2017 14:18</strong></div>
				<div class="author">by <strong>pieh-ejdsch</strong></div>
				<div class="content">ok your program goes.<br /> I just think the ALGORITHM was made a bit cumbersome. It would be easier to put all fields in an array and to process this one after the other. a non-processed field may have no connection. that is to say, if no connection takes place from this field, it should at least create one. If there is already a connection, however, it should be able to select it again by chance. <br />Thus, connecting would only take a full array. In addition, the compound a&gt; b should be the same as b&gt; a. In a second array you pack only the connections and by reading the fields the length of the path can see.<br />one horizontal and one vertical<br />this is shorter<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for /f &quot;delims=1234567890&quot; %%H in (&quot;%~1%~2&quot;) do goto :help<br />...<br />set &quot;wall=%~3#&quot;<br />set &quot;wall=!wall:~0,1!&quot;</code></pre></div><br />Phil</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=7746&hilit=maze&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 08:17:11 GMT -->
</html>
