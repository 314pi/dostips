<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=763&p=2490 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:02:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>FTP list - DosTips.com</title>


	<link rel="canonical" href="viewtopic027f.html?t=763">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopica247.html?f=3&amp;t=763">FTP list</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="postinga460.html?mode=reply&amp;f=3&amp;t=763" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicba6a.html?f=3&amp;t=763&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="763" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			10 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p2482" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2482">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchfa08-2.html?author_id=1048&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Dec 2009 15:40</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2482">

						<h3 class="first"><a href="#p2482">FTP list</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting86c1-2.html?mode=quote&amp;f=3&amp;p=2482" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic3edb.html?p=2482#p2482" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopic3edb.html?p=2482#p2482" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a></strong> &raquo; </span>02 Dec 2009 15:48
			</p>
			
			
			
			<div class="content">Is there a way to run do ftp ls and get the list back into the batch file?
<br />
<br />I'm calling:
<br />:FTPSetup
<br />&gt; script.ftp ECHO lcd &quot;%LCL_PATH%&quot;\%folderpath%
<br />rem &gt;&gt; script.ftp ECHO cd &quot;%BKUP_PATH%&quot;/%folderpath%
<br />&gt;&gt; script.ftp ECHO binary
<br />&gt;&gt; script.ftp ECHO ls
<br />&gt;&gt; script.ftp ECHO bye
<br />pause
<br />echo running ftp script...
<br />FTP -s:script.ftp -i -A %FTP%
<br />del script.ftp
<br />goto Menu
<br />
<br />I'd like to get the list of folders off the FTP server and make a menu list out of it for users to select what they want to download.  I originally hard coded the menu, but to many folders get added or name changed to keep up with the script.
<br />
<br />Thanks in advance</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2490" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2490">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search5648.html?author_id=5&amp;sr=posts">239</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 18 Feb 2006 19:54</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2490">

						<h3 ><a href="#p2490"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd099-2.html?mode=quote&amp;f=3&amp;p=2490" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic77ce.html?p=2490#p2490" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopic77ce.html?p=2490#p2490" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a></strong> &raquo; </span>03 Dec 2009 23:09
			</p>
			
			
			
			<div class="content">codemonkey,
<br />
<br />This little batch should get you the list of directories and show them as a menu with numbers in front of each directory name.
<br />The user can then chose a number.  The number is resolved to the directory name and shown on the screen.
<br />Not that the ftp script is embedded into the batch script, so no extra ftp file is created.
<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@goto:Smartstart<br />open example.com<br />&#91;user&#93;<br />&#91;pass&#93;<br />cd public_html<br />binary<br />dir<br />bye<br /><br />:Smartstart<br />@echo off<br />Setlocal Enabledelayedexpansion<br />echo.Querying Remote Directories - this may take a while...<br />set list&#91;#&#93;=-1<br />for /f &quot;tokens=8,*&quot; %%A in &#40;'ftp -i -s:&quot;%~f0&quot;^|findstr /b &quot;d&quot;'&#41; do &#40;<br />&nbsp; &nbsp; set /a list&#91;#&#93;+=1<br />&nbsp; &nbsp; set &quot;list&#91;!list&#91;#&#93;!&#93;=%%B&quot;<br />&#41;<br /><br />echo.Listing of Remote Directories<br />for /l %%N in &#40;0,1,!list&#91;#&#93;!&#41; do &#40;<br />&nbsp; &nbsp; echo.&nbsp; %%N&nbsp; !list&#91;%%N&#93;!<br />&#41;<br />set /p &quot;choice=Select a dirctory: &quot;<br />echo.<br />echo.You have chosen: %choice%&nbsp; !list&#91;%choice%&#93;!<br />pause</code></pre></div>
<br />
<br />Hope this helps  <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2494" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2494">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchfa08-2.html?author_id=1048&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Dec 2009 15:40</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2494">

						<h3 ><a href="#p2494"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting7126.html?mode=quote&amp;f=3&amp;p=2494" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic9c75.html?p=2494#p2494" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopic9c75.html?p=2494#p2494" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a></strong> &raquo; </span>04 Dec 2009 09:39
			</p>
			
			
			
			<div class="content">Thanks,
<br />
<br />It seems to connect, but doesn't actually show me the directories.  Will it make a difference if some of the directory names have spaces in them?  I did remove the user and password and added -A on the connection:
<br />
<br />ftp -i -A -s:&quot;%~f0&quot;^|findstr /b &quot;d&quot;
<br />
<br />I change the 'cd' to my folder location.  I do get the connection message, then it says listing directories, but then doesn't show any and goes to the user input.  I'll keep working with it and see if it's on my end.  Thanx a ton, if I can get it to work it's exactly what I need.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2505" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2505">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search5648.html?author_id=5&amp;sr=posts">239</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 18 Feb 2006 19:54</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2505">

						<h3 ><a href="#p2505"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd21d.html?mode=quote&amp;f=3&amp;p=2505" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicd093.html?p=2505#p2505" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopicd093.html?p=2505#p2505" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a></strong> &raquo; </span>06 Dec 2009 01:31
			</p>
			
			
			
			<div class="content">Hey codemonkey,
<br />What does the output of the 'dir' command look like on your box when you connect manually?
<br />Mine looks like this:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ftp&gt; dir<br />200 PORT command successful<br />150 Opening ASCII mode data connection for file list<br />-rwxr-xr-x&nbsp; &nbsp;1 441219&nbsp; &nbsp;15000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan 14&nbsp; 2008 .track<br />drwxr-xr-x&nbsp; &nbsp;2 441219&nbsp; &nbsp;15000&nbsp; &nbsp; &nbsp; &nbsp; 4096 Dec 30&nbsp; 2008 cache<br />drwxr-xr-x&nbsp; &nbsp;4 441219&nbsp; &nbsp;15000&nbsp; &nbsp; &nbsp; &nbsp; 4096 Nov 26&nbsp; 2008 public_ftp<br />drwxr-xr-x&nbsp; 44 441219&nbsp; &nbsp;15000&nbsp; &nbsp; &nbsp; &nbsp; 8192 Nov&nbsp; 5 21:49 public_html<br />-rwxr-xr-x&nbsp; &nbsp;1 441219&nbsp; &nbsp;15000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20 Jan 10&nbsp; 2008 stats_log.gz</code></pre></div>
<br />The findstr /b &quot;d&quot; command ensures only lines that start with the letter &quot;d&quot; are being processed, which on my box means d like directory.  May be this doesn't work for you?</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2509" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2509">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchfa08-2.html?author_id=1048&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Dec 2009 15:40</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2509">

						<h3 ><a href="#p2509"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting03b2.html?mode=quote&amp;f=3&amp;p=2509" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0dff.html?p=2509#p2509" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopic0dff.html?p=2509#p2509" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a></strong> &raquo; </span>07 Dec 2009 09:02
			</p>
			
			
			
			<div class="content">i have to change folder names, but it looks like the following.  my ftp script also does a cd to go down 2 folders, but this is at the root.
<br />
<br />ftp&gt; dir
<br />200 PORT command successful.
<br />150 Opening ASCII mode data connection for /bin/ls.
<br />11-19-09  02:39PM                   73 10.0.200.50.url
<br />12-03-09  06:02PM       &lt;DIR&gt;          Folder1
<br />12-01-09  10:47AM       &lt;DIR&gt;          Folder2
<br />09-14-09  06:25PM       &lt;DIR&gt;          Folder3
<br />226 Transfer complete.
<br />ftp: 2579 bytes received in 0.00Seconds 2579000.00Kbytes/sec.
<br />ftp&gt;</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2510" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2510">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchfa08-2.html?author_id=1048&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Dec 2009 15:40</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2510">

						<h3 ><a href="#p2510"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9a04-2.html?mode=quote&amp;f=3&amp;p=2510" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic6c3c.html?p=2510#p2510" onclick="prompt('Message #6',this.href); return false;">#6</a></span> 
									<a class="unread" href="viewtopic6c3c.html?p=2510#p2510" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a></strong> &raquo; </span>07 Dec 2009 09:10
			</p>
			
			
			
			<div class="content">i tweaked yours a bit and got it to work.  I did the menu display and the list all in 1 loop.  Part of my problem was that folder names can have spaces, so I was using &quot; &quot; around the names, but the For wouldn't work.  Once I put ' ' around the folder name it started to work.  Is there a way to check the number in the list?
<br />
<br />I notice that If i set the LocalRoot and I us ' ' it doesn't end up using it, but I can't get the For to work if I use &quot; &quot;.  Any ideas to use folder path with spaces in it?
<br />
<br />Here's my version of the loop:
<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>For /f &quot;tokens=*&quot; %%i IN &#40;%FilePath%&#41; DO &#40;<br />&nbsp; &nbsp; Echo !count!. %%i<br />&nbsp; &nbsp; set /A count+=1<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; rem add entries to a list<br />&nbsp; &nbsp; set /A list&#91;#&#93;+=1<br />&nbsp; &nbsp; set &quot;list&#91;!list&#91;#&#93;!&#93;=%%i&quot; <br />&#41;<br />set /p &quot;userinp=Type the number to download: &quot;<br />echo.<br />echo.Preparing to download: !list&#91;%userinp%&#93;!</code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2517" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2517">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search5648.html?author_id=5&amp;sr=posts">239</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 18 Feb 2006 19:54</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2517">

						<h3 ><a href="#p2517"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc514.html?mode=quote&amp;f=3&amp;p=2517" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic2dff.html?p=2517#p2517" onclick="prompt('Message #7',this.href); return false;">#7</a></span> 
									<a class="unread" href="viewtopic2dff.html?p=2517#p2517" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a></strong> &raquo; </span>07 Dec 2009 19:39
			</p>
			
			
			
			<div class="content">May be like this?
<br />
<br />FTP output dumped into a text file named ftpoutput.txt:
<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ftp&gt; dir<br />200 PORT command successful.<br />150 Opening ASCII mode data connection for /bin/ls.<br />11-19-09 02:39PM 73 10.0.200.50.url<br />12-03-09 06:02PM &lt;DIR&gt; Folder1 with space<br />12-01-09 10:47AM &lt;DIR&gt; Folder2<br />09-14-09 06:25PM &lt;DIR&gt; Folder3 with space<br />226 Transfer complete.<br />ftp: 2579 bytes received in 0.00Seconds 2579000.00Kbytes/sec.</code></pre></div><br />Batch to extract directory names:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal enabledelayedexpansion<br />set &quot;FilePath=_postproc.txt&quot;<br /><br />set /a count=1<br />For /f &quot;tokens=3,*&quot; %%i IN &#40;'findstr &quot;&lt;DIR&gt;&quot; &quot;%FilePath%&quot;'&#41; DO &#40;<br />&nbsp; &nbsp; Echo !count!. %%j<br />&nbsp; &nbsp; set /A count+=1<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; rem add entries to a list<br />&nbsp; &nbsp; set /A list&#91;#&#93;+=1<br />&nbsp; &nbsp; set &quot;list&#91;!list&#91;#&#93;!&#93;=%%j&quot;<br />&#41;<br />set /p &quot;userinp=Type the number to download: &quot;<br />echo.<br />echo.Preparing to download: !list&#91;%userinp%&#93;!</code></pre></div><br />Batch output:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>1. Folder1 with space<br />2. Folder2<br />3. Folder3 with space<br />Type the number to download: 3<br /><br />Preparing to download: Folder3 with space</code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2522" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2522">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchfa08-2.html?author_id=1048&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Dec 2009 15:40</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2522">

						<h3 ><a href="#p2522"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingfde7.html?mode=quote&amp;f=3&amp;p=2522" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopice897.html?p=2522#p2522" onclick="prompt('Message #8',this.href); return false;">#8</a></span> 
									<a class="unread" href="viewtopice897.html?p=2522#p2522" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a></strong> &raquo; </span>08 Dec 2009 14:27
			</p>
			
			
			
			<div class="content">I'm actually doing: dir -1 dirfile.txt  so I only get the list w/o all the extra stuff.
<br />
<br />The problem is the actual %FilePath% variable.  if it's c:\folder with space\dirfile.txt then it fails to find the file.  I've tried putting &quot;&quot; around it, but still fails to find it.
<br />
<br />I have found a temp solution.  I do an If Exists on the %FilePath% and if it doesn't exist I create it.  Immediately following I do cd %FilePath%.  This causes the dirfile.txt to get created into the same folder so the For loop doesn't need the whole file path.  Not sure if this is the right approach, but seems to be working correctly.
<br />
<br />Thanks again for all the help.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2524" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2524">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search5648.html?author_id=5&amp;sr=posts">239</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 18 Feb 2006 19:54</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2524">

						<h3 ><a href="#p2524"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9bf7.html?mode=quote&amp;f=3&amp;p=2524" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic621e.html?p=2524#p2524" onclick="prompt('Message #9',this.href); return false;">#9</a></span> 
									<a class="unread" href="viewtopic621e.html?p=2524#p2524" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a></strong> &raquo; </span>08 Dec 2009 21:24
			</p>
			
			
			
			<div class="content">Try:
<br />For /f &quot;<strong class="text-strong">usebackq</strong> tokens=*&quot; %%i IN (&quot;%FilePath%&quot;) DO ( ...</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2526" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2526">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchfa08-2.html?author_id=1048&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 02 Dec 2009 15:40</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2526">

						<h3 ><a href="#p2526"></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf746.html?mode=quote&amp;f=3&amp;p=2526" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0894.html?p=2526#p2526" onclick="prompt('Message #10',this.href); return false;">#10</a></span> 
									<a class="unread" href="viewtopic0894.html?p=2526#p2526" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist320d.html?mode=viewprofile&amp;u=1048" class="username">codemonkey</a></strong> &raquo; </span>09 Dec 2009 09:23
			</p>
			
			
			
			<div class="content">that worked, thanks a ton.
<br />
<br />another quick question.
<br />
<br />If the folder I want to copy exists I need to ask the person if they want to overwrite it.  I was trying to do:
<br />
<br />echo Folder Exists, would you Like to Overwrite it (Y/N)? 
<br />choice /c:yn 
<br />
<br />but always get the error: 
<br />'choice' is not recognized as an internal or external command,
<br />operable program or batch file.
<br />
<br />Thanks in advance</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postinga460.html?mode=reply&amp;f=3&amp;t=763" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicba6a.html?f=3&amp;t=763&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=763">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			10 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron68e3.gif?cron_type=cron.task.text_reparser.pm_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=763&p=2490 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:02:09 GMT -->
</html>
