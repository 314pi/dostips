<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5110 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 08:43:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Help with this code to run on multiprocesses - DosTips.com</title>


	<link rel="canonical" href="viewtopicc774.html?t=5110">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopicf46d.html?f=3&amp;t=5110">Help with this code to run on multiprocesses</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="postingb82a.html?mode=reply&amp;f=3&amp;t=5110" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic73d6.html?f=3&amp;t=5110&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="5110" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			28 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopic9f70.html?f=3&amp;t=5110&amp;start=15" role="button">2</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopic9f70.html?f=3&amp;t=5110&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p30082" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30082">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30082">

						<h3 class="first"><a href="#p30082">Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0826.html?mode=quote&amp;f=3&amp;p=30082" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic6482.html?p=30082#p30082" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopic6482.html?p=30082#p30082" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>22 Nov 2013 14:42
			</p>
			
			
			
			<div class="content">Hi,<br /><br />I have a code that need to run on multicore (multiprocess).<br /><br />I do not have much experience with multiprocess on dos batch. Can anyone help me rewrite code?<br /><br />In the meantime, I am following this  <a href="viewtopicfd3b.html?p=29585#p29585" class="postlink">Multi-process Advanced Encryption Standard (AES)</a> thread could be a similar solution.<br /><br />The code as written in play without being checked. It can be seen for educational purposes and it's only one piece of a big project.<br /><br /> In addition I also have another problem. I do not have a multiprocessor computer, so I am looking for someone who can also do the tests.<br /><br />Thank you guys.<br /><br />Einstein1969</div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 24 Nov 2013 12:46, edited 2 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30083" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile30083">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30083">

						<h3 ><a href="#p30083">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf6be.html?mode=quote&amp;f=3&amp;p=30083" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicbdaf.html?p=30083#p30083" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopicbdaf.html?p=30083#p30083" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>22 Nov 2013 15:19
			</p>
			
			
			
			<div class="content">The code:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal EnableDelayedExpansion &amp; if not &quot;%1&quot;==&quot;&quot; goto %1<br /><br />mode con cols=90 lines=31 &amp; rem&nbsp; mode con rate=31 delay=0<br /><br />start &quot;&quot; /B cmd /c &quot;%~f0&quot; input_3D<br /><br />for /F &quot;delims==&quot; %%f in ('set') do if /i not &quot;%%f&quot;==&quot;tmp&quot; set &quot;%%f=&quot;<br /><br />set &quot;P=Û.²±°\-.&quot;<br />set /a n=0, r=-4, s=24, q=1, c=3, d=1<br /><br />set &quot;cod1=))*2)/100) + n*10000/64 )/10000 ^ ((2048000000/(4096-(%%_*128+%%#&quot;<br />set &quot;cod2=))*2)/100)/100)-((2048000000/(4096-(%%_*128+%%#&quot;<br />set &quot;cod3=))) %% 2000000)/10000*(2048000000/(4096-(%%_*128+%%#&quot;<br />set &quot;cod4=))*2)/1000000) )&amp;q)&quot;<br />set &quot;cod5=(( ( ((((15625*(4096-(%%_*128+%%#&quot;<br /><br />for /L %%n in (0,1,10000) do (<br />&nbsp; set t0=!time!<br />&nbsp; type nul&gt;%tmp%\3d.dat.txt<br />&nbsp; For /L %%_ in (!s!,-1,-!r!) do (<br />&nbsp; &nbsp; set B=<br />&nbsp; &nbsp; For /L %%# in (21,4,108) do (<br /><br />&nbsp; &nbsp;set /a &quot;a=10000 + %cod5%%cod3%%cod2%%cod1%%cod4%*1000 + %cod5%+1%cod3%+1%cod2%+1%cod1%+1%cod4%*100 + %cod5%+2%cod3%+2%cod2%+2%cod1%+2%cod4%*10 +%cod5%+3%cod3%+3%cod2%+3%cod1%+3%cod4%&quot;<br /><br />&nbsp; &nbsp;for /f &quot;tokens=1-4&quot; %%i in (&quot;!a:~1,1! !a:~2,1! !a:~3,1! !a:~4,1!&quot;) do set B=!B!!P:~%%~i,1!!P:~%%~j,1!!P:~%%~k,1!!P:~%%~l,1!<br />&nbsp; &nbsp; )<br />&nbsp; &nbsp; echo( !B!&gt;&gt;%tmp%\3d.dat.txt<br />&nbsp; )<br />&nbsp; <br />&nbsp; set t1=!time!<br /><br />&nbsp; call :manage_input<br />&nbsp; if /I &quot;!input_char!&quot;==&quot;q&quot; cls &amp; echo Quitting... &amp; goto :eof<br /><br />&nbsp; cls&amp;type %tmp%\3d.dat.txt<br /><br />&nbsp; for /F &quot;tokens=1-8 delims=:.,&quot; %%a in (&quot;!t0: =0!:!t1: =0!&quot;) do set /a &quot;a=(((1%%e-1%%a)*60)+1%%f-1%%b)*6000+1%%g%%h-1%%c%%d, a+=(a&gt;&gt;31) &amp; 8640000, FPS=1000/a&quot;&amp;echo(!t0!-!t1!=!a! FPS=!FPS:~0,-1!.!FPS:~-1! SPACE for toggle max speed.&amp;set a=&amp;set t1=<br />&nbsp; echo(Use keys: A D W S for direction/move, Z X for pattern, C V for step. Q for quit.<br />&nbsp; echo(DEBUG: %%n Input:!input_char! n:!n! r:!r! s:!s! q:!q! c:!c!<br />&nbsp; if !d! equ 1 call :wait<br />&nbsp; if not defined cod ( for /L %%b in (1,1,5) do (set &quot;cod%%b=&quot;) &amp; set cod=1 )<br />)<br /><br />:manage_input<br />(<br />&nbsp; &nbsp;set lc=!input_char!<br /><br />&nbsp; &nbsp; &nbsp;2&gt;nul (&lt;&quot;%tmp%\in.dat&quot; set /p &quot;input_get=&quot;)<br />&nbsp; &nbsp; &nbsp;2&gt;nul set &quot;input_char=!input_get!&quot;<br /><br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;a&quot; set /a n=n-c<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;d&quot; set /a n=n+c<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;w&quot; if !s! gtr 0 set /a r=r+1,s=s-1&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;s&quot; if !s! lss 26 set /a r=r-1,s=s+1&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;z&quot; if !q! gtr 1 set /a q=q-1&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;x&quot; if !q! lss 6 set /a q=q+1&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;v&quot; if !c! lss 6 set /a c=c+1&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;c&quot; if !c! gtr 1 set /a c=c-1&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot;c&quot; if !c! gtr 1 set /a c=c-1&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br />&nbsp; &nbsp;if /I &quot;!input_char!&quot;==&quot; &quot; set /a d=-d&amp;&gt;&quot;%tmp%\in.dat&quot; echo(!lc!<br /><br />goto :eof<br />)<br /><br />:input_3D<br />&nbsp; &gt;&quot;%tmp%\in.dat&quot; echo(a<br />:input_3D_loop<br />( set &quot;Key=&quot;<br />&nbsp; for /f &quot;delims=&quot; %%A in ('xcopy /w &quot;%~f0&quot; &quot;%~f0&quot; 2^&gt;nul') do if not defined key set &quot;key=%%A&quot;<br />&nbsp; set &quot;key=!key:~-1!&quot;<br />&nbsp; &gt;&quot;%tmp%\in.dat&quot; echo(!key!<br />&nbsp; if /I Not &quot;!key!&quot; == &quot;q&quot; goto :input_3D_loop <br />)<br />goto :eof<br /><br />:wait<br />&nbsp; c:\Windows\System32\PING.EXE 192.0.2.0 -n 1 -w 500 &gt;nul<br />goto :eof<br /></code></pre></div><br /><br />EDIT: Modified code for legibility<br /><br />Einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30089" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30089">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30089">

						<h3 ><a href="#p30089">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting053c.html?mode=quote&amp;f=3&amp;p=30089" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicdd90.html?p=30089#p30089" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopicdd90.html?p=30089#p30089" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>23 Nov 2013 02:01
			</p>
			
			
			
			<div class="content">I want to copy here a part of my first post in the topic you linked:<br /><br /><blockquote><div><cite>Aacini wrote:</cite>Excuse me. If the objective is to generate a more efficient Batch code for this application, I certainly will <em class="text-italics">not</em> do that trying to understand (parts of) your code and then modifying it... I prefer to consult the original specification you used to develop this application and, after review and understand it, propose modifications. <br /></div></blockquote><br />An example of this point is the generation of Galois constants. The original code had problems caused by the large amount of individual SET commands required for this task, so the first attempts to optimize it was oriented to modify the way to execute the numerous SET commands. When I asked Magialisk for the method he used to calculate the constants I expected a reference or a <em class="text-italics">description</em> of the method, but his answer was a link to his code and this note: &quot;the algorithm can be sped up greatly if someone can help me &quot;break&quot; the FOR loop early&quot;, so the next optimization attempts tried to solve this point. Magialisk's answer included this phrase: &quot;Since you were asking how I generated the constants though, you'll find the algorithm I used in that thread so you can re-write it for your own use&quot;. If you review the method I finally used to generate Galois constants you realize that there is no way to extract that method from Magialisk's code. On the other hand, if he would answer me at that moment with his Wikipedia reference on &quot;Peasant's algorithm&quot;, I am pretty sure that the job of understand the method would not been as hard as it was! <img class="smilies" src="images/smilies/icon_evil.gif" alt=":evil:" title="Evil or Very Mad" /> <br /><br />------------------------------------------------------------------------<br /><br />I would like to review a description of this problem in order to evaluate it and see if it is suitable to be solved via a multi-process solution. If it is, and the problem is interesting, I gladly try to propose an appropriate solution. However, at this moment there are multiple questions on this problem: involves it a fast-and-slow processing parts over a file, so it may be solved in a similar way of the previously linked problem? Have it another scheme suitable for a multi-process solution? The only point clear right now is that I will <em class="text-italics">not</em> try to clear these doubts reviewing a Batch program code!<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30095" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile30095">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30095">

						<h3 ><a href="#p30095">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting4023.html?mode=quote&amp;f=3&amp;p=30095" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicccef-2.html?p=30095#p30095" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopicccef-2.html?p=30095#p30095" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>23 Nov 2013 06:10
			</p>
			
			
			
			<div class="content">@Aacini<br /><br />I did not understand what you need.<br /><br />However, the code uses a file even if initially used environment variables with no file!<br /><br />I have developed various implementations and this is the one that seems more powerful on uniprocessor. But I have to redo the tests.<br /><br />If you need a reference from which to start, this is what I found most suitable to explain the path I have followed.<br />Although the link I saw for the first time today!<br /><br /><a href="http://stackoverflow.com/questions/10373151/what-is-the-math-behind-this-ray-like-animation" class="postlink">what-is-the-math-behind-this-ray-like-animation</a><br /><br />Was this what you were looking for?<br /><br />EDIT: I have modified the subject for those who need to know what it is.<br /><br />Einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30099" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30099">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30099">

						<h3 ><a href="#p30099">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting649a.html?mode=quote&amp;f=3&amp;p=30099" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic3f00.html?p=30099#p30099" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopic3f00.html?p=30099#p30099" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>23 Nov 2013 10:29
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>einstein1969 wrote:</cite>@Aacini<br /><br />I did not understand what you need.<br /><br />Einstein1969</div></blockquote><br /><br />Suppose for a moment that you have NOT your Batch code, but you want to solve this problem and ask for help. What do you do? Well, you should state your problem in a clear way: first describe it, then add a couple examples and the expected output. If the problem is complex perhaps you need to add a couple references with additional information. The clearer you describe your problem the better solutions you will get. The major cause of problems in proposed solutions is that the programmer didn't understood the problem, specially in the details. Non-computer literated people frequently think that a programmer <em class="text-italics">must</em> know about all the possible problems that may be solved via a program, but this knowledge is not easy to get <em class="text-italics">even if the programmer review a program that solve the problem already </em>!<br /><br />If you may get help from a Raytracing expert that know a little programming or from an expert programmer that know nothing about raytracing, what do you prefer: teach programming to the former or teach raytracing to the latter?<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30101" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile30101">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30101">

						<h3 ><a href="#p30101">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinga134.html?mode=quote&amp;f=3&amp;p=30101" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic621a.html?p=30101#p30101" onclick="prompt('Message #6',this.href); return false;">#6</a></span> 
									<a class="unread" href="viewtopic621a.html?p=30101#p30101" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>23 Nov 2013 15:23
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Aacini wrote:</cite><blockquote><div><cite>einstein1969 wrote:</cite>@Aacini<br /><br />I did not understand what you need.<br /><br />Einstein1969</div></blockquote><br /><br />Suppose for a moment that you have NOT your Batch code, but you want to solve this problem and ask for help. What do you do? Well, you should state your problem in a clear way: first describe it, then add a couple examples and the expected output. If the problem is complex perhaps you need to add a couple references with additional information. The clearer you describe your problem the better solutions you will get. The major cause of problems in proposed solutions is that the programmer didn't understood the problem, specially in the details. Non-computer literated people frequently think that a programmer <em class="text-italics">must</em> know about all the possible problems that may be solved via a program, but this knowledge is not easy to get <em class="text-italics">even if the programmer review a program that solve the problem already </em>!<br /><br />If you may get help from a Raytracing expert that know a little programming or from an expert programmer that know nothing about raytracing, what do you prefer: teach programming to the former or teach raytracing to the latter?<br /><br />Antonio</div></blockquote><br /><br /><br />Hi Antonio , I still do not understand.<br /><br />I try to make an example closer to you. (I hope it is simple)<br /><br />Suppose we want to draw a screen function and we rotate over time. Using a function that you know.<br /><br />This is the script that I have not tested thoroughly and I have written voluntarily with non-optimized code.<br /><br />How can parallelize this script?<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal EnableDelayedExpansion<br /><br />set /a cols=34, lines=38<br /><br />mode con cols=%cols% lines=%lines% <br /><br />set /a lines-=4, nchar=cols*lines, angle=0<br /><br />set t0=%time%<br /><br />For /L %%. in (1,1,100) do (<br /><br />&nbsp; cls<br /><br />&nbsp; rem rotate two degree at second<br />&nbsp; for /F &quot;tokens=1-8 delims=:.,&quot; %%a in (&quot;!t0: =0!:!time: =0!&quot;) do set /a &quot;a=(((1%%e-1%%a)*60)+1%%f-1%%b)*6000+1%%g%%h-1%%c%%d, a+=(a&gt;&gt;31) &amp; 8640000, angle=(a*20000/100)%%450000&quot;<br /><br />&nbsp; call :INT_SinD_CosD !angle! sin cos<br /><br />&nbsp; set /a &quot;cos=cos/100000, sin=sin/100000&quot; &amp; rem echo t=!a! angle=!angle! sin=!sin! cos=!cos!<br /><br />&nbsp; for /L %%y in (1,1,%lines%) do (<br /><br />&nbsp; &nbsp;for /L %%x in (1,1,%cols%) do (<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;x=(%%x-cols/2)*100/8, y=(%%y-lines/2)*100/8&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;rem rotate x,y <br />&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;x1=x*cos/100-y*sin/100, y=x*sin/100+y*cos/100, x=x1&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a &quot;c1=(x*x/100+y*y/100), c2=c1*c1/100*c1/100*c1/100*c1/100, c3=((x*x/100-y*y/100)*8*x/100*y/100), c4=c3*c3/100, c=(c2-c4)&quot;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;if !c! lss 0 (&lt;nul set /p &quot;=*&quot;) else &lt;nul set /p &quot;=.&quot;<br />&nbsp; &nbsp;)<br />&nbsp; )<br />)<br /><br />goto :eof<br /><br />::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br />:INT_SinD_CosD&nbsp; Angle&nbsp; SinResultVAR&nbsp; CosResultVAR<br />::<br />::&nbsp; &nbsp; &nbsp; -- Return the sine and cosine for the specified angle in 100*micro-degrees.<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ie. 10000 is one degree.<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Call :INT_sinD_CosD Angle sin cos<br />::&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />::&nbsp; &nbsp; &nbsp; -- Angle&nbsp; &nbsp; &#91;in&#93;&nbsp; &nbsp;in 100 micro-Degree is an integer in &#91;-449999,449999&#93;<br />::<br />::&nbsp; &nbsp; &nbsp; -- SinResultVAR&nbsp; &nbsp; &#91;out&#93;&nbsp; &nbsp;var reference to return value of sine &#91;-100000000,100000000&#93;<br />::<br />::&nbsp; &nbsp; &nbsp; -- CosResultVAR&nbsp; &nbsp; &#91;out&#93;&nbsp; &nbsp;var reference to return value of cosine &#91;-100000000,100000000&#93;<br />::<br />::<br />::&nbsp; Version history<br />::<br />:: 0.1&nbsp; &nbsp;16/9/2013&nbsp; &nbsp;<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;First version Beta! Internal 27bit used<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;From Francesco Poscetti aka Einstein1969<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NOTE: This Function allow you to calculate almost all other common<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;trigonometric function. Use the CORDIC modified algorithm.<br />::<br />::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br />SetLocal EnableDelayedExpansion<br /><br />&nbsp; &nbsp;set /a &quot;a=%~1&quot;<br /><br />&nbsp; &nbsp;if %a% lss -449999 echo Not implemented. Exit. &amp; goto :eof<br />&nbsp; &nbsp;if %a% gtr&nbsp; 449999 echo Not implemented. Exit. &amp; goto :eof<br /><br />&nbsp; &nbsp;set /a size=-1<br />&nbsp; &nbsp;For %%a in (450000000 265650512 140362435 71250163 35763344 17899106<br />&nbsp; &nbsp;8951737 4476142 2238105 1119057 559529 279765 139882 69941 34971 17485<br />&nbsp; &nbsp;8743 4371 2186 1093 546 273 137 68 34 17 9 4 2 1) do (set /a &quot;size+=1&quot; &amp; set &quot;at!size!=%%a&quot;)<br /><br />&nbsp; &nbsp;if %a% geq 0 (&nbsp; &nbsp; &nbsp;set /a x=607252935, angle=!a!*10*10*10, angle-=!at0!, y=x<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else set /a x=607252935, angle=!a!*10*10*10, angle+=!at0!, y=-x<br /><br />&nbsp; &nbsp;For /L %%# in (1,1,!size!) do (<br />&nbsp; &nbsp; &nbsp;rem echo &#91;%1&#93; %%# angle:!angle! x:!x! y:!y! at%%#=!at%%#! size:!size!<br />&nbsp; &nbsp; &nbsp;if !angle! lss 0&nbsp; &nbsp; &nbsp; &nbsp; (set /a &quot;angle+=!at%%#!, dx=x/(1&lt;&lt;%%#), x+=y/(1&lt;&lt;%%#), y-=dx&quot;<br />&nbsp; &nbsp; &nbsp;) else if !angle! gtr 0 (set /a &quot;angle-=!at%%#!, dx=x/(1&lt;&lt;%%#), x-=y/(1&lt;&lt;%%#), y+=dx&quot;) <br />&nbsp; &nbsp;)<br /><br />endlocal &amp; set /a %2=(%y%+55)/100, %3=(%x%+55)/100<br />goto :eof<br />::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br /></code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30103" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30103">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistc2fd.html?mode=viewprofile&amp;u=4985" class="username">Magialisk</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search6f26.html?author_id=4985&amp;sr=posts">104</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 25 Jul 2013 19:00</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content30103">

						<h3 ><a href="#p30103">Re: Raytracing-Raycasting multiprocess</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting034b.html?mode=quote&amp;f=3&amp;p=30103" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicc757.html?p=30103#p30103" onclick="prompt('Message #7',this.href); return false;">#7</a></span> 
									<a class="unread" href="viewtopicc757.html?p=30103#p30103" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistc2fd.html?mode=viewprofile&amp;u=4985" class="username">Magialisk</a></strong> &raquo; </span>23 Nov 2013 17:27
			</p>
			
			
			
			<div class="content">einstein perhaps I can help, since I'm the one that got Antonio all spun up in that other thread  <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />Anyone who is going to attempt to help you is going to need to understand your problem.  Example:  What is raytracing?  Do you have a good source of information about what you're doing and why?  What sources did you use to develop the code, or is this all just in your head?  You want to get into multiprocessing, but to do that we'd need to understand how the problem can be broken up into small pieces and parallellized.  AES was easy as every 128 bits is it's own independent problem to be solved quickly and go to the next 128 bits.  Not all problems can even be solved this way.<br /><br />The idea is that for someone who knows what they're doing, it is much more productive, and will give a better result, if they can go understand your problem and design a good solution from scratch.  Looking at the code you wrote, the best they can do is guess at why you would write it that way and make minor improvements.<br /><br />Antonio has been a huge help to me in the other thread, we've bounced many ideas off each other and I've incorporated a few of his improvements into my original code.  He solved the problem his own way from scratch after I explained what I was doing and why.  Seeing his version gave me additional ideas of how to make my own better.  At least from my perspective it's been a great process.<br /><br />I'd be happy to take a look at what you're doing for you if you can post a little more information.  I do basically know what raytracing is, but I dont undersatnd it's application in batch?  Do you intend to draw vectorized graphics or something?</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30111" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile30111">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30111">

						<h3 ><a href="#p30111">Re: Raytracing-Raycasting multiprocess</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb59d.html?mode=quote&amp;f=3&amp;p=30111" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0cea.html?p=30111#p30111" onclick="prompt('Message #8',this.href); return false;">#8</a></span> 
									<a class="unread" href="viewtopic0cea.html?p=30111#p30111" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>24 Nov 2013 14:03
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Magialisk wrote:</cite>einstein perhaps I can help, since I'm the one that got Antonio all spun up in that other thread  <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />Anyone who is going to attempt to help you is going to need to understand your problem.  Example:  What is raytracing?  Do you have a good source of information about what you're doing and why?  What sources did you use to develop the code, or is this all just in your head?  You want to get into multiprocessing, but to do that we'd need to understand how the problem can be broken up into small pieces and parallellized.  AES was easy as every 128 bits is it's own independent problem to be solved quickly and go to the next 128 bits.  Not all problems can even be solved this way.<br /><br />The idea is that for someone who knows what they're doing, it is much more productive, and will give a better result, if they can go understand your problem and design a good solution from scratch.  Looking at the code you wrote, the best they can do is guess at why you would write it that way and make minor improvements.<br /><br />Antonio has been a huge help to me in the other thread, we've bounced many ideas off each other and I've incorporated a few of his improvements into my original code.  He solved the problem his own way from scratch after I explained what I was doing and why.  Seeing his version gave me additional ideas of how to make my own better.  At least from my perspective it's been a great process.<br /><br />I'd be happy to take a look at what you're doing for you if you can post a little more information.  I do basically know what raytracing is, but I dont undersatnd it's application in batch?  Do you intend to draw vectorized graphics or something?</div></blockquote><br /><br />Hi Magialisk,<br /><br />I have posted e simple script that not use raytracing. But have the same form. Animations in batch. (working with files and directories boring ) <a href="viewtopic621a.html?p=30101#p30101" class="postlink">we can start from here</a><br /><br /><blockquote class="uncited"><div>but I dont undersatnd it's application in batch?<br /></div></blockquote><br /><br /><blockquote><div><cite>Magialisk wrote:</cite>Thanks Dave for the kind word. I think I've said too many times already that this was never meant as anything more than a proof of concept, so practicality is a distant secondary concern <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> . This was a somewhat natural conclusion from that &quot;string encoding&quot; thread up through the Vigenere cipher, the Enigma machine and now ultimately AES. I just like to see what can be done in batch, it's fun for me.<br /></div></blockquote><br />Idem...<br />You can see it as a game. But the purpose is to know in depth the operation of the dos batch.<br /><br /><blockquote class="uncited"><div>Example:  What is raytracing?  Do you have a good source of information about what you're doing and why?  What sources did you use to develop the code, or is this all just in your head? </div></blockquote><br />I start like this <a href="http://stackoverflow.com/questions/10373151/what-is-the-math-behind-this-ray-like-animation" class="postlink">what-is-the-math-behind-this-ray-like-animation</a> and have implemented in dos batch for deepen the dos batch.<br /><br />How to parallelized? The expert of batch dos know the limit of dos. And they know the most common solutions with their limitations and possibilities. <br /><br />The algos can be paralelized in many ways. you need to find the most efficient in dos batch.<br /><br />I honestly do not know where to start because I do not know right now. I just created a project (the mini-monitor) that uses multiprocessing and communication between them but I never investigated.<br /><br />Edit: I edited the subject because i have changed a little the problem in &quot;draw a animated equation on screen&quot;<br /><br />This problem has many solutions i things  <img class="smilies" src="images/smilies/icon_confused.gif" alt=":?" title="Confused" />  <br /><br />Einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30112" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30112">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30112">

						<h3 ><a href="#p30112">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0ada.html?mode=quote&amp;f=3&amp;p=30112" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicb157.html?p=30112#p30112" onclick="prompt('Message #9',this.href); return false;">#9</a></span> 
									<a class="unread" href="viewtopicb157.html?p=30112#p30112" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>24 Nov 2013 19:07
			</p>
			
			
			
			<div class="content">Ok, here we go...<br /><br />If you want that your script <em class="text-italics">run on multi-processes</em> you may use the same method explained in my answer to Magialisk's topic and placed below &quot;The Batch code below is an example of this method; it may be used as general format for any application that follows this scheme&quot;; indeed, I used it as a guideline to convert your program. However, in this case there are not <em class="text-italics">input records</em> to process, just output records represented by the lines in the screen. I slightly modified the method so each parallel process run on its own set of screen lines interleaved by the same number of processes, that is, if there are 3 processes the first one generate lines 1, 4, 7, etc. until line 34; the second one the lines 2, 5, 8..33; and 3,6,9..32 for the last one.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal EnableDelayedExpansion<br /><br /><br />rem Multi-process dispatcher:<br />set &quot;param=%~1&quot;<br />if &quot;!param:~0,1!&quot; equ &quot;:&quot; (<br />&nbsp; &nbsp;shift<br />&nbsp; &nbsp;goto !param:~1!<br />)<br /><br />REM set /A N=NUMBER_OF_PROCESSORS-1<br />set N=3<br /><br /><br />set /a cols=34, lines=38<br /><br />mode con cols=%cols% lines=%lines% <br /><br />set /a lines-=4, nchar=cols*lines, angle=0<br /><br /><br />rem Values used in parallel processes<br />set /A linesPerProc=lines/N, missingLines=lines%%N, Nminus1=N-1<br /><br /><br />set t0=%time%<br /><br />For /L %%. in (1,1,100) do (<br /><br />&nbsp; &nbsp;cls<br /><br />&nbsp; &nbsp;rem rotate two degree at second<br />&nbsp; &nbsp;for /F &quot;tokens=1-8 delims=:.,&quot; %%a in (&quot;!t0: =0!:!time: =0!&quot;) do set /a &quot;a=(((1%%e-1%%a)*60)+1%%f-1%%b)*6000+1%%g%%h-1%%c%%d, a+=(a&gt;&gt;31) &amp; 8640000, angle=(a*20000/100)%%450000&quot;<br /><br />&nbsp; &nbsp;call :INT_SinD_CosD !angle! sin cos<br /><br />&nbsp; &nbsp;set /a &quot;cos=cos/100000, sin=sin/100000&quot; &amp; rem echo t=!a! angle=!angle! sin=!sin! cos=!cos!<br /><br />&nbsp; &nbsp;rem Set the initial output turn<br />&nbsp; &nbsp;del processActive.* 2&gt;NUL<br />&nbsp; &nbsp;del outputTurn.* 2&gt;NUL<br />&nbsp; &nbsp;echo X &gt;outputTurn.0<br /><br />&nbsp; &nbsp;rem Start the parallel processes<br />&nbsp; &nbsp;set /A startLine=1, missing=missingLines, carry=1<br />&nbsp; &nbsp;for /L %%p in (0,1,!Nminus1!) do (<br />&nbsp; &nbsp; &nbsp; if !missing! equ 0 set carry=0<br />&nbsp; &nbsp; &nbsp; set /A &quot;endLine=startLine+N*(linesPerProc-1+carry)&quot;<br />&nbsp; &nbsp; &nbsp; echo X &gt; processActive.%%p<br />&nbsp; &nbsp; &nbsp; start &quot;&quot; /B &quot;%~F0&quot; :ShowInterleavedLines %%p !startLine! %N% !endLine!<br />&nbsp; &nbsp; &nbsp; set /A startLine+=1, missing-=1<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;rem Wait for parallel processes to end<br />&nbsp; &nbsp;call :waitForActiveProcesses<br /><br />)<br /><br />goto :eof<br /><br /><br />:waitForActiveProcesses<br />if exist processActive.* goto waitForActiveProcesses<br />exit /B<br /><br /><br />:ShowInterleavedLines turn startLine interleave endLine<br /><br />for /L %%y in (%2,%3,%4) do (<br />&nbsp; &nbsp;set &quot;line=&quot;<br /><br />&nbsp; &nbsp;for /L %%x in (1,1,%cols%) do (<br /><br />&nbsp; &nbsp; &nbsp; set /a &quot;x=(%%x-cols/2)*100/8, y=(%%y-lines/2)*100/8&quot;<br /><br />&nbsp; &nbsp; &nbsp; rem rotate x,y <br />&nbsp; &nbsp; &nbsp; set /a &quot;x1=x*cos/100-y*sin/100, y=x*sin/100+y*cos/100, x=x1&quot;<br />&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; set /a &quot;c1=(x*x/100+y*y/100), c2=c1*c1/100*c1/100*c1/100*c1/100, c3=((x*x/100-y*y/100)*8*x/100*y/100), c4=c3*c3/100, c=(c2-c4)&quot;<br /><br />&nbsp; &nbsp; &nbsp; if !c! lss 0 (set &quot;line=!line!*&quot;) else set &quot;line=!line!.&quot;<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;if not exist outputTurn.%1 call :waitMyTurn %1<br /><br />&nbsp; &nbsp;set /P &quot;=!line!&quot; &lt; nul<br /><br />&nbsp; &nbsp;set /A &quot;nextTurn=(%1+1) %% N&quot;<br />&nbsp; &nbsp;ren outputTurn.%1 outputTurn.!nextTurn!<br /><br />)<br /><br />del processActive.%1<br />exit<br /><br /><br />:waitMyTurn<br />if not exist outputTurn.%1 goto waitMyTurn<br />exit /B<br /><br /><br />::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br />:INT_SinD_CosD&nbsp; Angle&nbsp; SinResultVAR&nbsp; CosResultVAR<br />::<br />::&nbsp; &nbsp; &nbsp; -- Return the sine and cosine for the specified angle in 100*micro-degrees.<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ie. 10000 is one degree.<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Call :INT_sinD_CosD Angle sin cos<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />::&nbsp; &nbsp; &nbsp; -- Angle&nbsp; &nbsp; &#91;in&#93;&nbsp; &nbsp;in 100 micro-Degree is an integer in &#91;-449999,449999&#93;<br />::<br />::&nbsp; &nbsp; &nbsp; -- SinResultVAR&nbsp; &nbsp; &#91;out&#93;&nbsp; &nbsp;var reference to return value of sine &#91;-100000000,100000000&#93;<br />::<br />::&nbsp; &nbsp; &nbsp; -- CosResultVAR&nbsp; &nbsp; &#91;out&#93;&nbsp; &nbsp;var reference to return value of cosine &#91;-100000000,100000000&#93;<br />::<br />::<br />::&nbsp; Version history<br />::<br />:: 0.1&nbsp; &nbsp;16/9/2013&nbsp; &nbsp;<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;First version Beta! Internal 27bit used<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;From Francesco Poscetti aka Einstein1969<br />::<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NOTE: This Function allow you to calculate almost all other common<br />::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;trigonometric function. Use the CORDIC modified algorithm.<br />::<br />::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br />SetLocal EnableDelayedExpansion<br /><br />&nbsp; &nbsp;set /a &quot;a=%~1&quot;<br /><br />&nbsp; &nbsp;if %a% lss -449999 echo Not implemented. Exit. &amp; goto :eof<br />&nbsp; &nbsp;if %a% gtr&nbsp; 449999 echo Not implemented. Exit. &amp; goto :eof<br /><br />&nbsp; &nbsp;set /a size=-1<br />&nbsp; &nbsp;For %%a in (450000000 265650512 140362435 71250163 35763344 17899106<br />&nbsp; &nbsp;8951737 4476142 2238105 1119057 559529 279765 139882 69941 34971 17485<br />&nbsp; &nbsp;8743 4371 2186 1093 546 273 137 68 34 17 9 4 2 1) do (set /a &quot;size+=1&quot; &amp; set &quot;at!size!=%%a&quot;)<br /><br />&nbsp; &nbsp;if %a% geq 0 (&nbsp; &nbsp; &nbsp;set /a x=607252935, angle=!a!*10*10*10, angle-=!at0!, y=x<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else set /a x=607252935, angle=!a!*10*10*10, angle+=!at0!, y=-x<br /><br />&nbsp; &nbsp;For /L %%# in (1,1,!size!) do (<br />&nbsp; &nbsp; &nbsp;rem echo &#91;%1&#93; %%# angle:!angle! x:!x! y:!y! at%%#=!at%%#! size:!size!<br />&nbsp; &nbsp; &nbsp;if !angle! lss 0&nbsp; &nbsp; &nbsp; &nbsp; (set /a &quot;angle+=!at%%#!, dx=x/(1&lt;&lt;%%#), x+=y/(1&lt;&lt;%%#), y-=dx&quot;<br />&nbsp; &nbsp; &nbsp;) else if !angle! gtr 0 (set /a &quot;angle-=!at%%#!, dx=x/(1&lt;&lt;%%#), x-=y/(1&lt;&lt;%%#), y+=dx&quot;) <br />&nbsp; &nbsp;)<br /><br />endlocal &amp; set /a %2=(%y%+55)/100, %3=(%x%+55)/100<br />goto :eof<br />::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br /></code></pre></div><br /><br />On the other hand, if you would want that <em class="text-italics">your script run faster</em>, then there are several modifications that may help to do that. For example, the simple modification required in the multi-process method of store the output characters in a line and then display the line with one SET /P command, instead of show <em class="text-italics">every character</em> via individual SET /P commands, cause that the program run 21% faster. Another simple modification, although it run just 16% faster, allows to display the result of the whole screen in a single operation, so in this case the waiting time between screen frames doesn't matter to much.<br /><br />I am pretty sure that a slightly larger modification in the method to calculate Sin and Cos values will result in additional time gains in the single process mode; of course, this modification may be combined with the multi-process one. However, I was confused by the values that your INT_SinD_CosD routine use.<br /><br /><br /><br />In my previous posts I tried to explain you that having a better knowledge about a problem will conduce to better solutions, and asked you for additional information; however, it seems that you are not interested in such better solutions and just wanted to &quot;parallelize your script&quot;. I have presented my solution here that allows your script to run on multi-processes, as you requested... I would have liked to complete and show you the other modifications that allows to decrease the execution time, but those modifications have absolutely no relation with the multi-process method and I have spent too much time in this matter!<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30119" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile30119">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistc2fd.html?mode=viewprofile&amp;u=4985" class="username">Magialisk</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search6f26.html?author_id=4985&amp;sr=posts">104</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 25 Jul 2013 19:00</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content30119">

						<h3 ><a href="#p30119">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting3481.html?mode=quote&amp;f=3&amp;p=30119" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0aec.html?p=30119#p30119" onclick="prompt('Message #10',this.href); return false;">#10</a></span> 
									<a class="unread" href="viewtopic0aec.html?p=30119#p30119" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistc2fd.html?mode=viewprofile&amp;u=4985" class="username">Magialisk</a></strong> &raquo; </span>25 Nov 2013 01:51
			</p>
			
			
			
			<div class="content">That sweeping ray animation you linked to is pretty neat.  I see now what you're trying to do, and I downloaded and ran both your code and Antonio's.<br /><br />I do agree with Antonio, if you want to parallelize this the right way would be interleaving lines.  If you think of it like a GPU framebuffer, the child processes would add lines to the framebuffer, and once the buffer was full it would dump to the screen as one frame. <br /><br />Just for the heck of it I ran both versions of the code and roughly (via clock and eyeballs) timed the execution.  Antonio's uses about 93% of my quad core and makes about 2.5 frames per second.  einstein's uses about 30% of my CPU and makes about 0.85 fps.  So 3x faster performance and 3x more CPU use, makes sense on the surface...  Maybe I'll get a chance to try it at work tomorrow on the 12-thread to see how it scales.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30125" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30125">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30125">

						<h3 ><a href="#p30125">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcadd.html?mode=quote&amp;f=3&amp;p=30125" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic3a62.html?p=30125#p30125" onclick="prompt('Message #11',this.href); return false;">#11</a></span> 
									<a class="unread" href="viewtopic3a62.html?p=30125#p30125" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>25 Nov 2013 17:44
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Magialisk wrote:</cite>I do agree with Antonio, if you want to parallelize this the right way would be interleaving lines.  If you think of it like a GPU framebuffer, the child processes would add lines to the framebuffer, and once the buffer was full it would dump to the screen as one frame. <br /></div></blockquote><br /><br />Yes, but in the case of multi-process solution the output must be displayed in <em class="text-italics">individual lines</em>, unless that a file be used to store the complete frame and then show it in one operation, but this point will add even more overhead to the method.<br /><br />In the single-process method it is very easy to show complete frames, as shown below. Although this method is slower than the multi-process one, the animation is much more pleasant to see.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal EnableDelayedExpansion<br /><br />set /a cols=34, lines=38<br /><br />mode con cols=%cols% lines=%lines% <br /><br />set /a lines-=4, nchar=cols*lines, angle=0<br /><br />set t0=%time%<br /><br />For /L %%. in (1,1,100) do (<br /><br />&nbsp; &nbsp;set &quot;line=&quot;<br /><br />&nbsp; &nbsp;rem rotate two degree at second<br />&nbsp; &nbsp;for /F &quot;tokens=1-8 delims=:.,&quot; %%a in (&quot;!t0: =0!:!time: =0!&quot;) do set /a &quot;a=(((1%%e-1%%a)*60)+1%%f-1%%b)*6000+1%%g%%h-1%%c%%d, a+=(a&gt;&gt;31) &amp; 8640000, angle=(a*20000/100)%%450000&quot;<br /><br />&nbsp; &nbsp;call :INT_SinD_CosD !angle! sin cos<br /><br />&nbsp; &nbsp;set /a &quot;cos=cos/100000, sin=sin/100000&quot; &amp; rem echo t=!a! angle=!angle! sin=!sin! cos=!cos!<br /><br />&nbsp; &nbsp;for /L %%y in (1,1,%lines%) do (<br /><br />&nbsp; &nbsp; &nbsp; for /L %%x in (1,1,%cols%) do (<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /a &quot;x=(%%x-cols/2)*100/8, y=(%%y-lines/2)*100/8&quot;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rem rotate x,y <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /a &quot;x1=x*cos/100-y*sin/100, y=x*sin/100+y*cos/100, x=x1&quot;<br />&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /a &quot;c1=(x*x/100+y*y/100), c2=c1*c1/100*c1/100*c1/100*c1/100, c3=((x*x/100-y*y/100)*8*x/100*y/100), c4=c3*c3/100, c=(c2-c4)&quot;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if !c! lss 0 (set &quot;line=!line!*&quot;) else set &quot;line=!line!.&quot;<br />&nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;cls<br /><br />&nbsp; &nbsp;set /P &quot;=!line!&quot; &lt; nul<br /><br />)<br /><br />goto :EOF<br /></code></pre></div><br /><br />Antonio</div>

			
													<div class="notice">
					Last edited by <a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a> on 25 Nov 2013 21:30, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30127" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile30127">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchf147.html?author_id=3221&amp;sr=posts">6033</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 10 Feb 2012 02:20</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content30127">

						<h3 ><a href="#p30127">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting229d-2.html?mode=quote&amp;f=3&amp;p=30127" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic8f73-2.html?p=30127#p30127" onclick="prompt('Message #12',this.href); return false;">#12</a></span> 
									<a class="unread" href="viewtopic8f73-2.html?p=30127#p30127" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a></strong> &raquo; </span>25 Nov 2013 21:01
			</p>
			
			
			
			<div class="content">Antonio, I haven't been following the thread closely but decided to try what you've posted.  Is it missing a label or a routine?</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30128" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30128">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content30128">

						<h3 ><a href="#p30128">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinga8e7.html?mode=quote&amp;f=3&amp;p=30128" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic5cba.html?p=30128#p30128" onclick="prompt('Message #13',this.href); return false;">#13</a></span> 
									<a class="unread" href="viewtopic5cba.html?p=30128#p30128" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>25 Nov 2013 21:31
			</p>
			
			
			
			<div class="content">Yes, this routine:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br />:INT_SinD_CosD&nbsp; Angle&nbsp; SinResultVAR&nbsp; CosResultVAR<br />::<br /></code></pre></div><br />Copy it from anyone of previous posts.<br /><br />Note that in original post I missed a goto :EOF (fixed...)</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30129" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile30129">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchf147.html?author_id=3221&amp;sr=posts">6033</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 10 Feb 2012 02:20</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content30129">

						<h3 ><a href="#p30129">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0e2d.html?mode=quote&amp;f=3&amp;p=30129" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic091b.html?p=30129#p30129" onclick="prompt('Message #14',this.href); return false;">#14</a></span> 
									<a class="unread" href="viewtopic091b.html?p=30129#p30129" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist5b5d.html?mode=viewprofile&amp;u=3221" style="color: #00AA00;" class="username-coloured">foxidrive</a></strong> &raquo; </span>25 Nov 2013 21:59
			</p>
			
			
			
			<div class="content">It works well, and is interesting to see in batch.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p30130" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile30130">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistc2fd.html?mode=viewprofile&amp;u=4985" class="username">Magialisk</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search6f26.html?author_id=4985&amp;sr=posts">104</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 25 Jul 2013 19:00</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content30130">

						<h3 ><a href="#p30130">Re: Help with this code to run on multiprocesses</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting60d1.html?mode=quote&amp;f=3&amp;p=30130" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicc05f.html?p=30130#p30130" onclick="prompt('Message #15',this.href); return false;">#15</a></span> 
									<a class="unread" href="viewtopicc05f.html?p=30130#p30130" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistc2fd.html?mode=viewprofile&amp;u=4985" class="username">Magialisk</a></strong> &raquo; </span>25 Nov 2013 23:52
			</p>
			
			
			
			<div class="content">Antonio, maybe it's just personal preference but I much prefer your second version that does the &quot;framebuffer&quot; display technique instead of the original line by line output version.<br /><br />Granted the line by line version runs faster overall, but the image it produces is not as appealing (to me).  When I mentioned the framebuffer in my original post I too thought first of using a file as an intermediate storage, which as you say would be slow, so I didn't explicitly suggest that.  Then I had a really crazy idea but I didn't elaborate on that either...<br /><br />What if you used an array structure and made multiple processes to fill in the values.  This could use the line-by-line method, building up the &quot;Screen&quot; framebuffer a line at a time like I alluded to in my post.  The tricky part would be returning each line of values over the boundary when each child process returns?  Anyway, if you could indicate when the framebuffer was full (every 38th line?) you would then display it, combining the best of both approaches without needing a slow intermediate file? <br /><br />I don't have the time to try this out myself right now, but maybe off the top of your head you know of an intrinsic flaw to that approach?  Where do you find the time to take on everyone else's pet projects anyway?  <img class="smilies" src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingb82a.html?mode=reply&amp;f=3&amp;t=5110" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic73d6.html?f=3&amp;t=5110&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=5110">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			28 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopic9f70.html?f=3&amp;t=5110&amp;start=15" role="button">2</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopic9f70.html?f=3&amp;t=5110&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron5089.gif?cron_type=cron.task.text_reparser.post_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=5110 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 08:44:06 GMT -->
</html>
