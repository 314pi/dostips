<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=227&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:05:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; [solved] Hide keyboard input in a batch</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>[solved] Hide keyboard input in a batch</h2>
		<p><a href="viewtopic53ba.html?f=3&amp;t=227">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=227</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>[solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>24 Feb 2008 12:30</strong></div>
				<div class="author">by <strong>mar_male</strong></div>
				<div class="content">Hello,
<br />I have to write a small script which is checking password and running some program. In a script below I have something like this but during executing this batch file everybody can see this password. Is there a possible simply way to make it invisible during enetrig.
<br />Thanks for help
<br />
<br />@echo off &amp; setlocal enableextensions
<br />set /P Password=”Enter password:”
<br />if not %Password% == tor goto :END
<br />start cmd.exe
<br />exit
<br />:END
<br />exit
<br />
<br />Regards Maro</div>
			</div>
			<hr />
					<div class="post">
				<h3></h3>
				<div class="date">Posted: <strong>24 Feb 2008 20:15</strong></div>
				<div class="author">by <strong>DosItHelp</strong></div>
				<div class="content">mar_male,
<br />
<br />The best solution dostips came up with so far is to invoke SET /P in a separate command window that uses the difficult to distinguish colors <strong class="text-strong">Light Green</strong> and <strong class="text-strong">Light Aqua</strong> for foreground and background.
<br />The password dialog is implemented as <strong class="text-strong">:pwd</strong> dos function that can easily be called.
<br />Here is a batch expample how to use it:
<br />
<br /><blockquote class="uncited"><div>@ECHO OFF<br />call:pwd pass<br />if &quot;%pass%&quot;==&quot;dostips&quot; (<br />    echo.password accepted<br />) else (<br />    echo.password denied<br />)<br />GOTO:EOF<br /><br />insert the :pwd function here<br /><a href="../DtCodeCmdLib.html#pwd" class="postlink">http://www.dostips.com/DtCodeCmdLib.php#pwd</a><br /></div></blockquote>
<br />DOS IT HELP?  <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>
			</div>
			<hr />
					<div class="post">
				<h3></h3>
				<div class="date">Posted: <strong>25 Feb 2008 01:18</strong></div>
				<div class="author">by <strong>mar_male</strong></div>
				<div class="content"><blockquote><div><cite>DosItHelp wrote:</cite>mar_male,<br /><br />The best solution dostips came up with so far is to invoke SET /P in a separate command window that uses the difficult to distinguish colors ..</div></blockquote>
<br />
<br />Thanks for fast reply.
<br />Can You write me what is a code color for the background to be the same color as the passwords
<br />
<br />I think i have to change &quot;AB&quot; value it into this line :
<br />col set &quot;col=AB&quot;</div>
			</div>
			<hr />
					<div class="post">
				<h3></h3>
				<div class="date">Posted: <strong>25 Feb 2008 23:20</strong></div>
				<div class="author">by <strong>DosItHelp</strong></div>
				<div class="content">mar_male,
<br />Unfortunately the color command doesn't accept foreground and background color to be the same.  Light Green on Light Aqua is the closest I could find.  Try another color if you like:
<br /><blockquote class="uncited"><div>C:\&gt;color /?<br />Sets the default console foreground and background colors.<br /><br />COLOR [attr]<br /><br />  attr        Specifies color attribute of console output<br /><br />Color attributes are specified by TWO hex digits -- the first<br />corresponds to the background; the second the foreground.  Each digit<br />can be any of the following values:<br /><br /><ul>0 = Black<br />1 = Blue<br />2 = Green<br />3 = Aqua<br />4 = Red<br />5 = Purple<br />6 = Yellow<br />7 = White<br />8 = Gray<br />9 = Light Blue<br />A = Light Green<br />B = Light Aqua<br />C = Light Red<br />D = Light Purple<br />E = Light Yellow<br />F = Bright White</ul>...</div></blockquote>Possible combinations are:<img src="../DosColors.png" class="postimage" alt="Image" />
<br />
<br /> <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
					<div class="post">
				<h3></h3>
				<div class="date">Posted: <strong>26 Feb 2008 06:39</strong></div>
				<div class="author">by <strong>mar_male</strong></div>
				<div class="content">Thanks for replay,
<br />I found EF color. I think this will the best for me.
<br />
<br />Regards 
<br />
<br />Maro</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>24 Sep 2011 10:51</strong></div>
				<div class="author">by <strong>geomar</strong></div>
				<div class="content">the best way to do it is:<br /><br />1 )open cmd<br />2 )click on the uper left corner<br />3 )click properties<br />4 )check the box &quot;screen text&quot;<br />5 )you should see various boxes of colors.Click the second wich is dark blue.<br />6 )on the right you should see a box that says &quot;select color values&quot;.Change Red to 0 Green to 0 and Blue to 2<br />7 )then click ok<br />8 )write in cmd COLOR 01<br /><br /> you are done</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>24 Sep 2011 12:28</strong></div>
				<div class="author">by <strong>nitt</strong></div>
				<div class="content">Okay, I made like a hidetext command in C++ in like hive seconds. All it does is set the background and foreground color to black on the current line and one. <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />echol &quot;Enter your password: &quot;<br />hidetext /r<br />set /p password=<br />hidetext /s<br />echo You typed in %password%!<br />pause</code></pre></div><br /><br />hidetext /r is &quot;regular&quot;, and that changes the foreground and background of the current line to black. &quot;hidetext /s&quot; is &quot;show&quot;, and it jut sets the foreground and background to the default, 07. <br /><br />I also made &quot;echol&quot; in like 5 seconds. That just echos a string without skipping a line.<br /><br /><a href="http://dl.dropbox.com/u/10434417/releases/hidetext.exe" class="postlink">http://dl.dropbox.com/u/10434417/releases/hidetext.exe</a><br /><a href="http://dl.dropbox.com/u/10434417/releases/echol.exe" class="postlink">http://dl.dropbox.com/u/10434417/releases/echol.exe</a><br /><br /><img src="../../dl.dropbox.com/u/10434417/images/eg.html" class="postimage" alt="Image" /></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>25 Sep 2011 04:37</strong></div>
				<div class="author">by <strong>Batcher</strong></div>
				<div class="content"><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />set RealPwd=Batcher<br />&gt;&quot;%temp%\in.com&quot; echo hP1X500P&#91;PZBBBfh#b##fXf-V@`$fPf&#93;f3/f1/5++u5x<br />set /p InputPwd=Enter password: &lt;nul<br />for /f &quot;tokens=*&quot; %%a in ('&quot;%temp%\in.com&quot;') do (<br />&nbsp; &nbsp; set &quot;InputPwd=%%a&quot;<br />)<br />if &quot;%InputPwd%&quot; equ &quot;%RealPwd%&quot; (<br />&nbsp; &nbsp; echo Correct password.<br />) else (<br />&nbsp; &nbsp; echo Incorrect password.<br />)<br />pause</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>25 Sep 2011 23:44</strong></div>
				<div class="author">by <strong>DosItHelp</strong></div>
				<div class="content">Batcher,<br />your solution doesn't seem to work for Win7 64bit.  I get this error:<br /><blockquote class="uncited"><div>---------------------------<br />Unsupported 16-Bit Application<br />---------------------------<br />The program or feature &quot;\??\C:\Users\Peter\AppData\Local\Temp\in.com&quot; cannot start or run due to incompatibity with 64-bit versions of Windows. Please contact the software vendor to ask if a 64-bit Windows compatible version is available.<br />---------------------------<br />OK   <br />---------------------------<br /></div></blockquote></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>26 Sep 2011 09:01</strong></div>
				<div class="author">by <strong>Voodooman</strong></div>
				<div class="content">Sure it would not, 64bit version of Windows have NTVDM emulator removed, and this means no COM files support, as well as any 16bit windows executables.<br /><br />However this could be bypassed using dosbox to launch 16 bit application, but it would be tricky, since dosbox isnt native system application like ntvdm, and have some sort of isolated sandbox to run any application inside, also dosbox doesnt run in CMD.exe and have its own console window, so im not sure if there is any way to hide it and just get 16 bit app make sdtout.<br /><br />I wonder, is there any way to write and execture 32 or 64 bit com files with pure opcode without all that Win PE container trash?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>26 Sep 2011 16:00</strong></div>
				<div class="author">by <strong>nitt</strong></div>
				<div class="content"><blockquote><div><cite>Voodooman wrote:</cite>Sure it would not, 64bit version of Windows have NTVDM emulator removed, and this means no COM files support, as well as any 16bit windows executables.<br /><br />However this could be bypassed using dosbox to launch 16 bit application, but it would be tricky, since dosbox isnt native system application like ntvdm, and have some sort of isolated sandbox to run any application inside, also dosbox doesnt run in CMD.exe and have its own console window, so im not sure if there is any way to hide it and just get 16 bit app make sdtout.<br /><br />I wonder, is there any way to write and execture 32 or 64 bit com files with pure opcode without all that Win PE container trash?</div></blockquote><br /><br />They didn't just <em class="text-italics">remove</em> it. &gt;.&gt;<br />64bit operating systems <em class="text-italics">can't even run</em> 16bit applications. That's why they removed tools like DEBUG, because they're 16bit. <br /><br />This is not a Windows thing. Look at Ubuntu 32bit VS Ubuntu 64bit. Ubuntu used to have their own DEBUG command, but it was removed because their 64bit operating system could't run it. I also don't think this could be done with DOSBOX, but I'm not 100% sure.<br /><br />I made my method in like a few seconds because it works for all Windows (who on DosTips wouldn't be using Windows?) operating systems.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>09 Apr 2014 06:36</strong></div>
				<div class="author">by <strong>Matt Williamson</strong></div>
				<div class="content">I thought I'd update this post. A new way has been discovered to mask a password that is pure batch. <br /><br />Code by MC ND on StackOverflow<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />&nbsp; &nbsp; setlocal enableextensions disabledelayedexpansion<br /><br />rem Call the subroutine to get the password&nbsp; &nbsp; <br />&nbsp; &nbsp; call :getPassword password <br /><br />rem Echo what the function returns<br />&nbsp; &nbsp; if defined password (<br />&nbsp; &nbsp; &nbsp; &nbsp; echo You have typed &#91;%password%&#93;<br />&nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; echo You have typed nothing<br />&nbsp; &nbsp; )<br /><br />rem End of the process&nbsp; &nbsp; <br />&nbsp; &nbsp; endlocal<br />&nbsp; &nbsp; exit /b<br /><br /><br />rem Subroutine to get the password<br />:getPassword returnVar<br />&nbsp; &nbsp; setlocal enableextensions disabledelayedexpansion<br />&nbsp; &nbsp; set &quot;_password=&quot;<br /><br />&nbsp; &nbsp; rem We need a backspace to handle character removal<br />&nbsp; &nbsp; for /f %%a in ('&quot;prompt;$H&amp;for %%b in (0) do rem&quot;') do set &quot;BS=%%a&quot;<br /><br />&nbsp; &nbsp; rem Prompt the user <br />&nbsp; &nbsp; set /p &quot;=password ?:&quot; &lt;nul <br /><br />:keyLoop<br />&nbsp; &nbsp; rem retrieve a keypress<br />&nbsp; &nbsp; set &quot;key=&quot;<br />&nbsp; &nbsp; for /f &quot;delims=&quot; %%a in ('xcopy /l /w &quot;%~f0&quot; &quot;%~f0&quot; 2^&gt;nul') do if not defined key set &quot;key=%%a&quot;<br />&nbsp; &nbsp; set &quot;key=%key:~-1%&quot;<br /><br />&nbsp; &nbsp; rem handle the keypress <br />&nbsp; &nbsp; rem&nbsp; &nbsp; &nbsp;if No keypress (enter), then exit<br />&nbsp; &nbsp; rem&nbsp; &nbsp; &nbsp;if backspace, remove character from password and console<br />&nbsp; &nbsp; rem&nbsp; &nbsp; &nbsp;else add character to password and go ask for next one<br />&nbsp; &nbsp; if defined key (<br />&nbsp; &nbsp; &nbsp; &nbsp; if &quot;%key%&quot;==&quot;%BS%&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if defined _password (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;_password=%_password:~0,-1%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setlocal enabledelayedexpansion &amp; set /p &quot;=!BS! !BS!&quot;&lt;nul &amp; endlocal<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;_password=%_password%%key%&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /p &quot;=*&quot;&lt;nul<br />&nbsp; &nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; &nbsp; goto :keyLoop<br />&nbsp; &nbsp; )<br />&nbsp; &nbsp; echo(<br />&nbsp; &nbsp; rem return password to caller<br />&nbsp; &nbsp; if defined _password ( set &quot;exitCode=0&quot; ) else ( set &quot;exitCode=1&quot; )<br />&nbsp; &nbsp; endlocal &amp; set &quot;%~1=%_password%&quot; &amp; exit /b %exitCode%</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>09 Apr 2014 08:32</strong></div>
				<div class="author">by <strong>foxidrive</strong></div>
				<div class="content">That's useful - it may be modeled on this one which I had filed away.<br /><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>::!CARLOS_HIDE_INPUT.BAT<br />::Code by Carlos on AMBNT 2013-03-10<br />::Subject: Getkey without Display the input.<br />::Thread started by jeb<br />::Note: My edits/additions are not indented 3 spaces<br /><br /><br />&nbsp; &nbsp;:::::::::::::BEGIN OF CODE:::::::::::::&nbsp; &nbsp;<br />&nbsp; &nbsp;@Echo Off&nbsp; &nbsp;<br />&nbsp; &nbsp;:HInput<br />&nbsp; &nbsp;::Version 3.0&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;SetLocal DisableDelayedExpansion<br />Echo Enter your password below:<br />&nbsp; &nbsp;Set &quot;Line=&quot;<br />&nbsp; &nbsp;Rem Save 0x08 character in BS variable<br />&nbsp; &nbsp;For /F %%# In (<br />&nbsp; &nbsp;'&quot;Prompt;$H&amp;For %%# in (1) Do Rem&quot;'<br />&nbsp; &nbsp;) Do Set &quot;BS=%%#&quot;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;:HILoop<br />&nbsp; &nbsp;Set &quot;Key=&quot;<br />&nbsp; &nbsp;For /F &quot;delims=&quot; %%# In (<br />&nbsp; &nbsp;'Xcopy /L /W &quot;%~f0&quot; &quot;%~f0&quot; 2^&gt;Nul'<br />&nbsp; &nbsp;) Do If Not Defined Key Set &quot;Key=%%#&quot;<br />&nbsp; &nbsp;Set &quot;Key=%Key:~-1%&quot;<br />&nbsp; &nbsp;SetLocal EnableDelayedExpansion<br />&nbsp; &nbsp;If Not Defined Key Goto :HIEnd<br />&nbsp; &nbsp;If %BS%==^%Key% (Set /P &quot;=%BS% %BS%&quot; &lt;Nul<br />&nbsp; &nbsp;Set &quot;Key=&quot;<br />&nbsp; &nbsp;If Defined Line Set &quot;Line=!Line:~0,-1!&quot;<br />&nbsp; &nbsp;) Else Set /P &quot;=*&quot; &lt;Nul<br />&nbsp; &nbsp;If Not Defined Line (EndLocal &amp;Set &quot;Line=%Key%&quot;<br />&nbsp; &nbsp;) Else For /F delims^=^ eol^= %%# In (<br />&nbsp; &nbsp;&quot;!Line!&quot;) Do EndLocal &amp;Set &quot;Line=%%#%Key%&quot;<br />&nbsp; &nbsp;Goto :HILoop<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;:HIEnd<br />&nbsp; &nbsp;Echo(<br />Echo Your password is '!Line!'<br />&nbsp; &nbsp;Pause<br />&nbsp; &nbsp;Goto :Eof<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;::::::::::::::END OF CODE::::::::::::::</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: [solved] Hide keyboard input in a batch</h3>
				<div class="date">Posted: <strong>09 Apr 2014 09:23</strong></div>
				<div class="author">by <strong>Squashman</strong></div>
				<div class="content">Here is the other recent thread.<br /><!-- l --><a class="postlink-local" href="viewtopic28c5.html?f=3&amp;t=4664">viewtopic.php?f=3&amp;t=4664</a><!-- l --></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=227&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:05:07 GMT -->
</html>
