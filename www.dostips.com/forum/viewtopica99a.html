<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8501&p=56415 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:59:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Parallax background, and overlapping images properly - DosTips.com</title>


	<link rel="canonical" href="viewtopic5553.html?t=8501">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic4d13.html?f=3&amp;t=8501">Parallax background, and overlapping images properly</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="posting762c-2.html?mode=reply&amp;f=3&amp;t=8501" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic1fa5.html?f=3&amp;t=8501&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="8501" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			12 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p56360" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile56360">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search393f.php?author_id=8073&amp;sr=posts">92</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 17 Jan 2016 23:55</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content56360">

						<h3 class="first"><a href="#p56360">Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingabdf-2.html?mode=quote&amp;f=3&amp;p=56360" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic76d7-2.html?p=56360#p56360" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopic76d7-2.html?p=56360#p56360" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a></strong> &raquo; </span>15 Apr 2018 00:25
			</p>
			
			
			
			<div class="content">Hello everyone!<br>
<br>
I've been working on a parallax background where I take 3 VT100 images, overlap them properly(this is the problem), and display so where each image is basically "further" than the prior. (picture below)<br>
<br>
<img src="../../i.gyazo.com/445e52478fd33f57b5f76d3021912cbf.png" class="postimage" alt="Image"><br>
<br>
But overlapping isn't as easy as plotting on top of the last image, there are objects, but then also a background of BLACK that needs to be ignored, and showing the image behind it. Much like the gif shows below.<br>
<br>
<img src="../../i.gyazo.com/d5bbe6295acc1a71d490468c7d2dc063.gif" class="postimage" alt="Image"><br>
<br>
Please forgive me, for I'm unsure how to properly word my questioning.<br>
<br>
Let's say I have this image below in an array called %template[LINES]% and this is the image below when directed to STDOUT.<br>
<img src="../../i.gyazo.com/70f777e0661d02bb287f5308723c3f1e.png" class="postimage" alt="Image"><br>
<br>
But the problem is the background is black, but it cannot be. It needs to be the blue sky and clouds (whichever position they are in, since they will be a scrolling background)<br>
<br>
<img src="../../i.gyazo.com/e5f983ded4240f2c807b96890708c1be.png" class="postimage" alt="Image"><br>
<br>
Are there any methods, ideas, names for this concept? I need the education on this subject for my own enthusiasm!<br>
<br>
Thank you very much for your time.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56361" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile56361">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content56361">

						<h3 ><a href="#p56361">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting16a9.html?mode=quote&amp;f=3&amp;p=56361" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopiccaf9.html?p=56361#p56361" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopiccaf9.html?p=56361#p56361" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>15 Apr 2018 03:31
			</p>
			
			
			
			<div class="content">The best way to achieve this heavily depends on the algorithm you are using to draw your images.<br>
<br>
Usually you are using "alpha blending" (each pixel stores an alpha value between 0 (transparent) to !0 (opaue)) to overlap images correctly.<br>
When using two opacity levels (transparent, opaque) only, you might better want to use "image masks" (overlapping is stored in another image); especially when you easily could compute it from your image.<br>
Another option is to simply not draw black when plotting the image; if you are using VT100 escape sequences you could set the cursor instead to jump over black foreground.<br>
<br>
<br>
penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56363" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile56363">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search661c.html?author_id=1265&amp;sr=posts">3386</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 22 Jan 2010 18:01</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content56363">

						<h3 ><a href="#p56363">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc829.html?mode=quote&amp;f=3&amp;p=56363" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicf7f0.html?p=56363#p56363" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopicf7f0.html?p=56363#p56363" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a></strong> &raquo; </span>15 Apr 2018 03:57
			</p>
			
			
			
			<div class="content">The important thing to understand is that your screen isn't layered. That means things like background and foreground is something that your brain makes of the 2D picture on the screen. I think calculating transparent images is too much for batch. But you have to begin with the background. Then you need to replace the background pixels by the pixels that you want to have in the foreground. And if you have something that is even more in the foreground then you have to replace the pixels of the formerly calculated picture. I think to achieve this something like the alpha channel that penpen mentioned should be helpful because you have to mark the pixels that have to replace the background pixels while other pixels (e.g. your black pixels in your foreground) need to be ignored. Certainly thats a lot of efforts and makes it very slow if you do everything in batch.<br>
I have to admit that I'm not a gamer and I still believe that trying to make a console window a GUI is a waste of time. But certainly it's a good exercise ...<br>
<br>
Steffen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56387" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile56387">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search393f.php?author_id=8073&amp;sr=posts">92</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 17 Jan 2016 23:55</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content56387">

						<h3 ><a href="#p56387">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6325.html?mode=quote&amp;f=3&amp;p=56387" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic61ce.html?p=56387#p56387" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopic61ce.html?p=56387#p56387" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a></strong> &raquo; </span>15 Apr 2018 18:30
			</p>
			
			
			
			<div class="content">The only thing I can think of is to draw the closest image first, instead of last.<br>
<br>
This is because if we draw it first, we can then say "within this area, if the pixel is NOT already colored, place this new pixel for this new image here, otherwise, check the next pixel"<br>
<br>
Surely this method is slow, considering it needs to check every single pixel. VT100 has surprised me numerous times, however, so I remain hopeful!</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56389" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile56389">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search661c.html?author_id=1265&amp;sr=posts">3386</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 22 Jan 2010 18:01</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content56389">

						<h3 ><a href="#p56389">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf630-2.html?mode=quote&amp;f=3&amp;p=56389" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicfa7d.html?p=56389#p56389" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopicfa7d.html?p=56389#p56389" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf667.html?mode=viewprofile&amp;u=1265" style="color: #00AA00;" class="username-coloured">aGerman</a></strong> &raquo; </span>16 Apr 2018 03:57
			</p>
			
			
			
			<div class="content">No you don't draw anything before you calculated the whole image in memory. If you draw the foreground only (that may move as shown in your example), how would you update the missing background? I'm afraid that's even more of calculation but I might be wrong.<br>
<br>
Steffen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56396" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile56396">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searcha86d.html?author_id=2258&amp;sr=posts">2152</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 12 Feb 2011 21:02</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> United States (east coast)</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content56396">

						<h3 ><a href="#p56396">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2f0b.html?mode=quote&amp;f=3&amp;p=56396" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic00dc.html?p=56396#p56396" onclick="prompt('Message #6',this.href); return false;">#6</a></span> 
									<a class="unread" href="viewtopic00dc.html?p=56396#p56396" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a></strong> &raquo; </span>16 Apr 2018 07:14
			</p>
			
			
			
			<div class="content">I believe there is only one possibility for producing an effective pure batch scrolling game - Every single frame (screen) of the static parallax background must be precomputed and stored, one frame per file. So for any background scroll position BG(x,y), there would be a file containing the escape sequences to generate the precomputed background image. For performance purposes, the masking should already have been computed so that each background "pixel" is represented only once. Obviously this design will result in a huge number of files.<br>
<br>
The dynamic foreground images must then be superimposed on top of each static background frame. For each refresh cycle, you would need to compute your BG(x,y) position, retrieve the appropriate background file, and then superimpose your computed foreground images. I see two possible ways to do this.<br>
<br>
1) The simplest method would be to simply TYPE the background image, and then use escape sequences to draw each foreground sprite in the correct screen position S(x,y). This would be the fastest option because it requires the least string manipulation, and it minimizes the number of bytes in the background image (less info to write to the console). But this would cause significant flicker with the foreground sprites. I'm guessing the flicker would be too much for my taste. I think it would severely limit my enjoyment of the game. But I can see how the frame rate might be pretty good.<br>
<br>
2) The other option is to use the approach I used in my <a href="viewtopic6508.html?f=3&amp;t=8466#p56237" class="postlink">latest version of BALLS.BAT</a>. Each final frame to be displayed would consist of a series of strings, one string per horizontal line. Each pixel within a  line would need to have a constant width that contains color and character information, so that you can effectively replace the static background pixels with the dynamic foreground pixels. The number of horizontal lines per frame is a constant, so you can use a FOR /L loop coupled with SET /P to read each line of the background into an array of variables that can then be manipulated to insert the foreground.  Once the entire frame has been built, it would then be written to the console, and there would be no flicker.<br>
<br>
As much as possible, the static foreground scaffold that the dynamic sprites interact with could be included somehow in each background file, but I have no idea what that data structure would look like.<br>
<br>
The absence of flicker would be great, but the amount of string manipulation required would slow things down considerably. And having color escape sequences (perhaps both foreground and background) for every single pixel will dramatically increase the amount of info to be written to the console, which also will slow things down. I'm guessing that the frame rate will be pretty poor, perhaps to the point that the game is not enjoyable.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56397" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile56397">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search393f.php?author_id=8073&amp;sr=posts">92</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 17 Jan 2016 23:55</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content56397">

						<h3 ><a href="#p56397">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinga0ad.html?mode=quote&amp;f=3&amp;p=56397" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopiccc77.html?p=56397#p56397" onclick="prompt('Message #7',this.href); return false;">#7</a></span> 
									<a class="unread" href="viewtopiccc77.html?p=56397#p56397" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a></strong> &raquo; </span>16 Apr 2018 07:51
			</p>
			
			
			
			<div class="content">I really appreciate all of the feedback!<br>
<br>
I was afraid the performance would turn out to be too poor to enjoy, but I just couldn't help but at least see what I can do. Perhaps I'll just backburner this idea for a while. <img class="smilies" src="images/smilies/icon_redface.gif" width="15" height="15" alt=":oops:" title="Embarassed"></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56402" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile56402">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search73f1.html?author_id=417&amp;sr=posts">880</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 30 Aug 2007 08:05</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany, Bochum</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content56402">

						<h3 ><a href="#p56402">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9da4-2.html?mode=quote&amp;f=3&amp;p=56402" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopice898.html?p=56402#p56402" onclick="prompt('Message #8',this.href); return false;">#8</a></span> 
									<a class="unread" href="viewtopice898.html?p=56402#p56402" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a></strong> &raquo; </span>16 Apr 2018 09:50
			</p>
			
			
			
			<div class="content">Hi Icarus,<br>
<br>
do you can put your ppm files somewhere, so we can play with them?</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56404" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile56404">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search393f.php?author_id=8073&amp;sr=posts">92</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 17 Jan 2016 23:55</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content56404">

						<h3 ><a href="#p56404">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd30c.html?mode=quote&amp;f=3&amp;p=56404" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopiceefd-2.html?p=56404#p56404" onclick="prompt('Message #9',this.href); return false;">#9</a></span> 
									<a class="unread" href="viewtopiceefd-2.html?p=56404#p56404" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a></strong> &raquo; </span>16 Apr 2018 10:23
			</p>
			
			
			
			<div class="content"><blockquote><div><cite><a href="memberlist7125.html?mode=viewprofile&amp;u=417">jeb</a> wrote: <a href="viewtopice898.html?p=56402#p56402" data-post-id="56402" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">16 Apr 2018 09:50</div></cite>
Hi Icarus,<br>
<br>
do you can put your ppm files somewhere, so we can play with them?
</div></blockquote>

I am so happy you asked! Of course I can!<br>
<br>
<a href="http://www.mediafire.com/file/sth7b50khwamdln/Templates for Parallax.zip" class="postlink">Templates for Parallax</a><br>
<br>
<a href="http://www.mediafire.com/file/yl97rkbn2epfdop/Other PPMs.zip" class="postlink">Other PPMs</a></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56410" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile56410">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content56410">

						<h3 ><a href="#p56410">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting05bf.html?mode=quote&amp;f=3&amp;p=56410" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic3d3c.html?p=56410#p56410" onclick="prompt('Message #10',this.href); return false;">#10</a></span> 
									<a class="unread" href="viewtopic3d3c.html?p=56410#p56410" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>16 Apr 2018 15:15
			</p>
			
			
			
			<div class="content">I just noticed my post in your other thread also shows the overlapping technique i called "simply not draw black pixels", but i have created the image out of an artwork i made - but the process should be rather the same; see:<br>
<a href="viewtopic1e5c.html?f=3&amp;t=8493&amp;p=56409#p56409" class="postlink">viewtopic.php?f=3&amp;t=8493&amp;p=56409#p56409</a><br>
<br>
penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56411" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile56411">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search73f1.html?author_id=417&amp;sr=posts">880</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 30 Aug 2007 08:05</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany, Bochum</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content56411">

						<h3 ><a href="#p56411">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting5efd.html?mode=quote&amp;f=3&amp;p=56411" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicf74e.html?p=56411#p56411" onclick="prompt('Message #11',this.href); return false;">#11</a></span> 
									<a class="unread" href="viewtopicf74e.html?p=56411#p56411" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7125.html?mode=viewprofile&amp;u=417" class="username">jeb</a></strong> &raquo; </span>16 Apr 2018 17:39
			</p>
			
			
			
			<div class="content">I used your sample files cloud1.ppm and mountain1.ppm.<br>
<br>
This batch demo shows that you can overlay two different images in real time (7 FPS).<br>
<br>
I'm using pre cached files to avoid the long converting time from RGB to escape sequences.<br>
And for combining two images, I precompute a run length encoded array for faster copying the relevant parts<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off &amp; setlocal enableDelayedExpansion

REM INIT
for /F %%a in ('echo prompt $E^| cmd') do set "ESC=%%a"
(set LF=^
%=empty=%
)

REM *** pixelPerLine pixelPerLine*20 must be less then 8191
REM *** Currently it should be the same as the image width
set pixelPerLine=100

REM *** Clear Screen
&lt;nul set /p ".=%ESC%[2J%ESC%[H"

call :readImage cloud1
call :readImage mountain1

call :createRLE mountain1


REM *** Draw the image and move the mountain up/down between 0 to 6 lines
set "dir=1"
set /a "offset=0"
for /L %%n in (1 1 100) do (
    if defined dir (
        set /a offset+=1
        if !offset! GEQ 10 (
            set "dir="
        )
    ) else (
        set /a offset-=1
        if !offset! EQU -5 (
            set "dir=1"
        )
    )

	call :copyImage cloud1 img
	call :combineRLE mountain1 img !offset!
    call :display img
	&lt;nul set /p ".=%ESC%[H%%n - !offset!"	
)
exit /b

:readImage
REM *** First check if a cached version exists, this is MUCH faster
set "preConfig=REM !pixelPerLine!"
set "preCachedFile=%~1.pre.bat"
if exist %preCachedFile% (
	&lt; "%preCachedFile%" set /p line=
	if "!line!" == "!preConfig!" (
		call %preCachedFile%
		exit /b
	)
)
set startTime=%time%
REM Parse height and width from PPM, and obtain headerSize
set "image=%~1.ppm"
for %%a in (%image%) do set "imageFileSize=%%~za"
if exist %image% ( if /i "%image:~-3%" equ "ppm" ( for /f "tokens=*" %%a in (%image%) do (
	set "str=X%%~a" &amp; set "length=0"
	for /l %%b in (5,-1,0) do ( set /a "length|=1&lt;&lt;%%b"
		for /f "tokens=*" %%c in ("!length!") do if "!str:~%%c,1!" equ "" set /a "length&amp;=~1&lt;&lt;%%b" )
	set /a "headerSize+=length + 1"
	if !i! equ 1 for /f "tokens=1,2" %%b in ("%%a") do ( set "o=%%b"
		if "!o:~0,1!" neq "#" set /a "width=%%b", "height=%%c" )
	if !i! equ 2 goto :break
	set /a "i+=1"
)) else ( echo Format not supported &amp; timeout /t 2 &gt; nul &amp; exit )
) else ( echo File not found &amp; timeout /t 2 &gt; nul &amp; exit )

:break
REM Parse all data from %image% and collect in hex[] up to &lt;maxChars&gt; characters (divisible by 6)
mode %width%,%height%
set /a height+=10
REM *** Set window dimension to height * width
&lt;nul set /p ".=%ESC%[8;%height%;%width%t"
&lt;nul (
	for /L %%n in (1 1 %width%) DO (
		set "value=%%n"
		&lt;nul set /p ".=!value:~-1!"
	)
)
echo(%height%;%width%
certutil -f -encodehex "%image%" ppm.hex.tmp &gt; nul

set /a hex_max=0

set /a ignoreNibbles=headerSize*2 %= ignore this amount of hex values =%
set /a maxChars=pixelPerLine*6
set "hex="
for /f "tokens=1,*" %%a in (ppm.hex.tmp) do (
    set "line=%%b"
    set "line=!line:~0,48!"
    set "hex=!hex!!line: =!"
    if defined ignoreNibbles (
        if "!hex:~%ignoreNibbles%,1!" NEQ "" (
            set "hex=!hex:~%ignoreNibbles%!"
            set "ignoreNibbles="
        )
    )
    if "!hex:~%maxChars%,1!" NEQ "" (
        set "hex[!hex_max!]=!hex:~0,%maxChars%!"
        set /a hex_max+=1
        set "hex=!hex:~%maxChars%!"
    )
    &lt;nul set /p ".=%ESC%7Loading %image% (!hex_max!)%ESC%8"
)
if "!hex!" == "" (
    set /a hex_max-=1
) ELSE (
    set "hex[!hex_max!]=!hex!"
)
set /a %1_cnt=!hex_max!
call :diffTime
call :convertToEscapeSeq %1
call :copy2File %1
exit /b

:diffTime
for /F "tokens=1-8 delims=:.," %%a in ("!startTime: =0!:!time: =0!") do (
	set /a "a=(((1%%e-1%%a)*60)+1%%f-1%%b)*6000+1%%g%%h-1%%c%%d, a+=(a&gt;&gt;31)&amp;8640000, diffTime=a*10"
	)
echo(%ESC%[30C!diffTime!ms
exit /b

:clearImage &lt;pictureName&gt; &lt;width&gt; &lt;height&gt;
:@TODO
exit /b

:copyImage &lt;pictureName&gt; &lt;dest&gt;
set startTime=%time%
for /L %%n in (0,1,!%1_cnt!) do (
	rem &lt;nul set /p ".=%ESC%7copyImage %1 (%%n)%ESC%8"
    set "%2[%%n]=!%1[%%n]!"
)
set /a %2_cnt=%1_cnt
rem call :diffTime
exit /b


:copy2File &lt;pictureName&gt;
set startTime=%time%
set "preConfig=REM !pixelPerLine!"
&lt;nul &gt; %1.pre.bat (
	(echo !preConfig!)
	for /L %%n in (0,1,!%1_cnt!) do (
		&lt;nul set /p ".=%ESC%7copyImage %1 (%%n)%ESC%8" &gt; con
		echo set "%1[%%n]=!%1[%%n]!"
	)
	echo set "%1_cnt=!%1_cnt!"
)
call :diffTime
exit /b

REM *** Build a run length encoding for the parts to be copied
REM *** Black is "transparent"
:createRLE &lt;pictureName&gt;
set startTime=%time%
set /a escapeSize=20
set /a maxCount=pixelPerLine*escapeSize
for /L %%n in (0,1,!%1_cnt!) do (
	&lt;nul set /p ".=%ESC%7createRLE %1 (%%n)%ESC%8"
	set /a startPos=0
	set /a len=0
	
	for /L %%a in (0 %escapeSize% %maxCount%) DO (
		if "!%1[%%n]:~%%a,%escapeSize%!" EQU "%ESC%[48;2;000;000;000m " (
			if !len! EQU 0 (
				set /a startPos+=escapeSize
			) ELSE (
				if defined %1_RLE[%%n] (
					set "%1_RLE[%%n]=!%1_RLE[%%n]!#"
				)					
				set /a remain=startPos+len
				set "%1_RLE[%%n]=!%1_RLE[%%n]!!startPos!,!len!,!remain!"
				set /a startPos=remain
				set /a len=0
			)
		) ELSE (
			set /a len+=escapeSize
		)
	)

	if not defined %1_RLE[%%n] (
		set "%1_RLE[%%n]=0,0,0"
	)					
)
call :diffTime
exit /b

REM *** Combines a RLE encoded image into the dest image
:combineRLE &lt;pictureName&gt; &lt;dest&gt;
set startTime=%time%
set /a combine.add=%3
set /a maxLine=%1_cnt
if !combine.add! LEQ 0 set /a maxLine-=combine.add
FOR %%L in ("!LF!") DO (
	for /L %%n in (0,1,%maxLine%) do (		
		REM &lt;nul set /p ".=%ESC%7combineRLE %1 (%%n)%ESC%8"
		set /a image.offset=%%n+combine.add
		if !image.offset! GEQ 0 (
			if !image.offset! LEQ !%1_cnt! (
				for /F %%o in ("!image.offset!") DO (
					FOR /F "tokens=1-3 delims=," %%a in ("!%1_RLE[%%o]:#=%%~L!") DO (
						set "%2[%%n]=!%2[%%n]:~0,%%a!!%1[%%o]:~%%a,%%b!!%2[%%n]:~%%c!"
					)
				)
			)
		)
	)
)
REM call :diffTime
exit /b

REM *** Combines an image into the dest image, is VERY SLOW
:combine &lt;pictureName&gt; &lt;dest&gt;
set startTime=%time%
set /a escapeSize=14
set /a lineLen=pixelPerLine*escapeSize
(
for /L %%n in (0,1,!%1_cnt!) do (
	rem &lt;nul set /p ".=%ESC%7combine %1 (%%n)%ESC%8"
	for /L %%a in (0 14 !lineLen!) DO (
		if "!%1[%%n]:~%%a,%escapeSize%!" NEQ "#000;000;000m " (
			set /a endPos=%%a+escapeSize
			for /F %%E in ("!endPos!") DO (
				set "%2[%%n]=!%2[%%n]:~0,%%a!!%1[%%n]:~%%a,%escapeSize%!!%2[%%n]:~%%E!"
			)
		)
	)
)
)
call :diffTime
exit /b

REM *** Combines an image into the dest image, is MEDIUM SLOW
:combine2File &lt;pictureName&gt; &lt;dest&gt;
set startTime=%time%
set /a escapeSize=20
set /a lineLen=pixelPerLine*escapeSize
&lt;nul &gt; %2.tmp (
for /L %%n in (0,1,!%1_cnt!) do (
	rem &lt;nul set /p ".=%ESC%7combine %1 (%%n)%ESC%8"
	for /L %%a in (0 %escapeSize% !lineLen!) DO (
		if "!%1[%%n]:~%%a,%escapeSize%!" EQU "%ESC%[48;2;000;000;000m " (
			set /p ".=!%2[%%n]:~%%a,%escapeSize%!"			
		) ELSE (
			set /p ".=!%1[%%n]:~%%a,%escapeSize%!"
		)
	)
)
)
&lt;nul set /p ".=%ESC%combine2File %1 (%%n)%ESC%8"
call :diffTime
exit /b

REM *** Build the out[] array with color escape sequences for every pixel
:convertToEscapeSeq &lt;pictureName&gt;
set startTime=%time%
set /a maxCount=pixelPerLine*6
for /L %%a in (0,1,%hex_max%) do (
    &lt;nul set /p ".=%ESC%7Converting RGB (%%a)%ESC%8" %= Save/restore cursor position =%
    set "out="
	for /L %%b in (0,6,%maxCount%) do (
        set "c=!hex[%%a]:~%%b,6!"
        if defined c (
			set /a "r=1000+(0x!c:~0,2! &amp; 0xE0)", "g=1000+(0x!c:~2,2! &amp; 0xE0)", "b=1000+(0x!c:~4,2! &amp; 0xE0)"
            set "out=!out!%ESC%[48;2;!r:~-3!;!g:~-3!;!b:~-3!m "
        )
    )
    set "%1[%%a]=!out!"
)
call :diffTime
exit /b

:RGB2File &lt;pictureName&gt;
set startTime=%time%
set /a maxCount=pixelPerLine*2-6
&lt;nul &gt; %1.tmp (
	for /L %%a in (0,1,%hex_max%) do (
		for /L %%b in (0,6,%maxCount%) do (
			set "c=!hex[%%a]:~%%b,6!"
			if defined c (
				set /a "r=1000+(0x!c:~0,2! &amp; 0xF0)", "g=1000+(0x!c:~2,2! &amp; 0xF0)", "b=1000+(0x!c:~4,2! &amp; 0xF0)"
				set /p ".=%ESC%[48;2;!r:~-3!;!g:~-3!;!b:~-3!m "
			)
		)
	)
)
&lt;nul set /p ".=%ESC%7Converting RGB (%%a)%ESC%8" %= Save/restore cursor position =%
call :diffTime
exit /b

:display &lt;pictureName&gt; &lt;offset&gt;
set startTime=%time%
&lt;nul (
	REM *** Hide cursor, Set cursor to line %1
    set /p ".=%ESC%[?25l%ESC%[1H"
	for /L %%a in (0,1,!%1_cnt!) do (
		set /p ".=!%1[%%a]:#=%ESC%[48;2;!"
	)
	REM *** Show cursor, Reset color to default
	set /p ".=%ESC%[?25h%ESC%[0m"
)
rem echo(-----------
rem call :diffTime
exit /b
</code></pre></div></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p56415" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile56415">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search393f.php?author_id=8073&amp;sr=posts">92</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 17 Jan 2016 23:55</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content56415">

						<h3 ><a href="#p56415">Re: Parallax background, and overlapping images properly</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge147.html?mode=quote&amp;f=3&amp;p=56415" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicbe30.html?p=56415#p56415" onclick="prompt('Message #12',this.href); return false;">#12</a></span> 
									<a class="unread" href="viewtopicbe30.html?p=56415#p56415" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist11f0.html?mode=viewprofile&amp;u=8073" class="username">IcarusLives</a></strong> &raquo; </span>16 Apr 2018 22:35
			</p>
			
			
			
			<div class="content"><blockquote><div><cite><a href="memberlist7125.html?mode=viewprofile&amp;u=417">jeb</a> wrote: <a href="viewtopicf74e.html?p=56411#p56411" data-post-id="56411" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">16 Apr 2018 17:39</div></cite>
This batch demo shows that you can overlay two different images in real time (7 FPS).<br>
<br>
I'm using pre cached files to avoid the long converting time from RGB to escape sequences.<br>
And for combining two images, I precompute a run length encoded array for faster copying the relevant parts
</div></blockquote>

Jeb this is awesome! It works perfectly on my PC, no issues what so ever.<br>
<br>
I need to take the time to read this code and understand it!<br>
<br>
This is so exciting to be honest because I was starting to think that even if it were possible it would be slow, but this performance is really quite smooth on my PC! Not even a bit of flicker <img class="smilies" src="images/smilies/icon_smile.gif" width="15" height="15" alt=":)" title="Smile"><br>
<br>
Thank you very much for this! I will be studying this code</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting762c-2.html?mode=reply&amp;f=3&amp;t=8501" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic1fa5.html?f=3&amp;t=8501&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=8501">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			12 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron5495.gif?cron_type=cron.task.text_reparser.poll_title" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8501&p=56415 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:59:10 GMT -->
</html>
