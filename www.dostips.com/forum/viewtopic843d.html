<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8763&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:45:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; copy and kill file</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>copy and kill file</h2>
		<p><a href="viewtopic9c48.html?f=3&amp;t=8763">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=8763</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>copy and kill file</h3>
				<div class="date">Posted: <strong>02 Aug 2018 03:40</strong></div>
				<div class="author">by <strong>sal21</strong></div>
				<div class="content">batch, please.. tkx.<br>
have two lan dir:<br>
<br>
source dir:<br>
\\mylnadir1\dir1\<br>
destination dir:<br>
\\mylnadir2\dir2\<br>
<br>
from source dir i need to loop all .txt files (only this type with .txt), check if in destionation dir are present if not copy, from source and paste in destination, naturally kill file from source...<br>
<br>
tath is all.<br>
tkx</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: copy and kill file</h3>
				<div class="date">Posted: <strong>02 Aug 2018 05:51</strong></div>
				<div class="author">by <strong>SIMMS7400</strong></div>
				<div class="content">Untested:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>SET "SOURCE_DIR=\\mylnadir1\dir1"
SET "DEST_DIR=\\mylnadir2\dir2"

PUSHD "%SOURCE_DIR%"
	FOR /F %%A IN ("*.txt") DO (
		IF NOT EXIST "%DEST_DIR%\%%~A" (
			COPY /Y "%%~A" "%DEST_DIR%"
			DEL /F /Q "%%~A"
		)
	)
POPD
	
</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: copy and kill file</h3>
				<div class="date">Posted: <strong>02 Aug 2018 08:51</strong></div>
				<div class="author">by <strong>Squashman</strong></div>
				<div class="content"><blockquote><div><cite><a href="memberlistba0d.html?mode=viewprofile&amp;u=8052">SIMMS7400</a> wrote: <a href="viewtopic0d65.html?p=57643#p57643" data-post-id="57643" onclick="if(document.getElementById(hash.substr(1)))href=hash">â†‘</a><div class="responsive-hide">02 Aug 2018 05:51</div></cite>
Untested:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>SET "SOURCE_DIR=\\mylnadir1\dir1"
SET "DEST_DIR=\\mylnadir2\dir2"

PUSHD "%SOURCE_DIR%"
	FOR /F %%A IN ("*.txt") DO (
		IF NOT EXIST "%DEST_DIR%\%%~A" (
			COPY /Y "%%~A" "%DEST_DIR%"
			DEL /F /Q "%%~A"
		)
	)
POPD
	
</code></pre></div>
</div></blockquote>
Remove the /F.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8763&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:45:16 GMT -->
</html>
