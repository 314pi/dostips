<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=7990&start=30&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:21:39 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; Best way to obfuscate a Batch File? - Page 3</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>Best way to obfuscate a Batch File?</h2>
		<p><a href="viewtopic3379.html?f=3&amp;t=7990">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=7990</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>3</strong> of <strong>5</strong></div>
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>10 Aug 2017 05:52</strong></div>
				<div class="author">by <strong>PaperTronics</strong></div>
				<div class="content">@penpen I've followed ShadowThief's method and salted and hashed the password. So I guess the most popular topic of mine finishes here!  <img class="smilies" src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> <br /><br /><br /><br />PaperTronics</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>10 Aug 2017 08:37</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content"><blockquote><div><cite>PaperTronics wrote:</cite>@dbenham - I like your obfuscating batch file so much, that I may even use it on my new game! Do you mind if I post about it on my website?</div></blockquote><br />Not at all. Just be sure to preserve my documentation and credits if you repost the ObfuscateBatch.bat code.<br /><br />Also, it would be nice if any released game gave credit for the obfuscation technique (including my name, as well as the DosTips site) in a human readable comment within the code.<br /><br /><br />Dave Benham</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>11 Aug 2017 03:20</strong></div>
				<div class="author">by <strong>PaperTronics</strong></div>
				<div class="content">@dbenham - Of Course! I will give full credits to you in the header of the game and even in the readme documentation.<br /><br /><br />PaperTronics</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>31 Aug 2017 10:01</strong></div>
				<div class="author">by <strong>Kvc</strong></div>
				<div class="content"><img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> <br /><br />Sorry to bother You all. But, As PaperTronic has posted on TheBATeam Blog - about Dave's great plugin - A User has faced a problem of JS Error in the console. (See Here)<a href="http://www.thebateam.org/2017/08/properly-encode-obfuscate-your-code.html?showComment=1504078324080#c722512734334501697" class="postlink">http://www.thebateam.org/2017/08/properly-encode-obfuscate-your-code.html?showComment=1504078324080#c722512734334501697</a> <br /><br />Can You Please Sort out the issue. As, I don't know about the working method and kind of out of time understanding it first. <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /> Thanks for your time.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>31 Aug 2017 10:15</strong></div>
				<div class="author">by <strong>Kvc</strong></div>
				<div class="content"><img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> <br />Hey, Dave And PaperTronics - pardon me for bothering you here. But, I really don't know to use this system of the forum (trying hard to learn though). I think I've replied before - but, couldn't see my comment in the topic. So, trying again.<br /><br />As promised - PaperTronics and I've posted the great plugin on the OurBatchblog (TheBATeam). And, a user recently commented about the JS Error they are facing while using the plugin. I don't know about the working of the plugin - so, I will be better if either of you can reply with a proper solution. <a href="http://www.thebateam.org/2017/08/properly-encode-obfuscate-your-code.html?showComment=1504195437642#c5951254323612374791" class="postlink">http://www.thebateam.org/2017/08/properly-encode-obfuscate-your-code.html?showComment=1504195437642#c5951254323612374791</a><br /><br />Thanks for your time. <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><blockquote class="uncited"><div>&quot;The strength of the team is each individual member. The strength of each member is the team.&quot; --Phil Jackson</div></blockquote></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>31 Aug 2017 10:20</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">Ask the user what exactly the error message is. JScript always outputs a nice message including line number and position in the line where the error occurred.<br /><br />Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>31 Aug 2017 17:16</strong></div>
				<div class="author">by <strong>penpen</strong></div>
				<div class="content">I've downloaded the example, executed &quot;test.bat&quot; to create &quot;Hello_obfuscated.bat&quot;, which gives this output:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;Hello World!<br />Parameterformat falsch - 708.</code></pre></div><br /><br />On a fast check i guess, that the error is in daves &quot;ObfuscateBatch.bat&quot; is located in line 123:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>echo @echo off^&amp;(if defined @lo@ goto !hi:~0,1!)^&amp;setlocal disableDelayedExpansion^&amp;for /f &quot;delims=: tokens=2&quot; %%%%A in ('chcp') do set &quot;@chcp@=chcp %%%%A&gt;nul&quot;^&amp;chcp 708^&gt;nul^&amp;set ^^^^&quot;@args@=%%*&quot;<br /></code></pre></div><br />I think the for/f-loop is missing the dot character ('.') as a delimiter, so correct line should be:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>echo @echo off^&amp;(if defined @lo@ goto !hi:~0,1!)^&amp;setlocal disableDelayedExpansion^&amp;for /f &quot;delims=:. tokens=2&quot; %%%%A in ('chcp') do set &quot;@chcp@=chcp %%%%A&gt;nul&quot;^&amp;chcp 708^&gt;nul^&amp;set ^^^^&quot;@args@=%%*&quot;</code></pre></div><br />Although it might be, that the resulting &quot;chcp 708&gt;nul&quot; also may lead to an error, so i would prefer &quot;&gt;nul chcp 708&quot;.<br /><br />penpen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>31 Aug 2017 18:53</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content">One important limitation of JREPL that I have not documented - based on a private message I received, it appears JREPL does not support Asian languages that use multi-byte characters within cmd.exe. I wonder if Staszek Michal is running into that limitation <img class="smilies" src="images/smilies/icon_question.gif" alt=":?:" title="Question" /> The opening lines of his posted hello_obfuscated.bat are certainly corrupted in a major way.<br /><br /><blockquote><div><cite>penpen wrote:</cite>I've downloaded the example, executed &quot;test.bat&quot; to create &quot;Hello_obfuscated.bat&quot;, which gives this output:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;Hello World!<br />Parameterformat falsch - 708.</code></pre></div><br /><br />On a fast check i guess, that the error is in daves &quot;ObfuscateBatch.bat&quot; is located in line 123:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>echo @echo off^&amp;(if defined @lo@ goto !hi:~0,1!)^&amp;setlocal disableDelayedExpansion^&amp;for /f &quot;delims=: tokens=2&quot; %%%%A in ('chcp') do set &quot;@chcp@=chcp %%%%A&gt;nul&quot;^&amp;chcp 708^&gt;nul^&amp;set ^^^^&quot;@args@=%%*&quot;<br /></code></pre></div><br />I think the for/f-loop is missing the dot character ('.') as a delimiter, so correct line should be:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>echo @echo off^&amp;(if defined @lo@ goto !hi:~0,1!)^&amp;setlocal disableDelayedExpansion^&amp;for /f &quot;delims=:. tokens=2&quot; %%%%A in ('chcp') do set &quot;@chcp@=chcp %%%%A&gt;nul&quot;^&amp;chcp 708^&gt;nul^&amp;set ^^^^&quot;@args@=%%*&quot;</code></pre></div></div></blockquote>  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> Wow <img class="smilies" src="images/smilies/icon_exclaim.gif" alt=":!:" title="Exclamation" /><br />So the format of CHCP output must not be consistent across all languages. I was aware that the words would change, but I thought the punctuation would be consistent. On my US machine I get<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\test&gt;chcp<br />Active code page: 437<br /></code></pre></div>But your output must have a period at the end. Adding the dot to delims should indeed fix that problem, assuming there are no other variations with other languages.<br /><br /><blockquote><div><cite>penpen wrote:</cite>Although it might be, that the resulting &quot;chcp 708&gt;nul&quot; also may lead to an error, so i would prefer &quot;&gt;nul chcp 708&quot;.<br /></div></blockquote>Putting the redirection in front certainly can't hurt, but it should not be necessary. CMD.EXE redirection only recognizes single digit file streams. The 8 would only be a problem if it were a complete token, but it is part of the larger 708 token. So CMD.EXE knows it does not represent a file stream.<br /><br /><br />Dave Benham</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>31 Aug 2017 23:25</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content">I <a href="viewtopic944d.html?f=3&amp;t=7990&amp;p=53278#p53278" class="postlink">updated the code</a> to add the dot to the delims option.<br /><br />Dave Benham</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>01 Sep 2017 07:44</strong></div>
				<div class="author">by <strong>PaperTronics</strong></div>
				<div class="content">@dbenham - Perhaps posting the solution directly to the website may help. Can you please reply to Michal directly on the website since none of us, Kvc or me, understand JS.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>01 Sep 2017 08:53</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">I don't want to speak for Dave. So the following is just my opinion.<br /><br />You asked Dave if you can use/post his code on your website. You copied the code and uploaded it externally. This is the first point where you failed. Nobody but you can update this upload. Don't expect you get informed whenever Dave updates his code here at DosTips. So from my point of view it would have been much better to post a link to this thread instead. Also even that you told the people who developed the code you didn't tell them where to get help. Of course they will ask you if they get problems now. And of course you have to answer. Are you really trying to force Dave being responsible to answer in any forum or on any website his code might be copied or linked?<br /><br />Just my 2 cents ...<br />Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>01 Sep 2017 09:07</strong></div>
				<div class="author">by <strong>dbenham</strong></div>
				<div class="content">Perfect response Steffen, thanks.<br /><br />@PaperTronics - I'm almost positive the dot will not solve Staszek Michal's problem.<br /><br />I suspect he is using a machine configured for a multi-byte character set, which JREPL does not support (unfortunately). I'll leave it up to you to follow up with him. Ask him what active code page he is using (execute CHCP from command line and report the result). Then look up that code value to determine if it is multi-byte.<br /><br /><br />Dave Benham</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>01 Sep 2017 13:25</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content"><blockquote><div><cite>dbenham wrote:</cite> <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> Wow <img class="smilies" src="images/smilies/icon_exclaim.gif" alt=":!:" title="Exclamation" /><br />So the format of CHCP output must not be consistent across all languages. I was aware that the words would change, but I thought the punctuation would be consistent.</div></blockquote><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Aktive Codepage: 850.</code></pre></div><br />So it's just the point at the end of the sentence. That's how I usually work around it:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for /f &quot;tokens=2 delims=:&quot; %%i in ('chcp') do set /a &quot;oemcp=%%~ni&quot;</code></pre></div><br />Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>01 Sep 2017 18:08</strong></div>
				<div class="author">by <strong>Kvc</strong></div>
				<div class="content"><blockquote><div><cite>aGerman wrote:</cite>I don't want to speak for Dave. So the following is just my opinion.<br /><br />You asked Dave if you can use/post his code on your website. You copied the code and uploaded it externally. This is the first point where you failed. Nobody but you can update this upload. Don't expect you get informed whenever Dave updates his code here at DosTips. So from my point of view it would have been much better to post a link to this thread instead. Also even that you told the people who developed the code you didn't tell them where to get help. Of course they will ask you if they get problems now. And of course, you have to answer. Are you really trying to force Dave being responsible to answer in any forum or on any website his code might be copied or linked?<br /><br />Just my 2 cents ...<br />Steffen</div></blockquote><br /><br />Pardon me for forgetting about - posting the <strong class="text-strong">related link of the forum</strong> in the article (My Bad). Handling lot of things together leads me to forget important things. I'll quickly update the article.<br /><br />And, We are not forcing Dave - Just trying to get their help in understanding the working &amp; solution for their complex work. We always change the source Link of the code with our own Media-fire link because of two reasons...<br /><br />1. The BatchStore Project (<a href="http://www.thebateam.org/2017/06/batch-app-batch-store-v10-by-kvc.html" class="postlink">http://www.thebateam.org/2017/06/batch-app-batch-store-v10-by-kvc.html</a>) <br />And, BatchStore detects only Mediafire links as project download links... <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />2. If Someone removes the Code from the source - We'll need to update all those related articles again &amp; again. (And, we'll know about the problem - only if someone complains... SO, didn't want to depend on such conditions - independent solution. Already faced some problems in this case - so,...)<br />3. Newbie programmers don't even know 'how to use these plugins?' so, Needed to provide a simple help file in the download link - such as 'Test.bat' in this case. So, they can get the result quickly. And, when the curiosity takes over their lazy brain... they'll try to know how it worked. And, then self-motivation will motivate them to know more about the plugin, its creator, and the method - how it works?<br /><br />Can't do all 3 when we'll only provide the link to the source of the code. But, we can provide the link alongside with our download link. Thanks for the reminder - From next time We'll keep that in mind. <img class="smilies" src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Best way to obfuscate a Batch File?</h3>
				<div class="date">Posted: <strong>01 Sep 2017 18:17</strong></div>
				<div class="author">by <strong>Kvc</strong></div>
				<div class="content"><blockquote><div><cite>dbenham wrote:</cite>I suspect he is using a machine configured for a multi-byte character set, which JREPL does not support (unfortunately). I'll leave it up to you to follow up with him. Ask him what active code page he is using (execute CHCP from the command line and report the result). Then look up that code value to determine if it is multi-byte.<br /><br /><br />Dave Benham</div></blockquote><br /><br /> <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> Perfect. And, I'll also ask Michal to update the code from v.1.0 to v.1.1 (your recent update). But, Are you sure - it is not the problem of having java installed in the PC? (just curious) <br /><br /><blockquote class="uncited"><div>If you can't stop thinking about it, never stop working for it.</div></blockquote></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>3</strong> of <strong>5</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=7990&start=30&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:21:39 GMT -->
</html>
