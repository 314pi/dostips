<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?p=44025 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:05:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Dos Batch Math Library - Page 3 - DosTips.com</title>


	<link rel="canonical" href="viewtopic4fbe.html?t=5819&amp;start=30">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic5027.html?f=3&amp;t=5819&amp;start=30">Dos Batch Math Library</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="postingdac0.html?mode=reply&amp;f=3&amp;t=5819" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic1b28.html?f=3&amp;t=5819&amp;start=30&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="5819" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			59 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopic8d84.html?f=3&amp;t=5819" role="button">1</a></li>
				<li><a class="button" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" role="button">2</a></li>
			<li class="active"><span>3</span></li>
				<li><a class="button" href="viewtopic261a.html?f=3&amp;t=5819&amp;start=45" role="button">4</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopic261a.html?f=3&amp;t=5819&amp;start=45" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p44001" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44001">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44001">

						<h3 class="first"><a href="#p44001">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting373a.html?mode=quote&amp;f=3&amp;p=44001" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0d36.html?p=44001#p44001" onclick="prompt('Message #31',this.href); return false;">#31</a></span> 
									<a class="unread" href="viewtopic0d36.html?p=44001#p44001" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>17 Nov 2015 01:00
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>penpen wrote:</cite>. . .<br /><br />Note:<br />I have not tested, if this algorithm computes always the correct result.<br />Some values within [0:2^31-1] may need more iterations.<br />Because of the starting value the number of iterations is not monotonically increasing anymore<br />(if i remember right then the original algorithm (initial x=N) needs a maximum of 19 iterations).<br /><br />But you should check this using c++/java/similar... batch is much too slow to check all numbers within [0:2^32-1];<br />my pc would take &gt;300 days, but it isn't the fastest... .<br /><br />penpen</div></blockquote><br /><br />Well, that is not really neccessary... The problems with these <em class="text-italics">iterative</em> methods appears at the limits of a range of results. For example, the Sqrt from 25 to 35 is 5, so it is enough to test the method with 25 and 35 to know that all values in this range will return the same result. This way, the test should be done on the square of a number and this value minus one for all numbers from 2 up to Sqrt(2^31-1), that is 46340. I wrote the program below to perform this test over both methods:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />for /F %%a in ('copy /Z &quot;%~F0&quot; NUL') do set &quot;CR=%%a&quot;<br /><br /><br />rem Aacini's method:<br />set &quot;Sqrt1(Num)=set /A &quot;M=(Num),sqrt=M/(11*1024)+40,sqrt=(M/sqrt+sqrt)/2&quot;&amp;(for /L %%i in (1,1,5) do set /A &quot;x2=(M/sqrt+sqrt)/2&quot;^&amp;if ^!x2^! leq ^!sqrt^! set /A sqrt=x2)&quot;<br />echo Aacini start @ %time%<br /><br />&lt; NUL (for /L %%n in (2,1,46340) do (<br /><br />&nbsp; &nbsp;set /P &quot;=%%n!CR!&quot;<br /><br />&nbsp; &nbsp;set /A &quot;Num2=%%n*%%n, Num2M1=Num2-1, NM1=%%n-1&quot;<br /><br />&nbsp; &nbsp;%Sqrt1(Num):Num=Num2M1%<br />&nbsp; &nbsp;if !sqrt! neq !NM1! echo Aacini failed on %%n- sqrt(!Num2M1!^) = !sqrt!<br />&nbsp; &nbsp;%Sqrt1(Num):Num=Num2%<br />&nbsp; &nbsp;if !sqrt! neq %%n echo Aacini failed on %%n- sqrt(!Num2!^) = !sqrt!<br /><br />))<br /><br />echo Aacini end&nbsp; &nbsp;@ %time%<br /><br /><br />echo =====================<br /><br /><br />rem penpen's method:<br />set &quot;Sqrt2(N)=( x=(N)/(11*1024)+40-^!(N)*9, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x+=(((N)-((x-1)*(x-1)+(x+x-1)))&gt;&gt;31))/(1+((N)&gt;&gt;31))&quot;<br />echo penpen start @ %time%<br /><br />&lt; NUL (for /L %%n in (2,1,46340) do (<br /><br />&nbsp; &nbsp;set /P &quot;=%%n!CR!&quot;<br /><br />&nbsp; &nbsp;set /A &quot;Num2=%%n*%%n, Num2M1=Num2-1, NM1=%%n-1&quot;<br /><br />&nbsp; &nbsp;set /A &quot;sqrt=!Sqrt2(N):N=Num2M1!&quot;<br />&nbsp; &nbsp;if !sqrt! neq !NM1! echo penpen failed on %%n- sqrt(!Num2M1!^) = !sqrt!<br />&nbsp; &nbsp;set /A &quot;sqrt=!Sqrt2(N):N=Num2!&quot;<br />&nbsp; &nbsp;if !sqrt! neq %%n echo penpen failed on %%n- sqrt(!Num2!^) = !sqrt!<br /><br />))<br /><br />echo penpen end&nbsp; &nbsp;@ %time%<br /></code></pre></div><br />Each test takes less than 5 minutes; this is the output:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Aacini start @ 23:50:44.84<br />Aacini end&nbsp; &nbsp;@ 23:55:04.78<br />=====================<br />penpen start @ 23:55:04.79<br />penpen end&nbsp; &nbsp;@ 23:57:23.93<br /></code></pre></div><br />My method is slower because it have a FOR command; I will try to eliminate it in order to speed up the method.<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44004" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44004">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44004">

						<h3 ><a href="#p44004">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb367.html?mode=quote&amp;f=3&amp;p=44004" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicddac.html?p=44004#p44004" onclick="prompt('Message #32',this.href); return false;">#32</a></span> 
									<a class="unread" href="viewtopicddac.html?p=44004#p44004" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>17 Nov 2015 12:21
			</p>
			
			
			
			<div class="content">Ok. I converted the FOR loop into a long expression; after that, I realized that the IF test may be performed just in the last iteration and the result is the same. I also slightly optimized the expression changing the division by 2 for a right shift.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />for /F %%a in ('copy /Z &quot;%~F0&quot; NUL') do set &quot;CR=%%a&quot;<br /><br />rem Aacini's method, converted into a long expression:<br />set &quot;Sqrt(N)=( M=(N),x=M/(11*1024)+40, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x2=(M/x+x)&gt;&gt;1,x+=-(x2-x-1&gt;&gt;31)*(x2-x) )&quot;<br /><br />echo Aacini2 start @ %time%<br /><br />&lt; NUL (for /L %%n in (2,1,46340) do (<br /><br />&nbsp; &nbsp;set /P &quot;=%%n!CR!&quot;<br /><br />&nbsp; &nbsp;set /A &quot;Num2=%%n*%%n, Num2M1=Num2-1, NM1=%%n-1&quot;<br /><br />&nbsp; &nbsp;set /A &quot;sqrt=%Sqrt(N):N=Num2M1%&quot;<br />&nbsp; &nbsp;if !sqrt! neq !NM1! echo Aacini failed on %%n- sqrt(!Num2M1!^) = !sqrt!<br />&nbsp; &nbsp;set /A &quot;sqrt=%Sqrt(N):N=Num2%&quot;<br />&nbsp; &nbsp;if !sqrt! neq %%n echo Aacini failed on %%n- sqrt(!Num2!^) = !sqrt!<br /><br />))<br /><br />echo Aacini2 end&nbsp; &nbsp;@ %time%<br /></code></pre></div><br />This is the output:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Aacini2 start @ 11:50:33.11<br />Aacini2 end&nbsp; &nbsp;@ 11:52:53.84<br /></code></pre></div><br /><br />The timing in the original FOR-loop method was 4:19.94 minutes but this one takes just 2:20.73 minutes, practically the same than penpen's version that was 2:19.14 minutes.<br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44005" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44005">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1322.html?author_id=2988&amp;sr=posts">3970</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Dec 2011 13:59</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content44005">

						<h3 ><a href="#p44005">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting26f8.html?mode=quote&amp;f=3&amp;p=44005" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopice120.html?p=44005#p44005" onclick="prompt('Message #33',this.href); return false;">#33</a></span> 
									<a class="unread" href="viewtopice120.html?p=44005#p44005" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a></strong> &raquo; </span>17 Nov 2015 12:34
			</p>
			
			
			
			<div class="content">56 seconds on my 7 year old Duo Core.  My gosh.  How old are the computers you guys are using?</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44012" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44012">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44012">

						<h3 ><a href="#p44012">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge8bd.html?mode=quote&amp;f=3&amp;p=44012" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic8f39.html?p=44012#p44012" onclick="prompt('Message #34',this.href); return false;">#34</a></span> 
									<a class="unread" href="viewtopic8f39.html?p=44012#p44012" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>17 Nov 2015 15:55
			</p>
			
			
			
			<div class="content">@Aacini<br /><blockquote class="uncited"><div>Yes. Your method fails with numbers as less as 35 or 48. The method iterates on a series of values and in each step it must produce a value less or equal than the previous one, so the method may fail when a next value is greater. I inserted the required IF command, but then realized that the test must not be applied to the first value. I inserted the test from the second value on and cut the loop to 4 cycles, but then realized that in certain cases the result was wrong and it requires an additional step. This means that it needs a total of 6 cycles.<br /></div></blockquote><br />Thanks, now it clear. Don't worry for the 6 iterations... We optimize later when all work.<br /><br />@penpen<br /><blockquote class="uncited"><div>So in your algorithm (using int calculus) you could test if (N-x*x) is greater than or equal to 0;<br />if this is true then sqrt(N)=x, else sqrt(N)=x-1.<br /></div></blockquote><br />It's the same solution proposed by AAcini?<br /><br /><blockquote class="uncited"><div>set &quot;Sqrt(N)=( x=(N)/(11*1024)+40-^!(N)*9, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x+=(((N)-((x-1)*(x-1)+(x+x-1)))&gt;&gt;31))/(1+((N)&gt;&gt;31))&quot;<br /></div></blockquote><br />where end the ) of the block of separator &quot;,&quot; ?<br /><br />Thanks for this solution!<br /><br />@Aacini<br />Very nice the Test. I like it!!!<br />This is necessary.<br /><blockquote class="uncited"><div>set &quot;Sqrt(N)=( M=(N),x=M/(11*1024)+40, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x2=(M/x+x)&gt;&gt;1,x+=-(x2-x-1&gt;&gt;31)*(x2-x) )&quot;<br /></div></blockquote><br />In this moment I don't undestand the difference with penpen method...<br />I will study better.<br /><br />@Squashman<br />For better test empty the environment.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for /f &quot;delims==&quot; %%v in ('set') do set &quot;%%v=&quot;<br /></code></pre></div><br />If there are open applications the time is very different. I have closed and paused the applications that used more CPU.<br />On my celeron @2.00Ghz (The only pc live <img class="smilies" src="images/smilies/icon_sad.gif" alt=":(" title="Sad" /> and this is a present... The money are finished <img class="smilies" src="images/smilies/icon_sad.gif" alt=":(" title="Sad" /> ) take 19 second with empty environment e ReM the set/P<br /><br />EDIT:<br />Not bad for about 90000 sqrt's<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Aacini2 start @ 22:48:12,25<br />Aacini2 end&nbsp; &nbsp;@ 22:48:31,13<br /></code></pre></div><br /><br /><br />Einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44014" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44014">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44014">

						<h3 ><a href="#p44014">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting8876.html?mode=quote&amp;f=3&amp;p=44014" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic918a.html?p=44014#p44014" onclick="prompt('Message #35',this.href); return false;">#35</a></span> 
									<a class="unread" href="viewtopic918a.html?p=44014#p44014" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>17 Nov 2015 18:34
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>einstein1969 wrote:</cite>@penpen<br /><blockquote class="uncited"><div>So in your algorithm (using int calculus) you could test if (N-x*x) is greater than or equal to 0;<br />if this is true then sqrt(N)=x, else sqrt(N)=x-1.<br /></div></blockquote><br />It's the same solution proposed by AAcini?</div></blockquote>I think this is not the case, but i might have missed it:<br />As far as i understand Aacini's algorithm, it performs 6 iterations and chooses the minimal one of the last 2 iterations.<br />My algorithm performs 5 iterations, and then checks if (N &gt; x*x) and then returns x, else it returns (x-1).<br />(The last step equals one iteration if needed, because in this case (signed int 32 bit) ||x-N/x||&lt;=2.)<br /><br /><blockquote><div><cite>einstein1969 wrote:</cite><blockquote class="uncited"><div>set &quot;Sqrt(N)=( x=(N)/(11*1024)+40-^!(N)*9, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x+=(((N)-((x-1)*(x-1)+(x+x-1)))&gt;&gt;31))/(1+((N)&gt;&gt;31))&quot;<br /></div></blockquote><br />where end the ) of the block of separator &quot;,&quot; ?<br /></div></blockquote>It is hard to see, and it simply was a flaw (it was late when i wrote it):<br />set &quot;Sqrt(N)=<span style="color: #FF0000">(</span> x=(N)/(11*1024)+40-^!(N)*9, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x+=(((N)-((x-1)*(x-1)+(x+x-1)))&gt;&gt;31)<span style="color: #FF0000">)</span>/(1+((N)&gt;&gt;31))&quot;<br /><br />If you want, then you could place this <span style="color: #FF0000">)</span> to the end of the formula.<br /><br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44015" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44015">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1322.html?author_id=2988&amp;sr=posts">3970</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Dec 2011 13:59</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content44015">

						<h3 ><a href="#p44015">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc483.html?mode=quote&amp;f=3&amp;p=44015" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopica960.html?p=44015#p44015" onclick="prompt('Message #36',this.href); return false;">#36</a></span> 
									<a class="unread" href="viewtopica960.html?p=44015#p44015" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a></strong> &raquo; </span>17 Nov 2015 19:21
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Squashman wrote:</cite>56 seconds on my 7 year old Duo Core.  My gosh.  How old are the computers you guys are using?</div></blockquote><br />27 seconds on my Quad Core at home.  My Duo Core is the piece of crap that work gave me when I needed a laptop for a new job.  I went from a quad core I5 desktop at work to a old shitty Duo Core.  I told my boss that I would not take the job unless he gave me a laptop the same speed.  Should of had that written into my contract.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44016" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44016">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44016">

						<h3 ><a href="#p44016">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting049c.html?mode=quote&amp;f=3&amp;p=44016" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic3cce.html?p=44016#p44016" onclick="prompt('Message #37',this.href); return false;">#37</a></span> 
									<a class="unread" href="viewtopic3cce.html?p=44016#p44016" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>17 Nov 2015 21:43
			</p>
			
			
			
			<div class="content">This is an excellent example of the reasons because I always give great importance to clear descriptions.<br /><br />First penpen's explanation was a mathematical one. When I saw it I have not much spare time, so I postponed a more detailed study of it for later. However, the phrase in his last explanation is crystal clear: &quot;My algorithm performs 5 iterations, and then checks if (N &gt; x*x) and then returns x, else it returns (x-1)&quot;. I modified my last code using this description; the result is a method 11% faster:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />for /F %%a in ('copy /Z &quot;%~F0&quot; NUL') do set &quot;CR=%%a&quot;<br /><br />rem Aacini's method, optimized using this penpen's description:<br />rem &quot;Perform 5 iterations; if x*x &gt; N decrement x by 1&quot;<br />set &quot;Sqrt(N)=( M=(N),x=M/(11*1024)+40, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x+=(M-x*x)&gt;&gt;31 )&quot;<br /><br />echo Aacini3 start @ %time%<br /><br />&lt; NUL (for /L %%n in (2,1,46340) do (<br /><br />&nbsp; &nbsp;set /P &quot;=%%n!CR!&quot;<br /><br />&nbsp; &nbsp;set /A &quot;Num2=%%n*%%n, Num2M1=Num2-1, NM1=%%n-1&quot;<br /><br />&nbsp; &nbsp;set /A &quot;sqrt=%Sqrt(N):N=Num2M1%&quot;<br />&nbsp; &nbsp;if !sqrt! neq !NM1! echo Aacini failed on %%n- sqrt(!Num2M1!^) = !sqrt!<br />&nbsp; &nbsp;set /A &quot;sqrt=%Sqrt(N):N=Num2%&quot;<br />&nbsp; &nbsp;if !sqrt! neq %%n echo Aacini failed on %%n- sqrt(!Num2!^) = !sqrt!<br /><br />))<br /><br />echo Aacini3 end&nbsp; &nbsp;@ %time%<br /></code></pre></div><br />Output:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Aacini3 start @ 21:21:31.41<br />Aacini3 end&nbsp; &nbsp;@ 21:23:36.12<br /><br />= 2:04.71 minutes<br /></code></pre></div><br />@Squashman: My computer is not an old one, but a <em class="text-italics">very</em> cheap one! <img class="smilies" src="images/smilies/icon_sad.gif" alt=":(" title="Sad" /> <br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44017" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44017">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1322.html?author_id=2988&amp;sr=posts">3970</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Dec 2011 13:59</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content44017">

						<h3 ><a href="#p44017">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting411d.html?mode=quote&amp;f=3&amp;p=44017" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic09ae.html?p=44017#p44017" onclick="prompt('Message #38',this.href); return false;">#38</a></span> 
									<a class="unread" href="viewtopic09ae.html?p=44017#p44017" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist2675.html?mode=viewprofile&amp;u=2988" style="color: #00AA00;" class="username-coloured">Squashman</a></strong> &raquo; </span>18 Nov 2015 07:51
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Aacini wrote:</cite> the result is a method 11% faster:<br /></div></blockquote><br />Yep! Went down to 46 seconds on my Duo Core.  Ten seconds faster!</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44018" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44018">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberliste2cd.html?mode=viewprofile&amp;u=2453" class="username">Ed Dyreen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search0d5e.html?author_id=2453&amp;sr=posts">1497</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 16 May 2011 08:21</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Flanders(Belgium)</dd>
							
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Ed Dyreen">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Ed Dyreen</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://ed-dyreen.ddns.net/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content44018">

						<h3 ><a href="#p44018">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd80a.html?mode=quote&amp;f=3&amp;p=44018" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic1613.html?p=44018#p44018" onclick="prompt('Message #39',this.href); return false;">#39</a></span> 
									<a class="unread" href="viewtopic1613.html?p=44018#p44018" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberliste2cd.html?mode=viewprofile&amp;u=2453" class="username">Ed Dyreen</a></strong> &raquo; </span>18 Nov 2015 08:48
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Squashman wrote:</cite>56 seconds on my 7 year old Duo Core.  My gosh.  How old are the computers you guys are using?<br /></div></blockquote>My virtual Machine is currently running on a dual socket hyper threading Xeon server of about 10 years old that I bought for 30€.<br /><br />I am planning to upgrade it to a quad socket single core Xeon Server with 3PSU's of 400 watts and room for 16 DRR1 slots and room for 16 scsi drives of about 12 years old that I bought for 50€.<br /><br />That's older than my nefue cuz he's only 7 <img class="smilies" src="images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br />I am not a fan of single sockets no matter how many cores as their speed is always limited to the bandwidth of a single socket and that means sharing the limited bandwidth of a single socket between cores, no thanks. Due to the separate pipelines a multi socket can access the memory simultaneously as long as they are not both trying to write to the same address, can't do that with a single socket.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44019" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44019">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44019">

						<h3 ><a href="#p44019">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingced9.html?mode=quote&amp;f=3&amp;p=44019" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic4822.html?p=44019#p44019" onclick="prompt('Message #40',this.href); return false;">#40</a></span> 
									<a class="unread" href="viewtopic4822.html?p=44019#p44019" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Nov 2015 08:53
			</p>
			
			
			
			<div class="content">I didn't use &quot;N-x*x&quot;, but &quot;N-(x-1)*(x-1)-2*x+1&quot; because i suspected the first term to fail for x&gt;46340:<br />I obviously was wrong on that part.<br /><br />Note that i have added the term &quot;/(1+((N)&gt;&gt;31))&quot; to guard against negative N values.<br />The most speed you gained would be lost if you add it (again; which i'm in favour of).<br /><br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44020" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44020">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44020">

						<h3 ><a href="#p44020">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinga4b1.html?mode=quote&amp;f=3&amp;p=44020" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic79e5.html?p=44020#p44020" onclick="prompt('Message #41',this.href); return false;">#41</a></span> 
									<a class="unread" href="viewtopic79e5.html?p=44020#p44020" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>18 Nov 2015 12:06
			</p>
			
			
			
			<div class="content">Another problem on percent expand. I probed to undenstand but i don't have good basic  <img class="smilies" src="images/smilies/icon_confused.gif" alt=":?" title="Confused" /> <br />Why?<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />rem Aacini<br />rem As far as i understand Aacini's algorithm, it performs 6 iterations and chooses the minimal one of the last 2 iterations.<br />set &quot;Sqrt1(N)=( M=(N),x=M/(11*1024)+40, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x2=(M/x+x)&gt;&gt;1,x+=-(x2-x-1&gt;&gt;31)*(x2-x) )&quot;<br /><br /><br />rem penpen<br />rem My algorithm performs 5 iterations, and then checks if (N &gt; x*x) and then returns x, else it returns (x-1).<br />Rem (The last step equals one iteration if needed, because in this case (signed int 32 bit) ||x-N/x||&lt;=2.)<br /><br />set &quot;Sqrt2(N)=( x=(N)/(11*1024)+40-^!(N)*9, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x+=(((N)-((x-1)*(x-1)+(x+x-1)))&gt;&gt;31))/(1+((N)&gt;&gt;31))&quot;<br /><br /><br />(<br />&nbsp; set /A &quot;sqrt1=%Sqrt1(N):N=36%&quot;<br />)<br />(<br />&nbsp; set /A &quot;sqrt2=%Sqrt2(N):N=36%&quot;<br />)<br />echo %sqrt1% %sqrt2%<br />pause<br /></code></pre></div><br />result:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>6 -11<br /></code></pre></div><br /><br />einstein1969</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44021" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44021">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44021">

						<h3 ><a href="#p44021">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting661c.html?mode=quote&amp;f=3&amp;p=44021" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicc20b.html?p=44021#p44021" onclick="prompt('Message #42',this.href); return false;">#42</a></span> 
									<a class="unread" href="viewtopicc20b.html?p=44021#p44021" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Nov 2015 13:09
			</p>
			
			
			
			<div class="content">The delayed expansion is enabled, so this is the expansion:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:: source %Sqrt2(N):N=36%<br />:: initial term<br />x=(N)/(11*1024)+40-^!(N)*9<br />:: %-expansion<br />x=(36)/(11*1024)+40-!(36)*9<br />:: !-expansion<br />x=(36)/(11*1024)+40-(36)*9<br />:: computes to<br />x=-284<br /></code></pre></div><br />The exclamation mark should have been used as the not operator:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>:: source !Sqrt2(N):N=36!<br />:: initial term<br />x=(N)/(11*1024)+40-^!(N)*9<br />:: no %-expansion<br />:: !-expansion<br />x=(36)/(11*1024)+40-!(36)*9<br />:: computes to<br />x=40<br /></code></pre></div><br />Note: Aacini has demonstrated that the &quot;-^!(N)*9&quot; part isn't neccessary anymore.<br /><br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44022" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44022">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44022">

						<h3 ><a href="#p44022">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting26a0.html?mode=quote&amp;f=3&amp;p=44022" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic7e5f.html?p=44022#p44022" onclick="prompt('Message #43',this.href); return false;">#43</a></span> 
									<a class="unread" href="viewtopic7e5f.html?p=44022#p44022" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>18 Nov 2015 13:24
			</p>
			
			
			
			<div class="content">Ok. This is second step for optimizing the sqrt.<br /><br />I developed few days ago and there is the precedent problem of oscillating series of Newton. I have not applicated the solution of penpen and Aacini for the moment.<br /><br />What is the question that i raise?<br /><br />When perform a sqrt the integer/integral part is performed by the precedent developed code <strong class="text-strong">Integer 32 BIT SQRT</strong>. But for normal application is necessary some time the fractional part.<br /><br />In the previus developed code I, dbenham and trebor68 have used the classic schoolar algorithm with good result in term of precision and velocity, but I go down for a <strong class="text-strong">very fast solution</strong>. In this mode the <strong class="text-strong">32bit</strong> of the result can be full of the fractional part.<br /><br />In this i need your help.<br /><br />I introduce a my understud of <strong class="text-strong">FIXED POINT</strong> mathematic.<br /><br />For example the SQRT result can be of the type <strong class="text-strong">5.4</strong>. 5 integral digit plus 4 fractional digit.<br />And the result can be stored in TWO variables or in the same variable at BIT/DECIMAL position different.<br /><br />This is an example of start to compute a sqrt with fractional part using the INTEGER 32bit Sqrt<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />Rem Fixed Point<br />Rem If you have a fractional number, than precalc multiply by EVEN power of 10.<br />Rem es. SQRT(1.2)=SQRT(1.2*100)/10=SQRT(120)/10<br /><br />rem define sqrt<br />set &quot;Sqrt(N)=( x=(N)/(11*1024)+40-^!N*9, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x/=(1+((N)&gt;&gt;31)))&quot;<br /><br />rem es. sqrt 25 with 1 decimal<br />set /A &quot;num=!Sqrt(N):N=25*100!&quot;<br />echo Sqrt(25.0)=%num:~0,-1%.%num:~-1% &amp; echo(<br /><br />rem es. sqrt 28.0<br />set /A &quot;num=!Sqrt(N):N=28*100!&quot;<br />echo Sqrt(28.0)=%num:~0,-1%.%num:~-1% &amp; echo(<br /><br />rem es sqrt 2.0000 (with 4 decimal)<br />set /A &quot;num=!Sqrt(N):N=2*100*100*100*100!&quot;<br />echo Sqrt(2.0000)=%num:~0,-4%.%num:~-4% &amp; echo(<br /></code></pre></div><br />result:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Sqrt(25.0)=5.0<br /><br />Sqrt(28.0)=5.2<br /><br />Sqrt(2.0000)=1.4142<br /></code></pre></div><br /><br />This is limitated because the 32BIT. And the max number of digit rappresentable is 123.4567890 or 12345678.90 and all other combination. EDIT: (my flame:THIS is not TRUE)<br /><br />The best method is get the REMAINDER and continue from there.<br /><br />I have developed in this direction. I get the <strong class="text-strong">integer result</strong> of sqrt and the <strong class="text-strong">Remainder<br /></strong> and I have probed to applicate the Newton iteration!  <img class="smilies" src="images/smilies/icon_cool.gif" alt="8)" title="Cool" /> <br /><br />I introduce the simple mathematic (I'm not an expert...)<br />You can see this example on <a href="http://stackoverflow.com/questions/8894360/finding-square-root-as-float-from-int-and-remainder#" class="postlink">StackOverflow</a> But there isn't the Newton implementation. I done<br /><br />Call the integer sqrt &quot;ISQRT&quot; and &quot;SQRT&quot; is the real/floating point.<br /><br />ISQRT(140)=11<br /><br />140=11^2+19      (19 is the REMAINDER = N-ISQRT(N)*ISQRT(N))  [1]<br /><br />The SQRT(140) = 11,832 that is (11+0.832)<br /><br />that is (11+0.832)^2=140  [2]<br /><br />we need found 0.832 and then rewrite the [2]:<br /><br />(11+x)^2=140<br /><br />expand this : 11^2+2*11*x+x^2=140<br /><br />but if we get the [1] we see that  2*11*x+x^2=19<br /><br />With a guess of 0.5 (0&lt;x&lt;1) iterating via newton we get the fractional part in about <strong class="text-strong">3 iteration</strong>.<br /><br />That is:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code><br />set &quot;Sqrt(N)=( x=(N)/(11*1024)+40-^!N*9, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, x=((N)/x+x)/2, Sqrt_Remai_der=(N)-x*x, x=x )&quot;<br /><br /><br />rem approx via newton<br />rem es. sqrt of 60000<br />set /A &quot;num=!Sqrt(N):N=60000!&quot;<br />echo Sqrt(60000)=%num% Remainder=%Sqrt_Remai_der% &amp; echo(<br /><br />echo 2*%num%*x+x*x-%Sqrt_Remai_der%=0<br />rem set /A approx=0.5-(0.25+2*num/2-Sqrt_Remai_der)/(2*0.5+2*num) &amp; rem guess=0.5<br />rem set /A approx=0.5*1000-(0.25*1000+2*num/2*1000-Sqrt_Remai_der*1000)/(2*0.5+2*num) &amp; rem guess=0.5<br />set /A approx=500-(250+2*num/2*1000-Sqrt_Remai_der*1000)/(1+2*num)<br />For /L %%I in (1,1,2) do set /A approx=approx-(approx*approx/1000+2*num*approx-Sqrt_Remai_der*1000)*1/(2*approx/1000+2*num)<br />echo Sqrt(60000)=%num%.%approx%&nbsp; approx.&nbsp; (244.948...) &amp; echo(<br /><br />rem es. sqrt of 2<br />set /A &quot;num=!Sqrt(N):N=2!&quot;<br />echo Sqrt(2)=%num% Remainder=%Sqrt_Remai_der% &amp; echo(<br /><br />echo 2*%num%*x+x*x-%Sqrt_Remai_der%=0<br />set /A approx=500-(250+2*num/2*1000-Sqrt_Remai_der*1000)/(1+2*num)<br />For /L %%I in (1,1,2) do set /A approx=approx-(approx*approx/1000+2*num*approx-Sqrt_Remai_der*1000)*1/(2*approx/1000+2*num)<br />echo Sqrt(2)=%num%.%approx%&nbsp; &nbsp; (1.414...) &amp; echo(<br /><br />rem es. sqrt of 3<br />set /A &quot;num=!Sqrt(N):N=3!&quot;<br />echo Sqrt(3)=%num% Remainder=%Sqrt_Remai_der% &amp; echo(<br /><br />echo 2*%num%*x+x*x-%Sqrt_Remai_der%=0<br />set /A approx=500-(250+2*num/2*1000-Sqrt_Remai_der*1000)/(1+2*num)<br />For /L %%I in (1,1,2) do set /A approx=approx-(approx*approx/1000+2*num*approx-Sqrt_Remai_der*1000)*1/(2*approx/1000+2*num)<br />echo Sqrt(3)=%num%.%approx%&nbsp; &nbsp; (1.732...) &amp; echo(<br /><br />rem es. sqrt of 2147483647<br />set /A &quot;num=!Sqrt(N):N=2147483647!&quot;<br />echo Sqrt(2147483647)=%num% Remainder=%Sqrt_Remai_der% &amp; echo(<br /><br />echo 2*%num%*x+x*x-%Sqrt_Remai_der%=0<br />set /A approx=500-(250+2*num/2*1000-Sqrt_Remai_der*1000)/(1+2*num)<br />For /L %%I in (1,1,2) do set /A approx=approx-(approx*approx/1000+2*num*approx-Sqrt_Remai_der*1000)*1/(2*approx/1000+2*num)<br />echo Sqrt(2147483647)=%num%.%approx%&nbsp; &nbsp; (46340.950...) &amp; echo(<br /><br />rem es. sqrt of 65535<br />set /A &quot;num=!Sqrt(N):N=65535!&quot;<br />echo Sqrt(65535)=%num% Remainder=%Sqrt_Remai_der% &amp; echo(<br /><br />echo 2*%num%*x+x*x-%Sqrt_Remai_der%=0<br />set /A approx=500-(250+2*num/2*1000-Sqrt_Remai_der*1000)/(1+2*num)<br />For /L %%I in (1,1,2) do set /A approx=approx-(approx*approx/1000+2*num*approx-Sqrt_Remai_der*1000)*1/(2*approx/1000+2*num)<br />echo Sqrt(65535)=%num%.%approx%&nbsp; &nbsp; (255.998...) &amp; echo(<br /><br />Rem Patching<br /></code></pre></div><br /><br />And we get the error at 65535 with the <strong class="text-strong">REMAINDER=-1</strong><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Sqrt(2)=1 Remainder=1<br /><br />2*1*x+x*x-1=0<br />Sqrt(2)=1.414&nbsp; &nbsp; (1.414...)<br /><br />Sqrt(3)=1 Remainder=2<br /><br />2*1*x+x*x-2=0<br />Sqrt(3)=1.732&nbsp; &nbsp; (1.732...)<br /><br />Sqrt(2147483647)=46340 Remainder=88047<br /><br />2*46340*x+x*x-88047=0<br />Sqrt(2147483647)=46340.950&nbsp; &nbsp; (46340.950...)<br /><br />Sqrt(65535)=256 Remainder=-1<br /><br />2*256*x+x*x--1=0<br />Sqrt(65535)=256.-1&nbsp; &nbsp; (255.998...)</code></pre></div><br /><br /><br />I have not patched at the moment. I need a confirm by you if the error is the same<br /><br />@penpen<br />I can't understund how to patch the ! problem in the percent expansion... I will go down the iteration from 5 to 4 or 3<br /><br />EDIT: added the definition of ISQRT with remainder. Not optimized.<br />EDIT2: correct explain on ISQRT(140)<br /><br />Einstein1969</div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 18 Nov 2015 14:45, edited 6 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44023" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile44023">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberliste2cd.html?mode=viewprofile&amp;u=2453" class="username">Ed Dyreen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search0d5e.html?author_id=2453&amp;sr=posts">1497</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 16 May 2011 08:21</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Flanders(Belgium)</dd>
							
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Ed Dyreen">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Ed Dyreen</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://ed-dyreen.ddns.net/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content44023">

						<h3 ><a href="#p44023">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9363.html?mode=quote&amp;f=3&amp;p=44023" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic57b4.html?p=44023#p44023" onclick="prompt('Message #44',this.href); return false;">#44</a></span> 
									<a class="unread" href="viewtopic57b4.html?p=44023#p44023" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberliste2cd.html?mode=viewprofile&amp;u=2453" class="username">Ed Dyreen</a></strong> &raquo; </span>18 Nov 2015 14:03
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>penpen wrote:</cite>The exclamation mark should have been used as the not operator:<br /></div></blockquote>Bizarre, it is missing from the set /? help. from a simple test I assume that ! only executes if the operand NEQ the operated<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\profSys\ADMIN&gt;set /a x=(36)-(35)<br />1<br />C:\profSys\ADMIN&gt;set /a x=(36)-!(35)<br />36<br /></code></pre></div>Is this a correct interpretation and why is it not listed under set /? while the operator &amp; clearly is ??</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p44025" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile44025">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1bf7.html?author_id=4915&amp;sr=posts">1612</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 23 Jun 2013 06:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Germany</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content44025">

						<h3 ><a href="#p44025">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingbe0c.html?mode=quote&amp;f=3&amp;p=44025" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic7a91.html?p=44025#p44025" onclick="prompt('Message #45',this.href); return false;">#45</a></span> 
									<a class="unread" href="viewtopic7a91.html?p=44025#p44025" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfcd5.html?mode=viewprofile&amp;u=4915" style="color: #00AA00;" class="username-coloured">penpen</a></strong> &raquo; </span>18 Nov 2015 15:15
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>einstein1969 wrote:</cite>@penpen<br />I can't understund how to patch the ! problem in the percent expansion... I will go down the iteration from 5 to 4 or 3</div></blockquote>If you want to create a function, that works with both &quot;%&quot;-expansion and &quot;!&quot;-expansion, then i think:<br />This is impossible.<br /><br />You would have to escape the exclamation mark &quot;^^^!&quot; if you want the correct result using &quot;%sqrt2(N):N=36%&quot;;<br />but then you lose the correct function of &quot;!sqrt2(N):N=36!&quot; because the tilde character is interpreted as XOR.<br /><br /><br />Sidenote:<br />If you want an sqrt with as many decimal digits as possible, you should use another algorithm.<br />I cannot remember the name, but maybe i could find a link.<br />(This algorithm probably is slower, but computes a digit every iteration.)<br /><br /><blockquote><div><cite>Ed Dyreen wrote:</cite>Bizarre, it is missing from the set /? help.</div></blockquote>It is present (but not explained) in the <a href="https://technet.microsoft.com/de-de/library/cc754250(v=ws.10).aspx" class="postlink">technet page</a> listed as unary operator:<br />If N equals 0 then !N equals 1, else 0.<br /><br /><br />penpen</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingdac0.html?mode=reply&amp;f=3&amp;t=5819" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic1b28.html?f=3&amp;t=5819&amp;start=30&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=5819&amp;start=30">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			59 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopic8d84.html?f=3&amp;t=5819" role="button">1</a></li>
				<li><a class="button" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" role="button">2</a></li>
			<li class="active"><span>3</span></li>
				<li><a class="button" href="viewtopic261a.html?f=3&amp;t=5819&amp;start=45" role="button">4</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopic261a.html?f=3&amp;t=5819&amp;start=45" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron5089.gif?cron_type=cron.task.text_reparser.post_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?p=44025 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:05:27 GMT -->
</html>
