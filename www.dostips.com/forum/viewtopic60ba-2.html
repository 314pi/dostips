<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=3968&p=38700 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:48:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>FComp.bat: Reformating FC output to get better info - DosTips.com</title>


	<link rel="canonical" href="viewtopicc518-2.html?t=3968">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic8573.html?f=3&amp;t=3968">FComp.bat: Reformating FC output to get better info</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="posting2f5a-2.html?mode=reply&amp;f=3&amp;t=3968" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic54cd.html?f=3&amp;t=3968&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="3968" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			5 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p21764" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile21764">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content21764">

						<h3 class="first"><a href="#p21764">FComp.bat: Reformating FC output to get better info</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd39d.html?mode=quote&amp;f=3&amp;p=21764" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic1fb9.html?p=21764#p21764" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopic1fb9.html?p=21764#p21764" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>10 Nov 2012 22:26
			</p>
			
			
			
			<div class="content">FC.EXE program is one of the most used DOS commands; however, it's output is confusing and annoying and always require an additional effort to make the most of it. If a mismatched section is too large, screen output is just useless so it is customary to redirect FC output to a file and then open the file in order to make good use of the result. I need to use FC in my everyday job, so I frequently complained about it... Until now!<br /><br />I wrote a Batch program that take FC output and rearrange it in a way that is much more pleasant to read. The program identify new sections added between two lines of original file, or sections deleted from original file, or sections that was modified in any other way (updated) and display them in a format that allows you to identify each case in an easy way. When a section is updated the old and new versions are displayed side by side, so they can be easily compared.<br /><br />Cool! <img class="smilies" src="images/smilies/icon_cool.gif" alt="8)" title="Cool" /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />rem FComp.bat: Format FC output in a pleasant way<br />rem Antonio Perez Ayala - Nov/10/2012<br /><br />if &quot;%~2&quot; neq &quot;&quot; goto begin<br />echo Format FC output identifying added, deleted or modified sections<br />echo/<br />echo FCOMP same parameters and switches of FC command<br />goto :EOF<br /><br />:begin<br /><br />set while=if not<br />set&nbsp; &nbsp;and=if not<br />set do=goto endwhile<br />set endwhile=goto while<br />set break=goto endwhile<br /><br />set &quot;spaces39=&quot;<br />for /L %%i in (1,1,39) do set &quot;spaces39=!spaces39! &quot;<br />set params=%*<br />set &quot;cutNumber=&quot;<br />if &quot;!params:/N=!&quot; neq &quot;!params!&quot; set &quot;cutNumber=:~8&quot;<br />fc %* &gt; differences.txt<br />if %errorlevel% equ 0 (<br />&nbsp; &nbsp;echo FComp: no differences encountered<br />) else (<br />&nbsp; &nbsp;call :FormatFCOutput &lt; differences.txt<br />)<br />del differences.txt<br />goto :EOF<br /><br /><br />:FormatFCOutput<br /><br />set /P line=<br />echo %line%<br />set /P line=<br />:while&nbsp; There is another set of differences<br />%while% defined line %do%<br /><br />&nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp;set old=0<br />&nbsp; &nbsp;:while1&nbsp; There is another line in this old section<br />&nbsp; &nbsp;%while% &quot;!line:~0,5!&quot; neq &quot;*****&quot; %do%1<br /><br />&nbsp; &nbsp; &nbsp; set /A old+=1<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine&#91;%old%&#93;=!line!&quot;<br />&nbsp; &nbsp; &nbsp; :while1.5&nbsp; PATCH FOR FC GLITCH: Concatenate next line while current is 127 chars. long<br />&nbsp; &nbsp; &nbsp; %while% defined line&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;%do%1.5<br />&nbsp; &nbsp; &nbsp; &nbsp; %and% &quot;!line:~126,1!&quot; neq &quot;&quot; %do%1.5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or until this set of differences ends<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;!line:~0,5!&quot; equ &quot;*****&quot; %break%1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;oldLine&#91;%old%&#93;=!oldLine&#91;%old%&#93;!!line%cutNumber%!&quot;<br />&nbsp; &nbsp; &nbsp; %endwhile%1.5<br />&nbsp; &nbsp; &nbsp; :endwhile1.5<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine&#91;%old%&#93;=!oldLine&#91;%old%&#93;! &quot;<br />&nbsp; &nbsp; &nbsp; set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; set /P line=<br />&nbsp; &nbsp;%endwhile%1<br />&nbsp; &nbsp;:endwhile1<br /><br />&nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp;set new=0<br />&nbsp; &nbsp;:while2&nbsp; There is another line in this new section<br />&nbsp; &nbsp;%while% &quot;!line:~0,5!&quot; neq &quot;*****&quot; %do%2<br /><br />&nbsp; &nbsp; &nbsp; set /A new+=1<br />&nbsp; &nbsp; &nbsp; set &quot;newLine&#91;%new%&#93;=!line!&quot;<br />&nbsp; &nbsp; &nbsp; :while2.5&nbsp; PATCH FOR FC GLITCH: Concatenate next line while current is 127 chars. long<br />&nbsp; &nbsp; &nbsp; %while% defined line&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;%do%2.5<br />&nbsp; &nbsp; &nbsp; &nbsp; %and% &quot;!line:~126,1!&quot; neq &quot;&quot; %do%2.5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or until this set of differences ends<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;!line:~0,5!&quot; equ &quot;*****&quot; %break%2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;newLine&#91;%new%&#93;=!newLine&#91;%new%&#93;!!line%cutNumber%!&quot;<br />&nbsp; &nbsp; &nbsp; %endwhile%2.5<br />&nbsp; &nbsp; &nbsp; :endwhile2.5<br />&nbsp; &nbsp; &nbsp; set &quot;newLine&#91;%new%&#93;=!newLine&#91;%new%&#93;! &quot;<br />&nbsp; &nbsp; &nbsp; set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; set /P line=<br />&nbsp; &nbsp;%endwhile%2<br />&nbsp; &nbsp;:endwhile2<br /><br />&nbsp; &nbsp;rem Identify the type of this set<br />&nbsp; &nbsp;echo/<br />&nbsp; &nbsp;rem PATCH FOR FC GLITCH: If both versions are size 2, it is a modified section<br />&nbsp; &nbsp;set /A &quot;oldEqu2_And_NewNeq2=^!(old-2)*(new-2), newEqu2_And_OldNeq2=^!(new-2)*(old-2)&quot;<br />&nbsp; &nbsp;if %old% equ 0 (<br />&nbsp; &nbsp; &nbsp; echo ======&nbsp; NEW SECTION ADDED AT END OF FILE&nbsp; =====================================<br />&nbsp; &nbsp; &nbsp; echo/<br />&nbsp; &nbsp; &nbsp; for /L %%i in (1,1,!new!) do echo +&nbsp; &nbsp; &nbsp; &nbsp;^|!newLine&#91;%%i&#93;:~0,70!<br />&nbsp; &nbsp;) else if %new% equ 0 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo OLD SECTION DELETED AT END OF FILE&nbsp; ===========================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,!old!) do echo -!oldLine&#91;%%i&#93;:~0,78!<br />&nbsp; &nbsp;) else if %oldEqu2_And_NewNeq2% neq 0 (<br />&nbsp; &nbsp; &nbsp; call :getBothLines&#91;1&#93;<br />&nbsp; &nbsp; &nbsp; if &quot;!oldLine!&quot; equ &quot;!newLine!&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo ======&nbsp; NEW SECTION ADDED&nbsp; ====================================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo(!oldLine&#91;1&#93;:~0,79!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A new-=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (2,1,!new!) do echo +&nbsp; &nbsp; &nbsp; &nbsp;^|!newLine&#91;%%i&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo(!oldLine&#91;2&#93;:~0,79!<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo ======&nbsp; NEW SECTION ADDED AT BEGINNING OF FILE&nbsp; ===============================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A new-=2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,!new!) do echo +&nbsp; &nbsp; &nbsp; &nbsp;^|!newLine&#91;%%i&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else if %newEqu2_And_OldNeq2% neq 0 (<br />&nbsp; &nbsp; &nbsp; call :getBothLines&#91;1&#93;<br />&nbsp; &nbsp; &nbsp; if &quot;!oldLine!&quot; equ &quot;!newLine!&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo OLD SECTION DELETED&nbsp; ==========================================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo ---------!newLine&#91;1&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A old-=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (2,1,!old!) do echo -!oldLine&#91;%%i&#93;:~0,78!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo ---------!newLine&#91;2&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo OLD SECTION DELETED AT BEGINNING OF FILE&nbsp; =====================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A old-=2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,!old!) do echo -!oldLine&#91;%%i&#93;:~0,78!<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; echo ==============================&nbsp; SECTION MODIFIED&nbsp; =============================<br />&nbsp; &nbsp; &nbsp; echo/<br />&nbsp; &nbsp; &nbsp; if %old% lss %new% (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,%old%) do call :showBothLines %%i<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A old+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (!old!,1,%new%) do call :showNewLine %%i<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,%new%) do call :showBothLines %%i<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A new+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (!new!,1,%old%) do call :showOldLine %%i<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;rem Pass to next set of differences<br />&nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp;set /P line=<br />%endwhile%<br />:endwhile<br />exit /B<br /><br /><br />:getBothLines&#91;1&#93;<br />set &quot;oldLine=!oldLine&#91;1&#93;%cutNumber%!&quot;<br />set &quot;newLine=!newLine&#91;1&#93;%cutNumber%!&quot;<br />exit /B<br /><br /><br />:showBothLines i<br />set &quot;oldLine=!oldLine&#91;%1&#93;!%spaces39%&quot;<br />echo !oldLine:~0,39!^|!newLine&#91;%1&#93;:~0,39!<br />set &quot;oldLine=!oldLine&#91;%1&#93;:~39,-1!&quot;<br />if defined oldLine (<br />&nbsp; &nbsp;set definedOldLine=TRUE<br />&nbsp; &nbsp;if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set &quot;separator=&amp;&quot;<br />) else (<br />&nbsp; &nbsp;set definedOldLine=FALSE<br />&nbsp; &nbsp;set oldLine=%spaces39%<br />&nbsp; &nbsp;set &quot;separator=&gt;&quot;<br />)<br />set &quot;newLine=!newLine&#91;%1&#93;:~39,-1!&quot;<br />:while3&nbsp; Show a long new line at right side, old line or spaces at left side<br />%while% defined newLine %do%3<br />&nbsp; &nbsp;if &quot;!newLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=%spaces39%!newLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=!newLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo !oldLine:~0,39!!separator!!newLine:~0,39!<br />&nbsp; &nbsp;if %definedOldLine% equ TRUE set &quot;oldLine=!oldLine:~39!&quot;<br />&nbsp; &nbsp;if defined oldLine (<br />&nbsp; &nbsp; &nbsp; if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; set definedOldLine=FALSE<br />&nbsp; &nbsp; &nbsp; set oldLine=%spaces39%<br />&nbsp; &nbsp; &nbsp; set &quot;separator=&gt;&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set &quot;newLine=!newLine:~39!&quot;<br />%endwhile%3<br />:endwhile3<br />if %definedOldLine% neq TRUE set oldLine=<br />:while4&nbsp; Show the rest of a long old line at left side<br />%while% defined oldLine %do%4<br />&nbsp; &nbsp;if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo !oldLine:~0,39!^&lt;<br />&nbsp; &nbsp;set &quot;oldLine=!oldLine:~39!&quot;<br />%endwhile%4<br />:endwhile4<br />exit /B<br /><br /><br />:showNewLine i<br />echo %spaces39%^|!newLine&#91;%1&#93;:~0,39!<br />set &quot;newLine=!newLine&#91;%1&#93;:~39,-1!&quot;<br />:while5&nbsp; Show a long new line at right side, spaces at left side<br />%while% defined newLine %do%5<br />&nbsp; &nbsp;if &quot;!newLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=%spaces39%!newLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=!newLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo %spaces39%^&gt;!newLine:~0,39!<br />&nbsp; &nbsp;set &quot;newLine=!newLine:~39!&quot;<br />%endwhile%5<br />:endwhile5<br />exit /B<br /><br /><br />:showOldLine i<br />echo(!oldLine&#91;%1&#93;:~0,39!<br />set &quot;oldLine=!oldLine&#91;%1&#93;:~39,-1!&quot;<br />:while6&nbsp; Show a long old line at left side<br />%while% defined oldLine %do%6<br />&nbsp; &nbsp;if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo !oldLine:~0,39!^&lt;<br />&nbsp; &nbsp;set &quot;oldLine=!oldLine:~39!&quot;<br />%endwhile%6<br />:endwhile6<br />exit /B<br /></code></pre></div><br />FComp.bat is designed to meet most FC output details and glitches. For example, FC command split long output lines every 127 characters and lost the character at position 128 in each division, so I had to insert a patch to manage this situation. Occasionally the initial line of an updated section is not the same in both versions; if the resulting section is only 2 lines long it may be erroneously reported as an added or deleted section, so I had to manage this particular case with special code again. Anyway, I am afraid that my program will make mistakes now and then, but I am tired of made endless tests and the program grew too much already.<br /><br />To use FComp.bat place the same FC parameters and switches in the usual way. In this case, /N switch (numbered lines) could be very useful.<br /><br />For example, this is the output of <strong class="text-strong">FComp OriginalPost.txt ModifiedPost.txt</strong>:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Comparing files OriginalPost.txt and MODIFIEDPOST.TXT<br /><br />==============================&nbsp; SECTION UPDATED&nbsp; ==============================<br /><br />you to identify each case in an easy wa|you to identify each case in an easy wa<br />y. When a section is updated the old an&amp;y. When a section is updated the old an<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;d &amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;d<br />new versions are displayed side by side|new versions are displayed side by side<br />&nbsp; &nbsp; &nbsp; , so they can be easily compared.&amp;&nbsp; , so they can be easily compared. Of<br />Cool! 8)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|course, this feature requires to cut ea<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;ch section at half the screen, but if a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ny<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|input line is longer then the rest of t<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp;he line(s) will be displayed in<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|additional screen lines 39 characters l<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ong.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|Cool! 8)<br /><br />======&nbsp; NEW SECTION ADDED AT END OF FILE&nbsp; =====================================<br /><br />+&nbsp; &nbsp; &nbsp; &nbsp;|<br />+&nbsp; &nbsp; &nbsp; &nbsp;|You may use /1 FC switch for a finer isolating of mismatched sections<br />+&nbsp; &nbsp; &nbsp; &nbsp;|(the default is /2). This way, two deleted sections separated by 2<br />+&nbsp; &nbsp; &nbsp; &nbsp;|lines (instead of 3 by default) will be reported as two deleted<br />+&nbsp; &nbsp; &nbsp; &nbsp;|sections instead of one large updated section, for example. However,<br />+&nbsp; &nbsp; &nbsp; &nbsp;|in this case several updated sections separated by just one line will<br />+&nbsp; &nbsp; &nbsp; &nbsp;|be reported separately with the same ending-beginning lines instead of<br />+&nbsp; &nbsp; &nbsp; &nbsp;|as just one large updated section. You may tune up this parameter to<br />+&nbsp; &nbsp; &nbsp; &nbsp;|fit your needs.<br /></code></pre></div><br /><br />Antonio</div>

			
													<div class="notice">
					Last edited by <a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a> on 05 May 2014 12:25, edited 3 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p21790" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile21790">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content21790">

						<h3 ><a href="#p21790">Re: FComp.bat: Reformating FC output to get better info</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting4437.html?mode=quote&amp;f=3&amp;p=21790" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic21bb.html?p=21790#p21790" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopic21bb.html?p=21790#p21790" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>12 Nov 2012 18:38
			</p>
			
			
			
			<div class="content">I slightly modified FComp.bat program above to get FC parameters and switches in the original order; I think it is simpler this way. I also made a couple cosmetic changes. This is the output of <strong class="text-strong">FComp /N /W FComp.OLD FComp.bat</strong>:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Comparing files FComp.OLD and FCOMP.BAT<br /><br />==============================&nbsp; SECTION UPDATED&nbsp; ==============================<br /><br />&nbsp; &nbsp; 7:&nbsp; echo/&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; 7:&nbsp; echo/<br />&nbsp; &nbsp; 8:&nbsp; echo FCOMP filename1 filename2 |&nbsp; &nbsp; 8:&nbsp; echo FCOMP same parameters and<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#91;FC switches&#93;&amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;switches of FC command<br />&nbsp; &nbsp; 9:&nbsp; goto :EOF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; 9:&nbsp; goto :EOF<br /><br />======&nbsp; NEW SECTION ADDED&nbsp; ====================================================<br /><br />&nbsp; &nbsp;13:&nbsp; set while=if not<br />+&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;14:&nbsp; set&nbsp; &nbsp;and=if not<br />&nbsp; &nbsp;14:&nbsp; set do=goto endwhile<br /><br />==============================&nbsp; SECTION UPDATED&nbsp; ==============================<br /><br />&nbsp; &nbsp;20:&nbsp; if &quot;%params: /N=%&quot; neq &quot;%params|&nbsp; &nbsp;21:&nbsp; if &quot;%params: /N=%&quot; neq &quot;%params<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;%&quot; set numbersInLines=TRUE&amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;%&quot; set numbersInLines=TRUE<br />&nbsp; &nbsp;21:&nbsp; fc %3 %4 %5 %6 %7 %8 %9 %1 %2 &gt;|&nbsp; &nbsp;22:&nbsp; fc %* &gt; differences.txt<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; differences.txt&lt;<br />&nbsp; &nbsp;22:&nbsp; if %errorlevel% equ 0 echo FC: |&nbsp; &nbsp;23:&nbsp; if %errorlevel% equ 0 echo FC:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;no differences encountered&amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;no differences encountered<br /><br />==============================&nbsp; SECTION UPDATED&nbsp; ==============================<br /><br />&nbsp; &nbsp;41:&nbsp; &nbsp; &nbsp; &nbsp; %while% defined line %do%|&nbsp; &nbsp;42:&nbsp; &nbsp; &nbsp; &nbsp; %while% defined line<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.5&amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; %do%1.5<br />&nbsp; &nbsp;42:&nbsp; &nbsp; &nbsp; &nbsp; %while% &quot;!line:~126,1!&quot; n|&nbsp; &nbsp;43:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; %and% &quot;!line:~126,1!&quot; n<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eq &quot;&quot; %do%1.5&amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eq &quot;&quot; %do%1.5<br />&nbsp; &nbsp;43:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set line=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;44:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set line=<br /><br />==============================&nbsp; SECTION UPDATED&nbsp; ==============================<br /><br />&nbsp; &nbsp;61:&nbsp; &nbsp; &nbsp; &nbsp; %while% defined line %do%|&nbsp; &nbsp;62:&nbsp; &nbsp; &nbsp; &nbsp; %while% defined line<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.5&amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; %do%2.5<br />&nbsp; &nbsp;62:&nbsp; &nbsp; &nbsp; &nbsp; %while% &quot;!line:~126,1!&quot; n|&nbsp; &nbsp;63:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; %and% &quot;!line:~126,1!&quot; n<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eq &quot;&quot; %do%2.5&amp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eq &quot;&quot; %do%2.5<br />&nbsp; &nbsp;63:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set line=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;64:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set line=<br /></code></pre></div><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p38700" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile38700">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content38700">

						<h3 ><a href="#p38700">Re: FComp.bat: Reformating FC output to get better info</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting7964.html?mode=quote&amp;f=3&amp;p=38700" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicbd67.html?p=38700#p38700" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopicbd67.html?p=38700#p38700" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>15 Dec 2014 21:44
			</p>
			
			
			
			<div class="content">I have modified the original FComp.bat program in order to get just <em class="text-italics">the modifications</em> of the first file when it is compared vs the second one. This data may serve to obtain the new version of a certain file when the modifications are applied to original file via the new Update-Rollback.bat program. This way, when several versions of a file needs to be posted, these two programs allows to post just the first version of the file and all the necessary modifications files. If the base file is big, this method may save a large amount of space.<br /><br />The method may also be used in the opposite direction: post only <em class="text-italics">the last version</em> of a file and post also a modifications file in the reverse direction that allows to <em class="text-italics">roll back</em> to the previous version. This method is convenient if the last version is the important one, but allows to recover previous versions if they are needed for any reason. For further details, execute Update-Rollback.bat program with no parameters.<br /><br />This is the new version of <strong class="text-strong">FComp.bat</strong> program with /Modifications switch:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />rem FComp.bat: Format FC output in a pleasant way<br />rem Antonio Perez Ayala<br /><br />rem Nov/10/2012 - First version<br />rem Dec/15/2014 - /M switch create a Modifications file for Update-Rollback.bat program<br /><br />if &quot;%~2&quot; neq &quot;&quot; goto begin<br />echo Format FC output identifying added, deleted and modified sections<br />echo/<br />echo FCOMP &#91;/M&#93; same parameters and switches of FC command<br />echo/<br />echo&nbsp; &nbsp; /M&nbsp; create Modifications file. If this switch is included,<br />echo&nbsp; &nbsp; &nbsp; &nbsp; the rest of switches must be moved to end of command:<br />echo&nbsp; &nbsp; &nbsp; &nbsp; FCOMP /M firstFile secondFile switches...<br />echo/<br />echo A Modifications file serve to obtain a new version file when it is applied to<br />echo previous version via Update-Rollback.bat program.<br />goto :EOF<br /><br />:begin<br /><br />set while=if not<br />set&nbsp; &nbsp;and=if not<br />set do=goto endwhile<br />set endwhile=goto while<br />set break=goto endwhile<br /><br />set &quot;spaces39=&quot;<br />for /L %%i in (1,1,39) do set &quot;spaces39=!spaces39! &quot;<br />set params=%*<br />set &quot;Mswitch=&quot;<br />set &quot;number=&quot;<br />if &quot;!params:/M =!&quot; neq &quot;!params!&quot; (<br />&nbsp; &nbsp;set &quot;Mswitch=true&quot;<br />&nbsp; &nbsp;set &quot;params=!params:/M =/N !&quot;<br />&nbsp; &nbsp;set &quot;number=:~0,5&quot;<br />&nbsp; &nbsp;set lastOldLine=0<br />&nbsp; &nbsp;for /F %%a in ('find /C /V &quot;&quot; ^&lt; &quot;%~2&quot;') do set /A &quot;lastFileLine=%%a, lastFileLineP1=%%a+1&quot;<br />&nbsp; &nbsp;set &quot;mods=&quot;<br />&nbsp; &nbsp;set badOld=&quot;%~N2.log&quot;<br />&nbsp; &nbsp;set badNew=&quot;%~N3.log&quot;<br />&nbsp; &nbsp;del !badOld! !badNew! 2&gt; NUL<br />)<br />set &quot;cutNumber=&quot;<br />if &quot;!params:/N =!&quot; neq &quot;!params!&quot; set &quot;cutNumber=:~8&quot;<br />fc !params! &gt; differences.tmp<br />if %errorlevel% equ 0 (<br />&nbsp; &nbsp;echo FComp: no differences encountered<br />) else (<br />&nbsp; &nbsp;call :FormatFCOutput &lt; differences.tmp<br />)<br />del differences.tmp<br />goto :EOF<br /><br /><br />:FormatFCOutput<br /><br />set /P line=<br />if not defined Mswitch echo %line%<br />set /P line=<br />:while&nbsp; There is another set of differences<br />%while% defined line %do%<br /><br />&nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp;set old=0<br />&nbsp; &nbsp;:while1&nbsp; There is another line in this old section<br />&nbsp; &nbsp;%while% &quot;!line:~0,5!&quot; neq &quot;*****&quot; %do%1<br /><br />&nbsp; &nbsp; &nbsp; set /A old+=1<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine&#91;%old%&#93;=!line!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;badLine=&quot;<br />&nbsp; &nbsp; &nbsp; :while1.5&nbsp; PATCH FOR FC GLITCH: Concatenate next line while current is 127 chars. long<br />&nbsp; &nbsp; &nbsp; %while% defined line&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;%do%1.5<br />&nbsp; &nbsp; &nbsp; &nbsp; %and% &quot;!line:~126,1!&quot; neq &quot;&quot; %do%1.5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or until this set of differences ends<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;!line:~0,5!&quot; equ &quot;*****&quot; %break%1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;oldLine&#91;%old%&#93;=!oldLine&#91;%old%&#93;!!line%cutNumber%!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;badLine=true&quot;<br />&nbsp; &nbsp; &nbsp; %endwhile%1.5<br />&nbsp; &nbsp; &nbsp; :endwhile1.5<br />&nbsp; &nbsp; &nbsp; if defined badLine if defined MSwitch echo !oldLine&#91;%old%&#93;!&gt;&gt; !badOld!<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine&#91;%old%&#93;=!oldLine&#91;%old%&#93;! &quot;<br />&nbsp; &nbsp; &nbsp; set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; set /P line=<br />&nbsp; &nbsp;%endwhile%1<br />&nbsp; &nbsp;:endwhile1<br /><br />&nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp;set new=0<br />&nbsp; &nbsp;:while2&nbsp; There is another line in this new section<br />&nbsp; &nbsp;%while% &quot;!line:~0,5!&quot; neq &quot;*****&quot; %do%2<br /><br />&nbsp; &nbsp; &nbsp; set /A new+=1<br />&nbsp; &nbsp; &nbsp; set &quot;newLine&#91;%new%&#93;=!line!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;badLine=&quot;<br />&nbsp; &nbsp; &nbsp; :while2.5&nbsp; PATCH FOR FC GLITCH: Concatenate next line while current is 127 chars. long<br />&nbsp; &nbsp; &nbsp; %while% defined line&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;%do%2.5<br />&nbsp; &nbsp; &nbsp; &nbsp; %and% &quot;!line:~126,1!&quot; neq &quot;&quot; %do%2.5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or until this set of differences ends<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;!line:~0,5!&quot; equ &quot;*****&quot; %break%2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;newLine&#91;%new%&#93;=!newLine&#91;%new%&#93;!!line%cutNumber%!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;badLine=true&quot;<br />&nbsp; &nbsp; &nbsp; %endwhile%2.5<br />&nbsp; &nbsp; &nbsp; :endwhile2.5<br />&nbsp; &nbsp; &nbsp; if defined badLine if defined MSwitch echo !newLine&#91;%new%&#93;!&gt;&gt; !badNew!<br />&nbsp; &nbsp; &nbsp; set &quot;newLine&#91;%new%&#93;=!newLine&#91;%new%&#93;! &quot;<br />&nbsp; &nbsp; &nbsp; set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; set /P line=<br />&nbsp; &nbsp;%endwhile%2<br />&nbsp; &nbsp;:endwhile2<br /><br />&nbsp; &nbsp;rem Identify the type of this set<br /><br />&nbsp; &nbsp;if not defined Mswitch echo/<br />&nbsp; &nbsp;rem PATCH FOR FC GLITCH: If both versions are size 2, it is a modified section<br />&nbsp; &nbsp;set /A &quot;oldEqu2_And_NewNeq2=^!(old-2)*(new-2), newEqu2_And_OldNeq2=^!(new-2)*(old-2)&quot;<br />&nbsp; &nbsp;if %old% equ 0 (<br />&nbsp; &nbsp; &nbsp; if not defined Mswitch (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo ======&nbsp; NEW SECTION ADDED AT END OF FILE&nbsp; =====================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,%new%) do echo +&nbsp; &nbsp; &nbsp; &nbsp;^|!newLine&#91;%%i&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;call :checkOldRange %lastFileLineP1%<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo !mods!+%new%<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,%new%) do echo !newLine&#91;%%i&#93;!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;mods=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=.&quot; &lt; NUL &gt; CON<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else if %new% equ 0 (<br />&nbsp; &nbsp; &nbsp; if not defined Mswitch (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo OLD SECTION DELETED FROM END OF FILE&nbsp; =========================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (1,1,%old%) do echo -!oldLine&#91;%%i&#93;:~0,78!<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;call :checkOldRange !oldLine&#91;1&#93;%number%! %lastFileLine%<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rem Just ignore the last section<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;REM set &quot;mods=!mods!-!oldRange! &quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else if %oldEqu2_And_NewNeq2% neq 0 (<br />&nbsp; &nbsp; &nbsp; call :getBothLines&#91;1&#93;<br />&nbsp; &nbsp; &nbsp; if &quot;!oldLine!&quot; equ &quot;!newLine!&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A new-=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if not defined Mswitch (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ======&nbsp; NEW SECTION ADDED&nbsp; ====================================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo(!oldLine&#91;1&#93;:~0,79!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (2,1,!new!) do echo +&nbsp; &nbsp; &nbsp; &nbsp;^|!newLine&#91;%%i&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo(!oldLine&#91;2&#93;:~0,79!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A oldP1=!oldLine&#91;1&#93;%number%! + 1, newM1=new-1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call :checkOldRange !oldP1!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo !mods!+!newM1!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (2,1,!new!) do echo !newLine&#91;%%i&#93;!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;mods=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /P &quot;=.&quot; &lt; NUL &gt; CON<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A new-=2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if not defined Mswitch (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ======&nbsp; NEW SECTION ADDED AT BEGINNING OF FILE&nbsp; ===============================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (1,1,!new!) do echo +&nbsp; &nbsp; &nbsp; &nbsp;^|!newLine&#91;%%i&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo(!oldLine&#91;1&#93;:~0,79!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo +!new!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (1,1,!new!) do echo !newLine&#91;%%i&#93;!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else if %newEqu2_And_OldNeq2% neq 0 (<br />&nbsp; &nbsp; &nbsp; call :getBothLines&#91;1&#93;<br />&nbsp; &nbsp; &nbsp; if &quot;!oldLine!&quot; equ &quot;!newLine!&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A old-=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if not defined Mswitch (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo OLD SECTION DELETED&nbsp; ==========================================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ---------!newLine&#91;1&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (2,1,!old!) do echo -!oldLine&#91;%%i&#93;:~0,78!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ---------!newLine&#91;2&#93;:~0,70!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call :checkOldRange !oldLine&#91;2&#93;%number%! %%oldLine&#91;!old!&#93;%number%%%<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;mods=!mods!-!oldRange! &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A old-=2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if not defined Mswitch (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo OLD SECTION DELETED FROM BEGINNING OF FILE&nbsp; ===================================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (1,1,!old!) do echo -!oldLine&#91;%%i&#93;:~0,78!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call :checkOldRange 1 %%oldLine&#91;!old!&#93;%number%%%<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;mods=!mods!-!oldRange! &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; if not defined Mswitch (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo ==============================&nbsp; SECTION MODIFIED&nbsp; =============================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo/<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if %old% lss %new% (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (1,1,%old%) do call :showBothLines %%i<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A old+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (!old!,1,%new%) do call :showNewLine %%i<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (1,1,%new%) do call :showBothLines %%i<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set /A new+=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (!new!,1,%old%) do call :showOldLine %%i<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; ) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A old-=1, new-=1, newM1=new-1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;call :checkOldRange !oldLine&#91;2&#93;%number%! %%oldLine&#91;!old!&#93;%number%%%<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo !mods!-!oldRange! +!newM1!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /L %%i in (2,1,!new!) do echo !newLine&#91;%%i&#93;!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;mods=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;=.&quot; &lt; NUL &gt; CON<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;if defined mods if &quot;%mods:~78%&quot; neq &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; echo %mods%<br />&nbsp; &nbsp; &nbsp; set &quot;mods=&quot;<br />&nbsp; &nbsp; &nbsp; set /P &quot;=.&quot; &lt; NUL &gt; CON<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;rem Pass to next set of differences<br />&nbsp; &nbsp;set /P line=<br />&nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp;set /P line=<br />%endwhile%<br />:endwhile<br /><br />if defined Mswitch (<br />&nbsp; &nbsp;call :checkOldRange %lastFileLineP1%<br />&nbsp; &nbsp;if defined mods echo !mods!<br />&nbsp; &nbsp;echo/&gt; CON<br />&nbsp; &nbsp;echo/&gt; CON<br />&nbsp; &nbsp;echo Modifications data created&gt; CON<br />)<br /><br />set &quot;badLines=&quot;<br />if exist !badOld! set badLines=true<br />if exist !badNew! set badLines=true<br />(if defined badLines (<br />&nbsp; &nbsp;echo/<br />&nbsp; &nbsp;echo/<br />&nbsp; &nbsp;echo ATTENTION: You must review the Modifications data generated. The FC command<br />&nbsp; &nbsp;echo incorrectly divides lines longer than 127 characters, so the line numeration is<br />&nbsp; &nbsp;echo out of step by 1 or more for each long line that appear in the files.<br />&nbsp; &nbsp;echo/<br />&nbsp; &nbsp;echo The offending lines detected are stored in files with same names and .log<br />&nbsp; &nbsp;echo extension: !badOld! and !badNew!<br />)) &gt; CON<br /><br />exit /B<br /><br /><br />:checkOldRange oldStart &#91;oldEnd&#93;<br />set /A lastLine=lastOldLine+1<br />if %lastLine% lss %1 (<br />&nbsp; &nbsp;set /A lines=%1-lastLine<br />&nbsp; &nbsp;set &quot;mods=!mods!!lines! &quot;<br />&nbsp; &nbsp;set /A lastOldLine+=lines<br />)<br />if &quot;%2&quot; neq &quot;&quot; (<br />&nbsp; &nbsp;set /A oldRange=%2-%1+1, lastOldLine=%2<br />)<br />exit /B<br /><br /><br />:getBothLines&#91;1&#93;<br />set &quot;oldLine=!oldLine&#91;1&#93;%cutNumber%!&quot;<br />set &quot;newLine=!newLine&#91;1&#93;%cutNumber%!&quot;<br />exit /B<br /><br /><br />:showBothLines i<br />set &quot;oldLine=!oldLine&#91;%1&#93;!%spaces39%&quot;<br />echo !oldLine:~0,39!^|!newLine&#91;%1&#93;:~0,39!<br />set &quot;oldLine=!oldLine&#91;%1&#93;:~39,-1!&quot;<br />if defined oldLine (<br />&nbsp; &nbsp;set definedOldLine=TRUE<br />&nbsp; &nbsp;if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set &quot;separator=&amp;&quot;<br />) else (<br />&nbsp; &nbsp;set definedOldLine=FALSE<br />&nbsp; &nbsp;set oldLine=%spaces39%<br />&nbsp; &nbsp;set &quot;separator=&gt;&quot;<br />)<br />set &quot;newLine=!newLine&#91;%1&#93;:~39,-1!&quot;<br />:while3&nbsp; Show a long new line at right side, old line or spaces at left side<br />%while% defined newLine %do%3<br />&nbsp; &nbsp;if &quot;!newLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=%spaces39%!newLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=!newLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo !oldLine:~0,39!!separator!!newLine:~0,39!<br />&nbsp; &nbsp;if %definedOldLine% equ TRUE set &quot;oldLine=!oldLine:~39!&quot;<br />&nbsp; &nbsp;if defined oldLine (<br />&nbsp; &nbsp; &nbsp; if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; set definedOldLine=FALSE<br />&nbsp; &nbsp; &nbsp; set oldLine=%spaces39%<br />&nbsp; &nbsp; &nbsp; set &quot;separator=&gt;&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;set &quot;newLine=!newLine:~39!&quot;<br />%endwhile%3<br />:endwhile3<br />if %definedOldLine% neq TRUE set oldLine=<br />:while4&nbsp; Show the rest of a long old line at left side<br />%while% defined oldLine %do%4<br />&nbsp; &nbsp;if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo !oldLine:~0,39!^&lt;<br />&nbsp; &nbsp;set &quot;oldLine=!oldLine:~39!&quot;<br />%endwhile%4<br />:endwhile4<br />exit /B<br /><br /><br />:showNewLine i<br />echo %spaces39%^|!newLine&#91;%1&#93;:~0,39!<br />set &quot;newLine=!newLine&#91;%1&#93;:~39,-1!&quot;<br />:while5&nbsp; Show a long new line at right side, spaces at left side<br />%while% defined newLine %do%5<br />&nbsp; &nbsp;if &quot;!newLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=%spaces39%!newLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;newLine=!newLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo %spaces39%^&gt;!newLine:~0,39!<br />&nbsp; &nbsp;set &quot;newLine=!newLine:~39!&quot;<br />%endwhile%5<br />:endwhile5<br />exit /B<br /><br /><br />:showOldLine i<br />echo(!oldLine&#91;%1&#93;:~0,39!<br />set &quot;oldLine=!oldLine&#91;%1&#93;:~39,-1!&quot;<br />:while6&nbsp; Show a long old line at left side<br />%while% defined oldLine %do%6<br />&nbsp; &nbsp;if &quot;!oldLine:~39,1!&quot; equ &quot;&quot; (<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=%spaces39%!oldLine!&quot;<br />&nbsp; &nbsp; &nbsp; set &quot;oldLine=!oldLine:~-39!&quot;<br />&nbsp; &nbsp;)<br />&nbsp; &nbsp;echo !oldLine:~0,39!^&lt;<br />&nbsp; &nbsp;set &quot;oldLine=!oldLine:~39!&quot;<br />%endwhile%6<br />:endwhile6<br />exit /B<br /></code></pre></div><br />This is <strong class="text-strong">Update-Rollback.bat</strong> program:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />rem Update/Rollback to/from a new version using the /Modifications data created by FComp.bat<br />rem Antonio Perez Ayala<br /><br />if &quot;%~2&quot; neq &quot;&quot; goto checkParams<br />echo Update-Rollback to/from a new version file<br />echo/<br />echo %0 BaseVersionFile.ext Modifications.txt<br />echo/<br />echo Modify the first file applying the modifications indicated by second file.<br />echo The second file must be created by FComp.bat program with the /M switch.<br />echo/<br />echo This program obtain anoter version of a base file that depends on the way<br />echo that the modifications file was created by FComp /M program.<br />echo/<br />echo If FComp was executed like this:<br />echo&nbsp; &nbsp; &nbsp;FComp /M PreviousVersion.ext NewVersion.ext ^&gt; DataToUpdate.txt<br />echo then an update of previous version may be obtained this way:<br />echo&nbsp; &nbsp; &nbsp;Update-Rollback PreviousVersion.ext DataToUpdate.txt ^&gt; NewVersion.ext<br />echo/<br />echo If FComp was executed like this:<br />echo&nbsp; &nbsp; &nbsp;FComp /M NewVersion.ext PreviousVersion.ext ^&gt; DataToRollback.txt<br />echo then a rollback from new version may be obtained this way:<br />echo&nbsp; &nbsp; &nbsp;Update-Rollback NewVersion.ext DataToRollback.txt ^&gt; PreviousVersion.ext<br />goto :EOF<br /><br />:checkParams<br />if not exist %1 echo Base file not found: %1 &amp; goto :EOF<br />if not exist %2 echo Modifications file not found: %2 &amp; goto :EOF<br /><br />setlocal EnableDelayedExpansion<br />set &quot;insert=0&quot;<br />&lt; %1 (for /F &quot;delims=&quot; %%a in (%2) do (<br />&nbsp; &nbsp;if !insert! gtr 0 (<br />&nbsp; &nbsp; &nbsp; setlocal DisableDelayedExpansion<br />&nbsp; &nbsp; &nbsp; set &quot;line=%%a&quot;<br />&nbsp; &nbsp; &nbsp; setlocal EnableDelayedExpansion<br />&nbsp; &nbsp; &nbsp; set &quot;line=!line:~0,-1!&quot;<br />&nbsp; &nbsp; &nbsp; echo(!line:*:&nbsp; =!<br />&nbsp; &nbsp; &nbsp; endlocal &amp; endlocal<br />&nbsp; &nbsp; &nbsp; set /A insert-=1<br />&nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; for %%b in (%%a) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;mod=%%b&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if &quot;!mod:~0,1!&quot; equ &quot;+&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set &quot;insert=!mod:~1!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else if &quot;!mod:~0,1!&quot; equ &quot;-&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (1,1,!mod:~1!) do set /P &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) else (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /L %%i in (1,1,!mod!) do (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /P &quot;line=&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo(!line!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />))<br /></code></pre></div><br /><br />Antonio</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p38704" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile38704">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistfff4.html?mode=viewprofile&amp;u=3621" class="username">brinda</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search6a76.html?author_id=3621&amp;sr=posts">78</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 25 Apr 2012 23:51</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content38704">

						<h3 ><a href="#p38704">Re: FComp.bat: Reformating FC output to get better info</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0102.html?mode=quote&amp;f=3&amp;p=38704" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicd549.html?p=38704#p38704" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopicd549.html?p=38704#p38704" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistfff4.html?mode=viewprofile&amp;u=3621" class="username">brinda</a></strong> &raquo; </span>16 Dec 2014 06:48
			</p>
			
			
			
			<div class="content">antonio,<br /><br />thanks for the Update-Rollback.bat and how it works.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p38833" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile38833">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist1513.html?mode=viewprofile&amp;u=4964" class="username">Samir</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchd50c.html?author_id=4964&amp;sr=posts">341</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 16 Jul 2013 12:00</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> HSV</dd>
							
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Samir">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Samir</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.huntsvillecarscene.com/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content38833">

						<h3 ><a href="#p38833">Re: FComp.bat: Reformating FC output to get better info</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf9c0.html?mode=quote&amp;f=3&amp;p=38833" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic5775.html?p=38833#p38833" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopic5775.html?p=38833#p38833" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist1513.html?mode=viewprofile&amp;u=4964" class="username">Samir</a></strong> &raquo; </span>22 Dec 2014 02:28
			</p>
			
			
			
			<div class="content">Great stuff.  I've always been using windiff for side by side line comparisons, but fcomp.bat will be nice as I don't exactly have the luxury of having a gui all the time.  <img class="smilies" src="images/smilies/icon_cool.gif" alt="8)" title="Cool" /></div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting2f5a-2.html?mode=reply&amp;f=3&amp;t=3968" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic54cd.html?f=3&amp;t=3968&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=3968">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			5 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron5089.gif?cron_type=cron.task.text_reparser.post_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=3968&p=38700 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 06:48:54 GMT -->
</html>
