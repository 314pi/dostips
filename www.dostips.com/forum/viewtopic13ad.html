<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?p=36198 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:05:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Dos Batch Math Library - DosTips.com</title>


	<link rel="canonical" href="viewtopicabd5.html?t=5819">

<!--
	phpBB style name: Allan Style - SUBSILVER
	Based on style:   prosilver (this is the default phpBB3 style)
	Based on style:   subsilver2 (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  Allan ( http://x-tk.ru/ )
-->

<link href="assets/css/font-awesome.mind772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/stylesheetd772.css?assets_version=34" rel="stylesheet">
<link href="styles/AllanStyle-SUBSILVER/theme/en/stylesheetd772.css?assets_version=34" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/AllanStyle-SUBSILVER/theme/tweaks.css?assets_version=34" rel="stylesheet">
<![endif]-->




<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-280191-1', 'auto');
	ga('send', 'pageview');
</script>

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">

<div id="header-subsilver">
	<a id="top" class="top-anchor" accesskey="t"></a>
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="../index.html" title="DosTips.com"><span class="site_logo"></span></a>
				<h1>DosTips.com</h1>
				<p>A Forum all about DOS Batch</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="https://www.dostips.com/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
</div>


<div id="wrap" class="wrap">
	<div id="page-header">
				<div class="navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp8319.html?mode=register" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	</div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
							<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../index.html" itemprop="url" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span itemprop="title">DosTips.com</span></a></span>
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.html" itemprop="url" accesskey="h" data-navbar-reference="index"><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="4"><a href="viewforum31e6.html?f=4" itemprop="url"><span itemprop="title">DosTips - Dos Batch</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">DOS Batch Forum</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>

<div class="navbar-top-link">
	<div class="inner">
		<ul>
			<li class="navbar-top-link-left"><a href="search33a7.html?search_id=unanswered">Unanswered topics</a></li>
			<li class="navbar-top-link-left"><a href="search526f.html?search_id=active_topics">Active topics</a></li>

											</ul>
	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic8d84.html?f=3&amp;t=5819">Dos Batch Math Library</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Discussion forum for all Windows batch related topics.<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista6a8.html?mode=viewprofile&amp;u=5" class="username">DosItHelp</a>
</p>


<div class="action-bar bar-top">
	
			<a href="postingdac0.html?mode=reply&amp;f=3&amp;t=5819" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic951d.html?f=3&amp;t=5819&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.dostips.com/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="5819" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			59 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" role="button">2</a></li>
				<li><a class="button" href="viewtopic5027.html?f=3&amp;t=5819&amp;start=30" role="button">3</a></li>
				<li><a class="button" href="viewtopic261a.html?f=3&amp;t=5819&amp;start=45" role="button">4</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




<div id="subsilver-nav-topic">
	<div class="inner"><div class="post has-profile">
		<div class="leftsided postbody subsilver-topic-title">Message</div>
		<div class="leftsided postprofile subsilver-topic-author">Author</div>
	</div></div>
</div>

			<div id="p36159" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36159">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36159">

						<h3 class="first"><a href="#p36159">Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting614f.html?mode=quote&amp;f=3&amp;p=36159" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicfbdd.html?p=36159#p36159" onclick="prompt('Message #1',this.href); return false;">#1</a></span> 
									<a class="unread" href="viewtopicfbdd.html?p=36159#p36159" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>08 Aug 2014 03:00
			</p>
			
			
			
			<div class="content">Hi to all,<br /><br />on the main site lack the mathematical functions.<br /><br />Since many user here, and elsewhere on the web, they have developed a lot, you can now reap the fruits of their sowing and planting new seeds.<br /><br />I hope for the cooperation of all to make a point of reference.<br /><br />I have not tried on StackOverflow/Stack... nor groups discussion or sites, for example, in German (or Russian or other) because they do not know the German nor the Russian enough. So if someone speaking German or Russian or else can do a search and also bring only the link where they talk about mathematical functions I will take the responsibility to keep this thread neat.<br /><br />I had thought to create functions that could go well for both <strong class="text-strong">32bit integers</strong>, <strong class="text-strong">64bit integer</strong> (2*32), a <strong class="text-strong">fixed point</strong> math as simple as that defined by Antonio Acini, the <strong class="text-strong">float point</strong> defined by Penpen, I thought I'd define a <strong class="text-strong">new mathematical fixed point</strong> such as the one defined in the console games (for example see Nintendo DS).<br /><br />I also decided to make versions that take advantage of the concept of <strong class="text-strong">macro</strong>.<br /><br /><br /><strong class="text-strong">List functions to implement:</strong><br /><br /><ul><li>Abs(x)</li><li>Sign(x)</li><li>Ceil(x)</li><li>Floor(x)</li><li>Cos(x)</li><li>Sin(x)</li><li>Tan(x)</li><li>Pow(x,y)</li><li>Log(x)</li><li>Ln(x)</li><li>Round(x)</li><li>Sqrt(x)</li><li>Hypot(x,y)</li><li>Min(x,y)</li><li>Max(x,y)</li><li>Cmp(x,y)</li></ul><br /><br />Reference:<br /><a href="viewtopic401e.html?f=3&amp;t=4925" class="postlink">(nearly) ieee 754 floating point single precisition</a> by penpen<br /><a href="viewtopic210e.html?f=3&amp;t=6744" class="postlink">Definition and use of arithmetic &quot;functions&quot; in Batch files</a> by Antonio Acini aka Aacini<br /><br /><br />Thanks to all<br />Francesco Poscetti aka einstein1969</div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 24 Nov 2015 17:45, edited 5 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36160" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile36160">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36160">

						<h3 ><a href="#p36160">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2c09.html?mode=quote&amp;f=3&amp;p=36160" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopiccd5f.html?p=36160#p36160" onclick="prompt('Message #2',this.href); return false;">#2</a></span> 
									<a class="unread" href="viewtopiccd5f.html?p=36160#p36160" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>08 Aug 2014 03:13
			</p>
			
			
			
			<div class="content">Example of implementations of <strong class="text-strong">abs(x)</strong>:<br /><br />Suppose that the <strong class="text-strong">x</strong> is <strong class="text-strong">32bit signed INTEGER</strong>.<br /><br /><ol style="list-style-type: decimal"><li><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Set /a X=-56789<br />if %X% lss 0 set /a X=-X<br /></code></pre></div><br /></li><li><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set /a &quot;x=-56789,&nbsp; x=(x&gt;&gt;31|1)*x&quot;<br /></code></pre></div></li></ol>...</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36161" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36161">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36161">

						<h3 ><a href="#p36161">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting5916.html?mode=quote&amp;f=3&amp;p=36161" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic4935.html?p=36161#p36161" onclick="prompt('Message #3',this.href); return false;">#3</a></span> 
									<a class="unread" href="viewtopic4935.html?p=36161#p36161" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>08 Aug 2014 03:15
			</p>
			
			
			
			<div class="content"><ul><li><strong class="text-strong">Abs(x)</strong><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Abs(x)=(((x)&gt;&gt;31|1)*(x))&quot;<br />set /A &quot;x=-32, abs=%Abs(x)%&quot;<br />rem or<br />set /A Abs=%Abs(x):x=-32%<br /></code></pre></div></li><li><strong class="text-strong">Sign(x)</strong><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Sign(x)=(x)&gt;&gt;31 | -(x)&gt;&gt;31 &amp; 1&quot; <br />:: or <br />set &quot;Sign(x)=(x)&gt;&gt;31 | -(-(x)&gt;&gt;31)&quot;<br />::<br />set /A &quot;x=-32, S=%Sign(x)%&quot;<br />set /A &quot;S=%Sign(x):x=-32%&quot;<br /></code></pre></div></li><li>Ceil(x)</li><li>Floor(x)</li><li>Cos(x)</li><li>Sin(x)</li><li>Tan(x)</li><li>Pow(x,y)</li><li>Log(x)</li><li>Ln(x)</li><li>Round(x)</li><li><strong class="text-strong">Sqrt(N)</strong><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Rem Without exception on negative input<br />set &quot;Sqrt(N)=( M=(N), x=M/(11*1024)+40, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x+=(M-x*x)&gt;&gt;31 )&quot;<br />set /A &quot;N=36, sqrt=%Sqrt(N)%&quot;<br />rem or<br />set /A &quot;Sqrt=%Sqrt(N):N=36%&quot;<br /><br />Rem With exception on negative input<br />set &quot;Sqrt(N)=( M=(N), x=M/(11*1024)+40, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x=(M/x+x)&gt;&gt;1, x+=((M-x*x)&gt;&gt;31)/(1+((N)&gt;&gt;31)) )&quot;<br />set /A &quot;Sqrt=%Sqrt(N):N=-32%&quot;<br /></code></pre></div></li><li>Hypot(x,y)</li><li>Min(x,y)</li><li>Max(x,y)</li><li><strong class="text-strong">Cmp(x,y)</strong><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set &quot;Cmp(x,y)=(x-y)&gt;&gt;31|((y-x)&gt;&gt;31&amp;1)&quot;<br />set /A &quot;x=3, y=5, C=%Cmp(x,y)%&quot;<br /></code></pre></div></li></ul></div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 01 May 2016 08:32, edited 7 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36162" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile36162">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36162">

						<h3 ><a href="#p36162">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9a96.html?mode=quote&amp;f=3&amp;p=36162" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicf974.html?p=36162#p36162" onclick="prompt('Message #4',this.href); return false;">#4</a></span> 
									<a class="unread" href="viewtopicf974.html?p=36162#p36162" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>08 Aug 2014 03:31
			</p>
			
			
			
			<div class="content">example of implementation of <strong class="text-strong">sqrt(x)</strong>:<br /><br />input <strong class="text-strong">32 bit integer</strong> output <strong class="text-strong">32bit integer</strong><br /><br />by Antonio Acini:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />set /A number=%1<br />set /A iter1=number/2+1<br /><br />rem The maximum number of iterations to calculate sqrt of a 32 bits integer number is 20<br />set &quot;sqrt=&quot;<br />for /L %%i in (1,1,20) do if not defined sqrt (<br />&nbsp; &nbsp;set /A &quot;iter2=number/iter1, iter1=(iter1+iter2)/2&quot;<br />&nbsp; &nbsp;if !iter2! geq !iter1! set /A &quot;sqrt=(iter1+iter2)/2&quot;<br />)<br />echo Sqrt(%number%) = %sqrt%<br /></code></pre></div><br /><em class="text-italics">modified the first set to set /A</em> (sugg. by dbenham)<br /><em class="text-italics">modified the first iter1 adding + 1</em></div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 11 Aug 2014 01:13, edited 3 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36192" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36192">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searcha86d.html?author_id=2258&amp;sr=posts">2152</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 12 Feb 2011 21:02</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> United States (east coast)</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36192">

						<h3 ><a href="#p36192">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting002f.html?mode=quote&amp;f=3&amp;p=36192" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicb36e.html?p=36192#p36192" onclick="prompt('Message #5',this.href); return false;">#5</a></span> 
									<a class="unread" href="viewtopicb36e.html?p=36192#p36192" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a></strong> &raquo; </span>09 Aug 2014 14:28
			</p>
			
			
			
			<div class="content">For SQRT.BAT, modify initial assignment to use SET /A<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>set /a number=%1<br /></code></pre></div><br />Then you can enter hex notation for a number, or compute the integral approximation of the square root of a mathematical expression. It is also a good way to test the result.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>C:\test&gt;sqrt 23456*23456<br />Sqrt(550183936) = 23456<br /><br />C:\test&gt;<br /></code></pre></div><br /><br />Dave Benham</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36197" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile36197">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36197">

						<h3 ><a href="#p36197">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting57a7.html?mode=quote&amp;f=3&amp;p=36197" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopice33a.html?p=36197#p36197" onclick="prompt('Message #6',this.href); return false;">#6</a></span> 
									<a class="unread" href="viewtopice33a.html?p=36197#p36197" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>09 Aug 2014 19:40
			</p>
			
			
			
			<div class="content">Thanks Dave.<br /><br />For completeness. In the algos there is (X+Y)/2. It's the average.<br /><br />This is a <strong class="text-strong">average without overflow</strong>:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp; set /a &quot;M=(X&amp;Y)+(X^Y)/2&quot;<br /></code></pre></div><br /><br />In the sqrt algos is not necessary, I think, but for other calculations:<br /><br />examples:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt;set /a &quot;m=(2100000001+2000000001)/2&quot;<br />-97483647<br /></code></pre></div><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt;set /a &quot;m=(2100000001&amp;2000000001)+(2100000001^2000000001)/2&quot;<br />2050000001<br /></code></pre></div><br /><br />Francesco Poscetti</div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 09 Aug 2014 21:13, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36198" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36198">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdc63.html?author_id=2923&amp;sr=posts">1540</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 06 Dec 2011 22:15</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> México City, México</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36198">

						<h3 ><a href="#p36198">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting3008.html?mode=quote&amp;f=3&amp;p=36198" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic13ad.html?p=36198#p36198" onclick="prompt('Message #7',this.href); return false;">#7</a></span> 
									<a class="unread" href="viewtopic13ad.html?p=36198#p36198" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist07be.html?mode=viewprofile&amp;u=2923" style="color: #00AA00;" class="username-coloured">Aacini</a></strong> &raquo; </span>09 Aug 2014 20:00
			</p>
			
			
			
			<div class="content">@einstein1969:<br /><br />This is very interesting! Could you explain why the &quot;(X&amp;Y)+(X^Y)/2&quot; give correct results with large numbers, but &quot;(X+Y)/2&quot; does not, perhaps?<br /><br />In assembler, when you want to multiply two numbers followed by a division (for example: X*Y/Z, common operation to change scale) you may multiply X*Y, that give a result of double the size of X and Y, and then directly divide this double-size partial result by Z. If the scaling is correct, the final result is correct even if the partial result of X*Y would produce an overflow in the base size of X and Y.<br /><br />Is there any way to apply your trick above to an X*Y/Z operation in a SET /A command?<br /><br />Antonio<br /><br /><strong class="text-strong">EDIT</strong>: PS - You may find some interesting stuff on mathematical functions in my <a href="viewtopic5d59.html?f=3&amp;t=2704" class="postlink">SET/A macro</a> post.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36199" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile36199">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36199">

						<h3 ><a href="#p36199">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting61aa.html?mode=quote&amp;f=3&amp;p=36199" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic3d0f.html?p=36199#p36199" onclick="prompt('Message #8',this.href); return false;">#8</a></span> 
									<a class="unread" href="viewtopic3d0f.html?p=36199#p36199" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>09 Aug 2014 21:46
			</p>
			
			
			
			<div class="content">I have added a <strong class="text-strong">decimal part</strong> (5 digit) at the Aacini's square root, using the standard algorithm of square root. (rif . <a href="http://engineeringtraining.tpub.com/14069/css/14069_25.htm" class="postlink">Arithmetic Extraction of Square Roots</a>)<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />set /A number=%1<br />set /A iter1=number/2<br /><br />rem The maximum number of iterations to calculate sqrt of a 32 bits integer number is 20<br />set &quot;sqrt=&quot;<br />for /L %%i in (1,1,20) do if not defined sqrt (<br />&nbsp; &nbsp;set /A &quot;iter2=number/iter1, iter1=(iter1+iter2)/2&quot;<br />&nbsp; &nbsp;if !iter2! geq !iter1! set /A &quot;sqrt=(iter1+iter2)/2&quot;<br />)<br />rem echo Sqrt(%number%) = %sqrt%<br /><br />rem decimal part<br />set count=0<br />set /a sqr=sqrt*sqrt<br /><br />if !sqr! gtr !number! set /a sqrt-=1, sqr=sqrt*sqrt<br /><br />set digit=%sqrt%.<br /><br />:dec<br />(&nbsp; &nbsp;set /a count+=1<br />&nbsp; &nbsp;if !count! GTR 5 goto next<br />&nbsp; &nbsp;set /a number=(number-sqr^)*100, div=sqrt*2<br />&nbsp; &nbsp;for /l %%i in (9,-1,0) do (<br />&nbsp; &nbsp;&nbsp; &nbsp;set /a sqr=!div!%%i*%%i<br />&nbsp; &nbsp;&nbsp; &nbsp;if !sqr! leq !number! (<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;set sqrt=!sqrt!%%i<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;goto dec<br />&nbsp; &nbsp;&nbsp; &nbsp;)<br />&nbsp; &nbsp;)<br />)&nbsp; &nbsp;<br />:next&nbsp; &nbsp;<br />&nbsp; &nbsp;set sqrt=%sqrt:~-5%<br />&nbsp; &nbsp;if %number% neq 0 set digit=%digit%%sqrt%<br />&nbsp; &nbsp;echo Square Root of %1 is %digit%<br /><br /><br />exit /b 0<br /></code></pre></div><br />EDIT:<em class="text-italics">Above code has errors</em><br /><br />examples<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt;sqrt.bat 2<br />Sqrt(2) = 1<br />Square Root of 2 is 1.41421</code></pre></div><br /><br />EDIT: look at <a href="viewtopic45d3.html?p=36222#p36222" class="postlink">SQRT.BAT</a> for enhanced version by dbenham</div>

			
													<div class="notice">
					Last edited by <a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a> on 11 Aug 2014 01:30, edited 6 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36200" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36200">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searcha86d.html?author_id=2258&amp;sr=posts">2152</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 12 Feb 2011 21:02</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> United States (east coast)</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36200">

						<h3 ><a href="#p36200">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9fff.html?mode=quote&amp;f=3&amp;p=36200" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic9006.html?p=36200#p36200" onclick="prompt('Message #9',this.href); return false;">#9</a></span> 
									<a class="unread" href="viewtopic9006.html?p=36200#p36200" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a></strong> &raquo; </span>09 Aug 2014 22:02
			</p>
			
			
			
			<div class="content">Impressive. But SQRT 3 original code gives 2, and decimal version gives 2.2.<br /><br />Dave Benham</div>

			
													<div class="notice">
					Last edited by <a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a> on 10 Aug 2014 03:37, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36203" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile36203">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36203">

						<h3 ><a href="#p36203">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge1eb.html?mode=quote&amp;f=3&amp;p=36203" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic2448.html?p=36203#p36203" onclick="prompt('Message #10',this.href); return false;">#10</a></span> 
									<a class="unread" href="viewtopic2448.html?p=36203#p36203" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>09 Aug 2014 22:54
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>dbenham wrote:</cite>Impressive. But SQRT 2 original code gives 2, and decimal version gives 2.2.<br /><br />Dave Benham</div></blockquote><br /><br /> <img class="smilies" src="images/smilies/icon_question.gif" alt=":?:" title="Question" /> <br /><br />What? what do you mean?</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36204" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36204">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searcha86d.html?author_id=2258&amp;sr=posts">2152</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 12 Feb 2011 21:02</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> United States (east coast)</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36204">

						<h3 ><a href="#p36204">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinga92c.html?mode=quote&amp;f=3&amp;p=36204" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic0231.html?p=36204#p36204" onclick="prompt('Message #11',this.href); return false;">#11</a></span> 
									<a class="unread" href="viewtopic0231.html?p=36204#p36204" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a></strong> &raquo; </span>10 Aug 2014 03:38
			</p>
			
			
			
			<div class="content"><img class="smilies" src="images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> Stoopid typos <img class="smilies" src="images/smilies/icon_exclaim.gif" alt=":!:" title="Exclamation" /> <br /><br />That was supposed to be a 3. I edited my post.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36207" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile36207">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36207">

						<h3 ><a href="#p36207">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9ade.html?mode=quote&amp;f=3&amp;p=36207" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic5e8a.html?p=36207#p36207" onclick="prompt('Message #12',this.href); return false;">#12</a></span> 
									<a class="unread" href="viewtopic5e8a.html?p=36207#p36207" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>10 Aug 2014 03:58
			</p>
			
			
			
			<div class="content">I can't understand why... I have added a &quot;stupid&quot; workaround and seem work.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>if !sqr! gtr !number! set /a sqrt-=1, sqr=sqrt*sqrt<br /></code></pre></div><br /><br />update the previus post.</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36208" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36208">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36208">

						<h3 ><a href="#p36208">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc43a.html?mode=quote&amp;f=3&amp;p=36208" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic3429.html?p=36208#p36208" onclick="prompt('Message #13',this.href); return false;">#13</a></span> 
									<a class="unread" href="viewtopic3429.html?p=36208#p36208" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>10 Aug 2014 04:13
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Aacini wrote:</cite>@einstein1969:<br /><br />This is very interesting! Could you explain why the &quot;(X&amp;Y)+(X^Y)/2&quot; give correct results with large numbers, but &quot;(X+Y)/2&quot; does not, perhaps?<br /><br />In assembler, when you want to multiply two numbers followed by a division (for example: X*Y/Z, common operation to change scale) you may multiply X*Y, that give a result of double the size of X and Y, and then directly divide this double-size partial result by Z. If the scaling is correct, the final result is correct even if the partial result of X*Y would produce an overflow in the base size of X and Y.<br /><br />Is there any way to apply your trick above to an X*Y/Z operation in a SET /A command?<br /><br />Antonio<br /><br /><strong class="text-strong">EDIT</strong>: PS - You may find some interesting stuff on mathematical functions in my <a href="viewtopic5d59.html?f=3&amp;t=2704" class="postlink">SET/A macro</a> post.</div></blockquote><br /><br />Thanks Antonio for the link. I see a lot of stuff! If possibile I integrate but your work is very advanced!  <img class="smilies" src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> <br /><br />For the question. The + go in overflow. The &amp; and ^ no. This proprierty is discoverer by <a href="http://books.google.it/books?id=VicPJYM0I5QC&amp;pg=PA19&amp;lpg=PA19&amp;dq=average+overflow+Dietz&amp;source=bl&amp;ots=2n_UPUwt2u&amp;sig=Bc5Z97QXPNx113ZkRnyg3ll7ltM&amp;hl=it&amp;sa=X&amp;ei=kkTnU5OgM-aaygPWnoGoDg&amp;ved=0CC4Q6AEwAQ#v=onepage&amp;q=average%20overflow%20Dietz&amp;f=false" class="postlink">Dietz</a>.<br /><br />For the MUL i think that this is not applicable. You can use KARATSUBA. I'll post an example soon.<br /><br />Francesco</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36222" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile36222">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searcha86d.html?author_id=2258&amp;sr=posts">2152</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 12 Feb 2011 21:02</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> United States (east coast)</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36222">

						<h3 ><a href="#p36222">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb929.html?mode=quote&amp;f=3&amp;p=36222" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopic45d3.html?p=36222#p36222" onclick="prompt('Message #14',this.href); return false;">#14</a></span> 
									<a class="unread" href="viewtopic45d3.html?p=36222#p36222" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a></strong> &raquo; </span>10 Aug 2014 19:23
			</p>
			
			
			
			<div class="content">Your code sometimes raises errors, and the last digit is not rounded properly, and sometimes is just plain wrong.<br /><br />I refined your SQRT function to compute an accurately rounded value with as much precision as possible without resorting to numbers that exceed signed 32 bit values. I also eliminated any backward GOTO for improved performance. The function properly handles negative, 0, and 1 values.<br /><br />I thought I could add 5 and divide by 10 to get a properly rounded number, but the last digit was sometimes off by 1. Via some spot checking at both extremes (small numbers and big numbers), I determined that adding 50 and dividing by 100 seems to give a reliably accurate rounded value.<br /><br />I tested 10001 small inputs from 0 to 1000, as well as 1000 large inputs from 2147483647 to 2146483647, incrementing by 1000.<br /><br />I have not looked at Aacini's linked code to see if there are better ways to do this.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br /><br />:SQRT&nbsp; InExpr&nbsp; &#91;OutVar&#93;<br />::<br />:: Compute the square root of expression InExpr<br />:: and store the result in variable OutVar.<br />:: Write the result to stdout if OutVar not specified.<br />::<br />:: InExpr may be a valid SET /A mathematical expression.<br />::<br />:: The number is rounded accurately, and the number of<br />:: digits varies depending on the value of InExpr.<br />::<br />:: If the result is exact, then it will not have any<br />:: decimal digits.<br />::<br />setlocal EnableDelayedExpansion<br /><br />:: Initialize and handle special cases<br />set /A &quot;number=%~1, iter1=number/2+1&quot; || exit /b<br />if !number! lss 0 &gt;&amp;2 echo ERROR: Imaginary number&amp;exit /b 1<br />if !number! leq 1 set /a sqrt=number&amp;goto return<br /><br />:: Compute integral portion<br />set &quot;sqrt=&quot;<br />for /L %%i in (1,1,20) do if not defined sqrt (<br />&nbsp; set /A &quot;iter2=number/iter1, iter1=(iter1+iter2)/2&quot;<br />&nbsp; if !iter2! geq !iter1! set /A &quot;sqrt=(iter1+iter2)/2, sqr=sqrt*sqrt, count=0&quot;<br />)<br />if !sqr! equ !number! goto return<br /><br />:: Compute decimal portion<br />for /l %%N in (-1 1 6) do (<br />&nbsp; set /a &quot;number=(number-sqr)*100, div=sqrt*2&quot;<br />&nbsp; if !number! lss 0 goto finish<br />&nbsp; set &quot;next=&quot;<br />&nbsp; for /l %%i in (9,-1,0) do if not defined next (<br />&nbsp; &nbsp; set /a sqr=!div!%%i*%%i 2&gt;nul || goto finish<br />&nbsp; &nbsp; if !sqr! geq 0 if !sqr! leq !number! set &quot;next=%%i&quot;<br />&nbsp; )<br />&nbsp; set &quot;sqrt=!sqrt!!next!&quot;<br />&nbsp; set &quot;count=%%N&quot;<br />)<br />:finish<br />set /a sqrt=(sqrt+50)/100<br />set sqrt=!sqrt:~0,-%count%!.!sqrt:~-%count%!<br /><br />:return<br />endlocal &amp; if &quot;%~2&quot; equ &quot;&quot; (echo %sqrt%) else set &quot;%~2=%sqrt%&quot;<br />exit /b 0<br /></code></pre></div><br /><br />Dave Benham</div>

			
													<div class="notice">
					Last edited by <a href="memberlist3d77.html?mode=viewprofile&amp;u=2258" style="color: #00AA00;" class="username-coloured">dbenham</a> on 11 Aug 2014 07:02, edited 2 times in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p36227" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile36227">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a>							</dt>

						<dd class="profile-rank">Expert</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche2bd.html?author_id=3864&amp;sr=posts">762</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> 15 Jun 2012 13:16</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Italy, Rome</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content36227">

						<h3 ><a href="#p36227">Re: Dos Batch Math Library</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2c32.html?mode=quote&amp;f=3&amp;p=36227" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author"><span class="posti"><a href="viewtopicee15.html?p=36227#p36227" onclick="prompt('Message #15',this.href); return false;">#15</a></span> 
									<a class="unread" href="viewtopicee15.html?p=36227#p36227" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista071.html?mode=viewprofile&amp;u=3864" class="username">einstein1969</a></strong> &raquo; </span>11 Aug 2014 00:58
			</p>
			
			
			
			<div class="content">I have found the error in the previus method. I think this method uses <a href="http://en.wikipedia.org/wiki/Integer_square_root" class="postlink">this algos</a>.<br /><br />The first term is <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>iter1=number/2+1</code></pre></div> and not <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>iter1=number/2</code></pre></div>. I have probed e seem work without my previous &quot;stupid&quot; patch.<br /><br />@Dave<br />You can correct previus post?<br /><br />PS: Very good work!</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingdac0.html?mode=reply&amp;f=3&amp;t=5819" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic951d.html?f=3&amp;t=5819&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=5819">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			59 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" role="button">2</a></li>
				<li><a class="button" href="viewtopic5027.html?f=3&amp;t=5819&amp;start=30" role="button">3</a></li>
				<li><a class="button" href="viewtopic261a.html?f=3&amp;t=5819&amp;start=45" role="button">4</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopicee55.html?f=3&amp;t=5819&amp;start=15" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “DOS Batch Forum”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> DosTips - Dos Batch</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; DOS Batch Forum</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
							<span class="crumb"><a href="../index.html" data-navbar-reference="home"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>DosTips.com</span></a></span>									<span class="crumb"><a href="index.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC-6">UTC-06:00</span></li>
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete all board cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist4bfd.html?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist8733.html?mode=contactadmin" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<!-- WARNING NO DELETE -->Style developer by <a href="http://tricolor.x-tk.ru/">support forum tricolor</a>, <!-- END WARNING NO DELETE -->Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
									</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	<img src="cron5089.gif?cron_type=cron.task.text_reparser.post_text" width="1" height="1" alt="cron" /></div>

<script type="text/javascript" src="assets/javascript/jquery.mind772.js?assets_version=34"></script>
<script type="text/javascript" src="assets/javascript/cored772.js?assets_version=34"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fnd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/prosilver/template/ajaxd772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/jquery-uid772.js?assets_version=34"></script>
<script type="text/javascript" src="styles/AllanStyle-SUBSILVER/template/collapsed772.js?assets_version=34"></script>



</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?p=36198 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 07:05:07 GMT -->
</html>
