<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8062&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:04:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>DosTips.com &bull; Alignment using batchscript</title>

<link href="styles/AllanStyle-SUBSILVER/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>DosTips.com</h1>
		<p>A Forum all about DOS Batch<br /><a href="index-2.html">https://www.dostips.com/forum/</a></p>

		<h2>Alignment using batchscript</h2>
		<p><a href="viewtopic2631.html?f=3&amp;t=8062">https://www.dostips.com/forum/viewtopic.php?f=3&amp;t=8062</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Alignment using batchscript</h3>
				<div class="date">Posted: <strong>27 Aug 2017 01:15</strong></div>
				<div class="author">by <strong>plasma33</strong></div>
				<div class="content">Hi guys,<br /><br />I am trying to find common substrings between two strings using one to one alignment. My input will be two strings coded in A-Z characters. A best example is demonstrated below:<br />Input:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>String1<br />GIGRGRGIGRGRGGDGARGRHRGRGRHRGRQRGIGKMKMIGKMKMIGKMKMIGKMKMIGRPRGIGRHRIIGRGRGIGRGRHIGKHKIIGRHRIIGRGRGIGRGRHIGRKKLIGRKRIIGRRRHIGRRRGGDGARGRHRGRGRHRGRPRGIGRGRGIGRGRGIGRGRGIGRGRGIGRIKLIGRQRRIGRNKKIGRRKIIGRGRHIGRGRGIGRGRGIGRGRGIGRKRPIGRLRRIGRKRPIGRKRNGDGARGRHRGRGRHRGK<br />String2<br />RIGRKRKIGRLRRGDGARGRHRGRGRHRGRQRGIGRPKRIGKLRKIGKMKKIGKHKIIGRLRMIGKKKIIGKLRHIGRKRLIGKIKMIGRHRGIGRHKHIGRNRGIGRIRHIGKMKIIGKKRHIGRGRMGDGARGRHRGRGRHRGRPRGIGRGRHIGRGRGIGRGRGIGRGRGIGRNRRIGRNRPIGRNRRIGRNRKIGRNRIIGRMRHIGRNRPIGRIKLIGRNRGIGRMRKIGRMRIIGRGRGGDGARGRHRGRGRHRGK<br /></code></pre></div><br /><br />Output:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Common Subtsring<br />IGR<br />R<br />IGR<br />R<br />GDGARGRHRGRGRHRGRQRGIG<br />K<br />IGK<br />IGKMK<br />IGK<br />K<br />IGR<br />R<br />IG<br />IIG<br />R<br />IGR<br />R<br />IGK<br />K<br />IGRHR<br />IGR<br />IGR<br />R<br />IGR<br />IG<br />IIG<br />RHIGR<br />R<br />GDGARGRHRGRGRHRGRPRGIGRGR<br />IGRGRGIGRGRGIGRGRGIGR<br />IGR<br />R<br />IGRN<br />IGR<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />GDGARGRHRGRGRHRGK<br /></code></pre></div><br /><br />I am attaching the full text file for your reference. Please see the following link:<br /><a href="https://www.mediafire.com/file/cfdk5j2j5vlwjnq/input.txt" class="postlink">https://www.mediafire.com/file/cfdk5j2j5vlwjnq/input.txt</a><br /><br />Thanks, guys.<br /><br />Plasma33</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>27 Aug 2017 02:18</strong></div>
				<div class="author">by <strong>DosItHelp</strong></div>
				<div class="content">plasma33,<br /><br />Here is a longest-common-sequence implementation <a href="../index220e.html?t=Experimental.StringDiff" class="postlink">http://www.dostips.com/?t=Experimental.StringDiff</a> as a starting point.<br />It could be improved and converted to a function.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>27 Aug 2017 05:49</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content">The string limit in Batch is 8191 characters. You're far above in the text file you uploaded.<br /><br />Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>27 Aug 2017 19:35</strong></div>
				<div class="author">by <strong>plasma33</strong></div>
				<div class="content">Hello all,<br /><br />@DosItHelp, thank you for the link. I will give that a try.<br /><br />@aGerman, is there anyway a hybrid (i.e. a combination of batch script or VBScript or JScript) could resolve the string limit issue? Or by splitting the string into several smaller strings?<br /><br />@Aacini and @dbenham, I need your take on this, please.<br /><br />Thanks, all.<br /><br />Plasma33</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>27 Aug 2017 22:40</strong></div>
				<div class="author">by <strong>Aacini</strong></div>
				<div class="content">Test this code and report any problem:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@echo off<br />setlocal EnableDelayedExpansion<br /><br />if exist input1.txt if exist input2.txt goto SecondPart<br /><br />rem First part: Split a file with 2 very long lines into 2 files with shorter lines<br />rem http://www.dostips.com/forum/viewtopic.php?f=3&amp;t=4945<br />echo Processing big input file...<br />for /F %%a in ('copy /Z &quot;%~F0&quot; NUL') do set &quot;CR=%%a&quot;<br />del input1.txt input2.txt 2&gt; nul<br />set &quot;in=1&quot;<br />call :SplitLines &lt; input.txt<br />goto SecondPart<br /><br /><br />:SplitLines<br />echo/<br />echo Reading input line # %in%<br />set &quot;lineNum=0&quot;<br />:loopLine<br />&nbsp; &nbsp;set /A lineNum+=2<br />&nbsp; &nbsp;set /P &quot;=Output line: %lineNum%!CR!&quot; &lt; NUL<br />&nbsp; &nbsp;set /P &quot;line=&quot;<br />&nbsp; &nbsp;&gt;&gt; input%in%.txt echo %line:~0,512%<br />&nbsp; &nbsp;&gt;&gt; input%in%.txt echo/%line:~512%<br />if &quot;%line:~1022%&quot; neq &quot;&quot; goto loopLine<br />echo/<br />set /A in+=1<br />if %in% leq 2 goto SplitLines<br />echo/<br />exit /B<br /><br /><br /><br />:SecondPart<br />echo Processing input files...<br />set &quot;last=&quot;<br />set &quot;lineNum=0&quot;<br />&lt; input2.txt (<br />for /F &quot;delims=&quot; %%a in (input1.txt) do (<br />&nbsp; &nbsp;set /A lineNum+=1<br />&nbsp; &nbsp;set /P &quot;=Input line: !lineNum!!CR!&quot; &lt; NUL &gt; CON<br />&nbsp; &nbsp;set &quot;line1=%%a&quot;<br />&nbsp; &nbsp;set /P &quot;line2=&quot;<br /><br />&nbsp; &nbsp;if defined last (<br />&nbsp; &nbsp; &nbsp; set /P &quot;=!last!&quot; &lt; NUL &amp; set &quot;last=&quot;<br />&nbsp; &nbsp; &nbsp; if &quot;!line1:~0,1!&quot; neq &quot;!line2:~0,1!&quot; echo/<br />&nbsp; &nbsp;)<br /><br />&nbsp; &nbsp;set &quot;start=&quot;<br />&nbsp; &nbsp;for /L %%i in (0,1,511) do (<br />&nbsp; &nbsp; &nbsp; if &quot;!line1:~%%i,1!&quot; equ &quot;!line2:~%%i,1!&quot; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if not defined start (set /A &quot;start=end=%%i&quot;) else set &quot;end=%%i&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if %%i equ 511 (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for /F %%m in (&quot;!start!&quot;) do set &quot;last=!line1:~%%m!&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; ) else if defined start (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set /A &quot;len=end-start+1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for /F &quot;tokens=1,2&quot; %%m in (&quot;!start! !len!&quot;) do echo !line1:~%%m,%%n!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set &quot;start=&quot;<br />&nbsp; &nbsp; &nbsp; )<br />&nbsp; &nbsp;)<br />)<br />if defined last echo !last!<br />) &gt; output.txt<br />echo/<br /></code></pre></div><br />Antonio</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>28 Aug 2017 01:48</strong></div>
				<div class="author">by <strong>aGerman</strong></div>
				<div class="content"><blockquote><div><cite>plasma33 wrote:</cite>@aGerman, is there anyway a hybrid</div></blockquote><br />Yes why not.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@if (@a)==(@b) @end /*<br /><br />@echo off &amp;setlocal<br />set &quot;filename=test.txt&quot;<br />cscript //nologo //e:jscript &quot;%~fs0&quot; &quot;%filename%&quot;<br />pause<br /><br /><br />exit /b&amp;::*/<br />var objFile = WScript.CreateObject('Scripting.FileSystemObject').OpenTextFile(WScript.Arguments(0)),<br />&nbsp; &nbsp; str1 = objFile.ReadLine(), str2 = objFile.ReadLine(),<br />&nbsp; &nbsp; len = Math.min(str1.length, str2.length),<br />&nbsp; &nbsp; bSame = false, strMatch = '', i, chr;<br /><br />objFile.Close();<br />for (i = 0; i &lt; len; ++i) {<br />&nbsp; chr = str1.charAt(i);<br />&nbsp; if (chr == str2.charAt(i)) {<br />&nbsp; &nbsp; strMatch += chr;<br />&nbsp; &nbsp; if (!bSame) {<br />&nbsp; &nbsp; &nbsp; bSame = true;<br />&nbsp; &nbsp; } <br />&nbsp; } else {<br />&nbsp; &nbsp; if (bSame) {<br />&nbsp; &nbsp; &nbsp; WScript.Echo(strMatch);<br />&nbsp; &nbsp; &nbsp; bSame = false;<br />&nbsp; &nbsp; &nbsp; strMatch = '';<br />&nbsp; &nbsp; }<br />&nbsp; }<br />}<br /></code></pre></div><br />Steffen</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>28 Aug 2017 05:58</strong></div>
				<div class="author">by <strong>elzooilogico</strong></div>
				<div class="content">for the sake of speed...<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>//&gt;nul 2&gt;nul||@goto :batch_code<br />/*<br />:batch_code<br />@echo off<br /><br />rem place desired exe name<br />set &quot;theExeFile=myParser.exe&quot;<br />set &quot;inputFile=.\input.txt&quot;<br />set &quot;outputFile=.\output.txt&quot;<br /><br />if not exist &quot;%theExeFile%&quot; call :build_the_exe || exit/B<br /><br />echo Processing, wait...<br />%theExeFile% &quot;%inputFile%&quot; &quot;%outputFile%&quot;<br />if %errorlevel% NEQ 0 (<br />&nbsp; echo Error code %errorlevel%<br />) else (<br />&nbsp; echo Done.<br />)<br />endlocal<br />exit /b 0<br /><br /><br /><br />:build_the_exe<br />for /f &quot;tokens=* delims=&quot; %%v in ('dir /b /s /a:-d /o:-n &quot;%SystemRoot%\Microsoft.NET\Framework\csc.exe&quot;') do (<br />&nbsp; &nbsp;set &quot;csc=%%v&quot;<br />)<br />if &quot;%csc%&quot; == &quot;&quot; echo/&amp;echo/Warning: Net Framework Not Found&amp;exit/B 1<br />call &quot;%csc%&quot; /nologo /out:&quot;%theExeFile%&quot; &quot;%~dpsfnx0&quot;<br />exit/B 0<br />*/<br /><br /><br />//begin c# code<br />using System;<br />using System.IO;<br /><br />namespace ElZooilogico<br />{<br />&nbsp; public class Parser<br />&nbsp; {<br />&nbsp; &nbsp; private static void parse(string inputFile, string outputFile)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; string&#91;&#93; buffer = null;<br />&nbsp; &nbsp; &nbsp; string match = string.Empty;<br /><br />&nbsp; &nbsp; &nbsp; using ( System.IO.StreamWriter output = new System.IO.StreamWriter(outputFile) )<br />&nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; buffer = File.ReadAllLines(inputFile);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; for ( int i = 0; i &lt; buffer&#91;0&#93;.Length; i++ )<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( buffer&#91;0&#93;&#91;i&#93; == buffer&#91;1&#93;&#91;i&#93; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match += buffer&#91;0&#93;&#91;i&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if ( match != string.Empty )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output.WriteLine(match);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match = string.Empty;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if ( match != string.Empty )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output.WriteLine(match);<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; return;<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; public static int Main(string&#91;&#93; args)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; try {<br />&nbsp; &nbsp; &nbsp; &nbsp; if ( args.Length != 2 )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 9;<br />&nbsp; &nbsp; &nbsp; &nbsp; if ( !File.Exists(args&#91;0&#93;) )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 1;<br />&nbsp; &nbsp; &nbsp; &nbsp; parse(args&#91;0&#93;, args&#91;1&#93;);<br />&nbsp; &nbsp; &nbsp; } catch (Exception e) { System.Windows.Forms.MessageBox.Show(e.Message); return 3; }<br />&nbsp; &nbsp; &nbsp; return 0;<br />&nbsp; &nbsp; }<br /><br />&nbsp; } // class Parser<br /><br />} // namespace ElZooilogico</code></pre></div><br />or to process huge file in chunks,<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>//&gt;nul 2&gt;nul||@goto :batch_code<br />/*<br />:batch_code<br />@echo off<br /><br />rem place desired exe name<br />set &quot;theExeFile=myParser.exe&quot;<br />set &quot;inputFile=.\input.txt&quot;<br />set &quot;outputFile=.\output.txt&quot;<br /><br />if not exist &quot;%theExeFile%&quot; call :build_the_exe || exit/B<br /><br />echo Processing, wait...<br />%theExeFile% &quot;%inputFile%&quot; &quot;%outputFile%&quot;<br />if %errorlevel% NEQ 0 (<br />&nbsp; echo Error code %errorlevel%<br />) else (<br />&nbsp; echo Done.<br />)<br />endlocal<br />exit /b 0<br /><br /><br /><br />:build_the_exe<br />for /f &quot;tokens=* delims=&quot; %%v in ('dir /b /s /a:-d /o:-n &quot;%SystemRoot%\Microsoft.NET\Framework\csc.exe&quot;') do (<br />&nbsp; &nbsp;set &quot;csc=%%v&quot;<br />)<br />if &quot;%csc%&quot; == &quot;&quot; echo/&amp;echo/Warning: Net Framework Not Found&amp;exit/B 1<br />call &quot;%csc%&quot; /nologo /out:&quot;%theExeFile%&quot; &quot;%~dpsfnx0&quot;<br />exit/B 0<br />*/<br /><br /><br />//begin c# code<br />using System;<br />using System.IO;<br /><br />namespace ElZooilogico<br />{<br />&nbsp; public class Parser<br />&nbsp; {<br />&nbsp; &nbsp; const int blockSize = 4096;<br />&nbsp; &nbsp; private static int filePtr = 0;<br /><br />&nbsp; &nbsp; private static void parse(string inputFile, string outputFile)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; long size=0;<br />&nbsp; &nbsp; &nbsp; int&nbsp; chunks=0, rest=0;<br />&nbsp; &nbsp; &nbsp; char&#91;&#93; buffer1 = new char&#91;blockSize&#93;, buffer2 = new char&#91;blockSize&#93;;<br /><br />&nbsp; &nbsp; &nbsp; using (FileStream fs = File.OpenRead(inputFile))<br />&nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; chunks = Convert.ToInt32((fs.Length / blockSize));<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; using (BinaryReader br = new BinaryReader(fs))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ( int i = 0; i &lt; chunks; i++ )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buffer1 = br.ReadChars(blockSize);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ( int j = 0; j &lt; blockSize; j++ )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( (buffer1&#91;j&#93; == 13 &amp;&amp; buffer1&#91;j+1&#93; == 10) || (buffer1&#91;j&#93; == 10 &amp;&amp; buffer1&#91;j+1&#93; == 13) )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( filePtr == 0 )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filePtr = Convert.ToInt32(size + j + 2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size += blockSize;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chunks = Convert.ToInt32((filePtr / blockSize));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rest = Convert.ToInt32(filePtr - (chunks*blockSize));<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; using ( System.IO.StreamReader&nbsp; line1 = new System.IO.StreamReader(inputFile),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; line2 = new System.IO.StreamReader(inputFile) )<br />&nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; string match = string.Empty;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; line2.BaseStream.Seek(filePtr, SeekOrigin.Current);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; using ( System.IO.StreamWriter output = new System.IO.StreamWriter(outputFile) )<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ( int i = 0; i &lt; chunks; i++ )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.Console.Out.Write(&quot;\rBlock {0} of {1}&quot;, i.ToString(), chunks.ToString());<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; line1.Read(buffer1, 0, blockSize);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; line2.Read(buffer2, 0, blockSize);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ( int j = 0; j &lt; blockSize; j++ )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( buffer1&#91;j&#93; == buffer2&#91;j&#93; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match += buffer1&#91;j&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if ( match != string.Empty )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output.WriteLine(match);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match = string.Empty;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(&quot;\rBlock &quot; + chunks.ToString()+ &quot; of &quot; + chunks.ToString());<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( rest &gt; 0 )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; line1.Read(buffer1, 0, rest);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; line2.Read(buffer2, 0, rest);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ( int j = 0; j &lt; rest; j++ )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( buffer1&#91;j&#93; == buffer2&#91;j&#93; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match += buffer1&#91;j&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if ( match != string.Empty )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output.WriteLine(match);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match = string.Empty;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( match != string.Empty )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output.WriteLine(match);<br />&nbsp; &nbsp; &nbsp; &nbsp; } // StreamWriter closed;<br />&nbsp; &nbsp; &nbsp; } // StreamReaders Closed<br />&nbsp; &nbsp; &nbsp; return;<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; public static int Main(string&#91;&#93; args)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; try {<br />&nbsp; &nbsp; &nbsp; &nbsp; if ( args.Length != 2 )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 9;<br />&nbsp; &nbsp; &nbsp; &nbsp; if ( !File.Exists(args&#91;0&#93;) )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 1;<br />&nbsp; &nbsp; &nbsp; &nbsp; parse(args&#91;0&#93;, args&#91;1&#93;);<br />&nbsp; &nbsp; &nbsp; } catch (Exception e) { System.Windows.Forms.MessageBox.Show(e.Message); return 3; }<br />&nbsp; &nbsp; &nbsp; return 0;<br />&nbsp; &nbsp; }<br /><br />&nbsp; } // class Parser<br /><br />} // namespace ElZooilogico</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>29 Aug 2017 07:17</strong></div>
				<div class="author">by <strong>Aacini</strong></div>
				<div class="content">This is another version of a Batch-JScript hybrid script that should run fast.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>@if (@CodeSection == @Batch) @then<br /><br /><br />@echo off<br />CScript //nologo //E:JScript &quot;%~F0&quot; &lt; input.txt &gt; output.txt<br />goto :EOF<br /><br /><br />@end<br /><br /><br />var line1 = &quot;1&quot;+WScript.Stdin.ReadLine()+&quot;10&quot;,<br />&nbsp; &nbsp; line2 = &quot;2&quot;+WScript.Stdin.ReadLine()+&quot;20&quot;,<br />&nbsp; &nbsp; len = line1.length-1, i, j;<br /><br />for ( i = 0; line1.charAt(i) != line2.charAt(i); ++i );<br /><br />while ( i &lt; len ) {<br /><br />&nbsp; &nbsp;for ( j = i; line1.charAt(i) == line2.charAt(i); ++i );<br />&nbsp; &nbsp;WScript.Stdout.WriteLine(line1.slice(j,i));<br />&nbsp; &nbsp;while ( line1.charAt(i) != line2.charAt(i) ) ++i;<br /><br />}<br /></code></pre></div><br />This program took 25 seconds to process the 1.52 MB input(2).txt file in my old&amp;slow computer; the generated output have 150,164 lines. These are a few lines from begin and end of output file:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>RGRHRGRGRHRGRGRGIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFGDGARGRHRGRGRHRGRHRGIGRFRFIGRFRFIGRFRFIGRFRFIGRGRGIGRGRGIGRGRGIGRGRGIGRFRFIGRFRFIGRFRFIGRFRFIGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />GDGARGRHRGRGRHRGRIRGIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGRFRFIGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />GDGARGRHRGRGRHRGRRRGIGR<br />R<br />IGR<br />R<br />IGR<br />R<br /><br /><br />. . .<br /><br /><br />R<br />IGR<br />R<br />GDGARGRHRGRHKIKMKMRGIGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />R<br />IGR<br />IGR<br />R<br />IGR<br />R<br />GDGA<br /></code></pre></div><br />Antonio</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Alignment using batchscript</h3>
				<div class="date">Posted: <strong>29 Aug 2017 19:55</strong></div>
				<div class="author">by <strong>plasma33</strong></div>
				<div class="content">Hello everyone,<br /><br />Sorry for my delayed response.<br /><br />All of your codes worked perfectly as it should. I can't believe how fast all of your codes work.<br /><br />Just a question is it possible to use a matrix to generate the common substrings? I have an IDENTITY (scoring) matrix which could be used to generate common substrings adopting the longest common substring implementation.<br /><br />Please follow the link below for the ID matrix:<br /><a href="https://www.mediafire.com/file/ll6jjw3vxbibcag/IDENTITY" class="postlink">https://www.mediafire.com/file/ll6jjw3vxbibcag/IDENTITY</a><br /><br />Thanks again, guys.<br /><br />Plasma33</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC-6">UTC-06:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.dostips.com/forum/viewtopic.php?f=3&t=8062&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Oct 2018 09:04:16 GMT -->
</html>
